const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browserAll-B__2SfkM.js","assets/webworkerAll-CCT0i86f.js","assets/colorToUniform-C2GHuDhf.js","assets/CanvasPool-DrSTpgOp.js","assets/WebGPURenderer-hJO2B9sR.js","assets/SharedSystems-CkuYpMmS.js","assets/WebGLRenderer-BN_ZAk_s.js"])))=>i.map(i=>d[i]);
var b1=Object.defineProperty;var w1=(n,t,e)=>t in n?b1(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var wt=(n,t,e)=>w1(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function e(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=e(o);fetch(o.href,a)}})();var vs,Ft,cf,Yn,zu,ff,df,pf,Ya,Sa,Ca,Kr={},_f=[],S1=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,bs=Array.isArray;function gn(n,t){for(var e in t)n[e]=t[e];return n}function Xa(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function C1(n,t,e){var i,o,a,l={};for(a in t)a=="key"?i=t[a]:a=="ref"?o=t[a]:l[a]=t[a];if(arguments.length>2&&(l.children=arguments.length>3?vs.call(arguments,2):e),typeof n=="function"&&n.defaultProps!=null)for(a in n.defaultProps)l[a]==null&&(l[a]=n.defaultProps[a]);return hs(n,l,i,o,null)}function hs(n,t,e,i,o){var a={type:n,props:t,key:e,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o??++cf,__i:-1,__u:0};return o==null&&Ft.vnode!=null&&Ft.vnode(a),a}function ws(n){return n.children}function ls(n,t){this.props=n,this.context=t}function _r(n,t){if(t==null)return n.__?_r(n.__,n.__i+1):null;for(var e;t<n.__k.length;t++)if((e=n.__k[t])!=null&&e.__e!=null)return e.__e;return typeof n.type=="function"?_r(n):null}function gf(n){var t,e;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,t=0;t<n.__k.length;t++)if((e=n.__k[t])!=null&&e.__e!=null){n.__e=n.__c.base=e.__e;break}return gf(n)}}function Hu(n){(!n.__d&&(n.__d=!0)&&Yn.push(n)&&!_s.__r++||zu!=Ft.debounceRendering)&&((zu=Ft.debounceRendering)||ff)(_s)}function _s(){for(var n,t,e,i,o,a,l,u=1;Yn.length;)Yn.length>u&&Yn.sort(df),n=Yn.shift(),u=Yn.length,n.__d&&(e=void 0,o=(i=(t=n).__v).__e,a=[],l=[],t.__P&&((e=gn({},i)).__v=i.__v+1,Ft.vnode&&Ft.vnode(e),Va(t.__P,e,i,t.__n,t.__P.namespaceURI,32&i.__u?[o]:null,a,o??_r(i),!!(32&i.__u),l),e.__v=i.__v,e.__.__k[e.__i]=e,yf(a,e,l),e.__e!=o&&gf(e)));_s.__r=0}function mf(n,t,e,i,o,a,l,u,f,d,p){var _,v,m,C,M,w,T=i&&i.__k||_f,R=t.length;for(f=A1(e,t,T,f,R),_=0;_<R;_++)(m=e.__k[_])!=null&&(v=m.__i==-1?Kr:T[m.__i]||Kr,m.__i=_,w=Va(n,m,v,o,a,l,u,f,d,p),C=m.__e,m.ref&&v.ref!=m.ref&&(v.ref&&qa(v.ref,null,m),p.push(m.ref,m.__c||C,m)),M==null&&C!=null&&(M=C),4&m.__u||v.__k===m.__k?f=xf(m,f,n):typeof m.type=="function"&&w!==void 0?f=w:C&&(f=C.nextSibling),m.__u&=-7);return e.__e=M,f}function A1(n,t,e,i,o){var a,l,u,f,d,p=e.length,_=p,v=0;for(n.__k=new Array(o),a=0;a<o;a++)(l=t[a])!=null&&typeof l!="boolean"&&typeof l!="function"?(f=a+v,(l=n.__k[a]=typeof l=="string"||typeof l=="number"||typeof l=="bigint"||l.constructor==String?hs(null,l,null,null,null):bs(l)?hs(ws,{children:l},null,null,null):l.constructor==null&&l.__b>0?hs(l.type,l.props,l.key,l.ref?l.ref:null,l.__v):l).__=n,l.__b=n.__b+1,u=null,(d=l.__i=P1(l,e,f,_))!=-1&&(_--,(u=e[d])&&(u.__u|=2)),u==null||u.__v==null?(d==-1&&(o>p?v--:o<p&&v++),typeof l.type!="function"&&(l.__u|=4)):d!=f&&(d==f-1?v--:d==f+1?v++:(d>f?v--:v++,l.__u|=4))):n.__k[a]=null;if(_)for(a=0;a<p;a++)(u=e[a])!=null&&(2&u.__u)==0&&(u.__e==i&&(i=_r(u)),bf(u,u));return i}function xf(n,t,e){var i,o;if(typeof n.type=="function"){for(i=n.__k,o=0;i&&o<i.length;o++)i[o]&&(i[o].__=n,t=xf(i[o],t,e));return t}n.__e!=t&&(t&&n.type&&!e.contains(t)&&(t=_r(n)),e.insertBefore(n.__e,t||null),t=n.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function P1(n,t,e,i){var o,a,l=n.key,u=n.type,f=t[e];if(f===null&&n.key==null||f&&l==f.key&&u==f.type&&(2&f.__u)==0)return e;if(i>(f!=null&&(2&f.__u)==0?1:0))for(o=e-1,a=e+1;o>=0||a<t.length;){if(o>=0){if((f=t[o])&&(2&f.__u)==0&&l==f.key&&u==f.type)return o;o--}if(a<t.length){if((f=t[a])&&(2&f.__u)==0&&l==f.key&&u==f.type)return a;a++}}return-1}function Yu(n,t,e){t[0]=="-"?n.setProperty(t,e??""):n[t]=e==null?"":typeof e!="number"||S1.test(t)?e:e+"px"}function Vi(n,t,e,i,o){var a;t:if(t=="style")if(typeof e=="string")n.style.cssText=e;else{if(typeof i=="string"&&(n.style.cssText=i=""),i)for(t in i)e&&t in e||Yu(n.style,t,"");if(e)for(t in e)i&&e[t]==i[t]||Yu(n.style,t,e[t])}else if(t[0]=="o"&&t[1]=="n")a=t!=(t=t.replace(pf,"$1")),t=t.toLowerCase()in n||t=="onFocusOut"||t=="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),n.l||(n.l={}),n.l[t+a]=e,e?i?e.u=i.u:(e.u=Ya,n.addEventListener(t,a?Ca:Sa,a)):n.removeEventListener(t,a?Ca:Sa,a);else{if(o=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in n)try{n[t]=e??"";break t}catch{}typeof e=="function"||(e==null||e===!1&&t[4]!="-"?n.removeAttribute(t):n.setAttribute(t,t=="popover"&&e==1?"":e))}}function Xu(n){return function(t){if(this.l){var e=this.l[t.type+n];if(t.t==null)t.t=Ya++;else if(t.t<e.u)return;return e(Ft.event?Ft.event(t):t)}}}function Va(n,t,e,i,o,a,l,u,f,d){var p,_,v,m,C,M,w,T,R,F,D,X,z,$,rt,et,Z,K=t.type;if(t.constructor!=null)return null;128&e.__u&&(f=!!(32&e.__u),a=[u=t.__e=e.__e]),(p=Ft.__b)&&p(t);t:if(typeof K=="function")try{if(T=t.props,R="prototype"in K&&K.prototype.render,F=(p=K.contextType)&&i[p.__c],D=p?F?F.props.value:p.__:i,e.__c?w=(_=t.__c=e.__c).__=_.__E:(R?t.__c=_=new K(T,D):(t.__c=_=new ls(T,D),_.constructor=K,_.render=M1),F&&F.sub(_),_.props=T,_.state||(_.state={}),_.context=D,_.__n=i,v=_.__d=!0,_.__h=[],_._sb=[]),R&&_.__s==null&&(_.__s=_.state),R&&K.getDerivedStateFromProps!=null&&(_.__s==_.state&&(_.__s=gn({},_.__s)),gn(_.__s,K.getDerivedStateFromProps(T,_.__s))),m=_.props,C=_.state,_.__v=t,v)R&&K.getDerivedStateFromProps==null&&_.componentWillMount!=null&&_.componentWillMount(),R&&_.componentDidMount!=null&&_.__h.push(_.componentDidMount);else{if(R&&K.getDerivedStateFromProps==null&&T!==m&&_.componentWillReceiveProps!=null&&_.componentWillReceiveProps(T,D),!_.__e&&_.shouldComponentUpdate!=null&&_.shouldComponentUpdate(T,_.__s,D)===!1||t.__v==e.__v){for(t.__v!=e.__v&&(_.props=T,_.state=_.__s,_.__d=!1),t.__e=e.__e,t.__k=e.__k,t.__k.some(function(yt){yt&&(yt.__=t)}),X=0;X<_._sb.length;X++)_.__h.push(_._sb[X]);_._sb=[],_.__h.length&&l.push(_);break t}_.componentWillUpdate!=null&&_.componentWillUpdate(T,_.__s,D),R&&_.componentDidUpdate!=null&&_.__h.push(function(){_.componentDidUpdate(m,C,M)})}if(_.context=D,_.props=T,_.__P=n,_.__e=!1,z=Ft.__r,$=0,R){for(_.state=_.__s,_.__d=!1,z&&z(t),p=_.render(_.props,_.state,_.context),rt=0;rt<_._sb.length;rt++)_.__h.push(_._sb[rt]);_._sb=[]}else do _.__d=!1,z&&z(t),p=_.render(_.props,_.state,_.context),_.state=_.__s;while(_.__d&&++$<25);_.state=_.__s,_.getChildContext!=null&&(i=gn(gn({},i),_.getChildContext())),R&&!v&&_.getSnapshotBeforeUpdate!=null&&(M=_.getSnapshotBeforeUpdate(m,C)),et=p,p!=null&&p.type===ws&&p.key==null&&(et=vf(p.props.children)),u=mf(n,bs(et)?et:[et],t,e,i,o,a,l,u,f,d),_.base=t.__e,t.__u&=-161,_.__h.length&&l.push(_),w&&(_.__E=_.__=null)}catch(yt){if(t.__v=null,f||a!=null)if(yt.then){for(t.__u|=f?160:128;u&&u.nodeType==8&&u.nextSibling;)u=u.nextSibling;a[a.indexOf(u)]=null,t.__e=u}else for(Z=a.length;Z--;)Xa(a[Z]);else t.__e=e.__e,t.__k=e.__k;Ft.__e(yt,t,e)}else a==null&&t.__v==e.__v?(t.__k=e.__k,t.__e=e.__e):u=t.__e=T1(e.__e,t,e,i,o,a,l,f,d);return(p=Ft.diffed)&&p(t),128&t.__u?void 0:u}function yf(n,t,e){for(var i=0;i<e.length;i++)qa(e[i],e[++i],e[++i]);Ft.__c&&Ft.__c(t,n),n.some(function(o){try{n=o.__h,o.__h=[],n.some(function(a){a.call(o)})}catch(a){Ft.__e(a,o.__v)}})}function vf(n){return typeof n!="object"||n==null||n.__b&&n.__b>0?n:bs(n)?n.map(vf):gn({},n)}function T1(n,t,e,i,o,a,l,u,f){var d,p,_,v,m,C,M,w=e.props,T=t.props,R=t.type;if(R=="svg"?o="http://www.w3.org/2000/svg":R=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),a!=null){for(d=0;d<a.length;d++)if((m=a[d])&&"setAttribute"in m==!!R&&(R?m.localName==R:m.nodeType==3)){n=m,a[d]=null;break}}if(n==null){if(R==null)return document.createTextNode(T);n=document.createElementNS(o,R,T.is&&T),u&&(Ft.__m&&Ft.__m(t,a),u=!1),a=null}if(R==null)w===T||u&&n.data==T||(n.data=T);else{if(a=a&&vs.call(n.childNodes),w=e.props||Kr,!u&&a!=null)for(w={},d=0;d<n.attributes.length;d++)w[(m=n.attributes[d]).name]=m.value;for(d in w)if(m=w[d],d!="children"){if(d=="dangerouslySetInnerHTML")_=m;else if(!(d in T)){if(d=="value"&&"defaultValue"in T||d=="checked"&&"defaultChecked"in T)continue;Vi(n,d,null,m,o)}}for(d in T)m=T[d],d=="children"?v=m:d=="dangerouslySetInnerHTML"?p=m:d=="value"?C=m:d=="checked"?M=m:u&&typeof m!="function"||w[d]===m||Vi(n,d,m,w[d],o);if(p)u||_&&(p.__html==_.__html||p.__html==n.innerHTML)||(n.innerHTML=p.__html),t.__k=[];else if(_&&(n.innerHTML=""),mf(t.type=="template"?n.content:n,bs(v)?v:[v],t,e,i,R=="foreignObject"?"http://www.w3.org/1999/xhtml":o,a,l,a?a[0]:e.__k&&_r(e,0),u,f),a!=null)for(d=a.length;d--;)Xa(a[d]);u||(d="value",R=="progress"&&C==null?n.removeAttribute("value"):C!=null&&(C!==n[d]||R=="progress"&&!C||R=="option"&&C!=w[d])&&Vi(n,d,C,w[d],o),d="checked",M!=null&&M!=n[d]&&Vi(n,d,M,w[d],o))}return n}function qa(n,t,e){try{if(typeof n=="function"){var i=typeof n.__u=="function";i&&n.__u(),i&&t==null||(n.__u=n(t))}else n.current=t}catch(o){Ft.__e(o,e)}}function bf(n,t,e){var i,o;if(Ft.unmount&&Ft.unmount(n),(i=n.ref)&&(i.current&&i.current!=n.__e||qa(i,null,t)),(i=n.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(a){Ft.__e(a,t)}i.base=i.__P=null}if(i=n.__k)for(o=0;o<i.length;o++)i[o]&&bf(i[o],t,e||typeof n.type!="function");e||Xa(n.__e),n.__c=n.__=n.__e=void 0}function M1(n,t,e){return this.constructor(n,e)}function I1(n,t,e){var i,o,a,l;t==document&&(t=document.documentElement),Ft.__&&Ft.__(n,t),o=(i=!1)?null:t.__k,a=[],l=[],Va(t,n=t.__k=C1(ws,null,[n]),o||Kr,Kr,t.namespaceURI,o?null:t.firstChild?vs.call(t.childNodes):null,a,o?o.__e:t.firstChild,i,l),yf(a,n,l)}vs=_f.slice,Ft={__e:function(n,t,e,i){for(var o,a,l;t=t.__;)if((o=t.__c)&&!o.__)try{if((a=o.constructor)&&a.getDerivedStateFromError!=null&&(o.setState(a.getDerivedStateFromError(n)),l=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(n,i||{}),l=o.__d),l)return o.__E=o}catch(u){n=u}throw n}},cf=0,ls.prototype.setState=function(n,t){var e;e=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=gn({},this.state),typeof n=="function"&&(n=n(gn({},e),this.props)),n&&gn(e,n),n!=null&&this.__v&&(t&&this._sb.push(t),Hu(this))},ls.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),Hu(this))},ls.prototype.render=ws,Yn=[],ff=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,df=function(n,t){return n.__v.__b-t.__v.__b},_s.__r=0,pf=/(PointerCapture)$|Capture$/i,Ya=0,Sa=Xu(!1),Ca=Xu(!0);var E1=0;function Jt(n,t,e,i,o,a){t||(t={});var l,u,f=t;if("ref"in f)for(u in f={},t)u=="ref"?l=t[u]:f[u]=t[u];var d={type:n,props:f,key:e,ref:l,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--E1,__i:-1,__u:0,__source:o,__self:a};if(typeof n=="function"&&(l=n.defaultProps))for(u in l)f[u]===void 0&&(f[u]=l[u]);return Ft.vnode&&Ft.vnode(d),d}const R1="modulepreload",k1=function(n){return"/"+n},Vu={},gs=function(t,e,i){let o=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));o=Promise.allSettled(e.map(f=>{if(f=k1(f),f in Vu)return;Vu[f]=!0;const d=f.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${p}`))return;const _=document.createElement("link");if(_.rel=d?"stylesheet":R1,d||(_.as="script"),_.crossOrigin="",_.href=f,u&&_.setAttribute("nonce",u),document.head.appendChild(_),d)return new Promise((v,m)=>{_.addEventListener("load",v),_.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return o.then(l=>{for(const u of l||[])u.status==="rejected"&&a(u.reason);return t().catch(a)})};var Mt=(n=>(n.Application="application",n.WebGLPipes="webgl-pipes",n.WebGLPipesAdaptor="webgl-pipes-adaptor",n.WebGLSystem="webgl-system",n.WebGPUPipes="webgpu-pipes",n.WebGPUPipesAdaptor="webgpu-pipes-adaptor",n.WebGPUSystem="webgpu-system",n.CanvasSystem="canvas-system",n.CanvasPipesAdaptor="canvas-pipes-adaptor",n.CanvasPipes="canvas-pipes",n.Asset="asset",n.LoadParser="load-parser",n.ResolveParser="resolve-parser",n.CacheParser="cache-parser",n.DetectionParser="detection-parser",n.MaskEffect="mask-effect",n.BlendMode="blend-mode",n.TextureSource="texture-source",n.Environment="environment",n.ShapeBuilder="shape-builder",n.Batcher="batcher",n))(Mt||{});const Aa=n=>{if(typeof n=="function"||typeof n=="object"&&n.extension){if(!n.extension)throw new Error("Extension class must have an extension object");n={...typeof n.extension!="object"?{type:n.extension}:n.extension,ref:n}}if(typeof n=="object")n={...n};else throw new Error("Invalid extension type");return typeof n.type=="string"&&(n.type=[n.type]),n},qi=(n,t)=>Aa(n).priority??t,De={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...n){return n.map(Aa).forEach(t=>{t.type.forEach(e=>{var i,o;return(o=(i=this._removeHandlers)[e])==null?void 0:o.call(i,t)})}),this},add(...n){return n.map(Aa).forEach(t=>{t.type.forEach(e=>{var a,l;const i=this._addHandlers,o=this._queue;i[e]?(l=i[e])==null||l.call(i,t):(o[e]=o[e]||[],(a=o[e])==null||a.push(t))})}),this},handle(n,t,e){var l;const i=this._addHandlers,o=this._removeHandlers;if(i[n]||o[n])throw new Error(`Extension type ${n} already has a handler`);i[n]=t,o[n]=e;const a=this._queue;return a[n]&&((l=a[n])==null||l.forEach(u=>t(u)),delete a[n]),this},handleByMap(n,t){return this.handle(n,e=>{e.name&&(t[e.name]=e.ref)},e=>{e.name&&delete t[e.name]})},handleByNamedList(n,t,e=-1){return this.handle(n,i=>{t.findIndex(a=>a.name===i.name)>=0||(t.push({name:i.name,value:i.ref}),t.sort((a,l)=>qi(l.value,e)-qi(a.value,e)))},i=>{const o=t.findIndex(a=>a.name===i.name);o!==-1&&t.splice(o,1)})},handleByList(n,t,e=-1){return this.handle(n,i=>{t.includes(i.ref)||(t.push(i.ref),t.sort((o,a)=>qi(a,e)-qi(o,e)))},i=>{const o=t.indexOf(i.ref);o!==-1&&t.splice(o,1)})},mixin(n,...t){for(const e of t)Object.defineProperties(n.prototype,Object.getOwnPropertyDescriptors(e))}},F1={extension:{type:Mt.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await gs(()=>import("./browserAll-B__2SfkM.js"),__vite__mapDeps([0,1,2,3]))}},B1={extension:{type:Mt.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await gs(()=>import("./webworkerAll-CCT0i86f.js"),__vite__mapDeps([1,2,3]))}};class me{constructor(t,e,i){this._x=e||0,this._y=i||0,this._observer=t}clone(t){return new me(t??this._observer,this._x,this._y)}set(t=0,e=t){return(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this._observer._onUpdate(this)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this._observer._onUpdate(this)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=0 y=0 scope=${this._observer}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this._observer._onUpdate(this))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this._observer._onUpdate(this))}}var Ki=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ka(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var qo={exports:{}},qu;function L1(){return qu||(qu=1,function(n){var t=Object.prototype.hasOwnProperty,e="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(e=!1));function o(f,d,p){this.fn=f,this.context=d,this.once=p||!1}function a(f,d,p,_,v){if(typeof p!="function")throw new TypeError("The listener must be a function");var m=new o(p,_||f,v),C=e?e+d:d;return f._events[C]?f._events[C].fn?f._events[C]=[f._events[C],m]:f._events[C].push(m):(f._events[C]=m,f._eventsCount++),f}function l(f,d){--f._eventsCount===0?f._events=new i:delete f._events[d]}function u(){this._events=new i,this._eventsCount=0}u.prototype.eventNames=function(){var d=[],p,_;if(this._eventsCount===0)return d;for(_ in p=this._events)t.call(p,_)&&d.push(e?_.slice(1):_);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(p)):d},u.prototype.listeners=function(d){var p=e?e+d:d,_=this._events[p];if(!_)return[];if(_.fn)return[_.fn];for(var v=0,m=_.length,C=new Array(m);v<m;v++)C[v]=_[v].fn;return C},u.prototype.listenerCount=function(d){var p=e?e+d:d,_=this._events[p];return _?_.fn?1:_.length:0},u.prototype.emit=function(d,p,_,v,m,C){var M=e?e+d:d;if(!this._events[M])return!1;var w=this._events[M],T=arguments.length,R,F;if(w.fn){switch(w.once&&this.removeListener(d,w.fn,void 0,!0),T){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,p),!0;case 3:return w.fn.call(w.context,p,_),!0;case 4:return w.fn.call(w.context,p,_,v),!0;case 5:return w.fn.call(w.context,p,_,v,m),!0;case 6:return w.fn.call(w.context,p,_,v,m,C),!0}for(F=1,R=new Array(T-1);F<T;F++)R[F-1]=arguments[F];w.fn.apply(w.context,R)}else{var D=w.length,X;for(F=0;F<D;F++)switch(w[F].once&&this.removeListener(d,w[F].fn,void 0,!0),T){case 1:w[F].fn.call(w[F].context);break;case 2:w[F].fn.call(w[F].context,p);break;case 3:w[F].fn.call(w[F].context,p,_);break;case 4:w[F].fn.call(w[F].context,p,_,v);break;default:if(!R)for(X=1,R=new Array(T-1);X<T;X++)R[X-1]=arguments[X];w[F].fn.apply(w[F].context,R)}}return!0},u.prototype.on=function(d,p,_){return a(this,d,p,_,!1)},u.prototype.once=function(d,p,_){return a(this,d,p,_,!0)},u.prototype.removeListener=function(d,p,_,v){var m=e?e+d:d;if(!this._events[m])return this;if(!p)return l(this,m),this;var C=this._events[m];if(C.fn)C.fn===p&&(!v||C.once)&&(!_||C.context===_)&&l(this,m);else{for(var M=0,w=[],T=C.length;M<T;M++)(C[M].fn!==p||v&&!C[M].once||_&&C[M].context!==_)&&w.push(C[M]);w.length?this._events[m]=w.length===1?w[0]:w:l(this,m)}return this},u.prototype.removeAllListeners=function(d){var p;return d?(p=e?e+d:d,this._events[p]&&l(this,p)):(this._events=new i,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=e,u.EventEmitter=u,n.exports=u}(qo)),qo.exports}var G1=L1();const rn=Ka(G1),O1=Math.PI*2,D1=180/Math.PI,U1=Math.PI/180;class oe{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new oe(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return Ko.x=0,Ko.y=0,Ko}}const Ko=new oe;class bt{constructor(t=1,e=0,i=0,o=1,a=0,l=0){this.array=null,this.a=t,this.b=e,this.c=i,this.d=o,this.tx=a,this.ty=l}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,i,o,a,l){return this.a=t,this.b=e,this.c=i,this.d=o,this.tx=a,this.ty=l,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(t,e){e=e||new oe;const i=t.x,o=t.y;return e.x=this.a*i+this.c*o+this.tx,e.y=this.b*i+this.d*o+this.ty,e}applyInverse(t,e){e=e||new oe;const i=this.a,o=this.b,a=this.c,l=this.d,u=this.tx,f=this.ty,d=1/(i*l+a*-o),p=t.x,_=t.y;return e.x=l*d*p+-a*d*_+(f*a-u*l)*d,e.y=i*d*_+-o*d*p+(-f*i+u*o)*d,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),o=this.a,a=this.c,l=this.tx;return this.a=o*e-this.b*i,this.b=o*i+this.b*e,this.c=a*e-this.d*i,this.d=a*i+this.d*e,this.tx=l*e-this.ty*i,this.ty=l*i+this.ty*e,this}append(t){const e=this.a,i=this.b,o=this.c,a=this.d;return this.a=t.a*e+t.b*o,this.b=t.a*i+t.b*a,this.c=t.c*e+t.d*o,this.d=t.c*i+t.d*a,this.tx=t.tx*e+t.ty*o+this.tx,this.ty=t.tx*i+t.ty*a+this.ty,this}appendFrom(t,e){const i=t.a,o=t.b,a=t.c,l=t.d,u=t.tx,f=t.ty,d=e.a,p=e.b,_=e.c,v=e.d;return this.a=i*d+o*_,this.b=i*p+o*v,this.c=a*d+l*_,this.d=a*p+l*v,this.tx=u*d+f*_+e.tx,this.ty=u*p+f*v+e.ty,this}setTransform(t,e,i,o,a,l,u,f,d){return this.a=Math.cos(u+d)*a,this.b=Math.sin(u+d)*a,this.c=-Math.sin(u-f)*l,this.d=Math.cos(u-f)*l,this.tx=t-(i*this.a+o*this.c),this.ty=e-(i*this.b+o*this.d),this}prepend(t){const e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const i=this.a,o=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=o*t.a+this.d*t.c,this.d=o*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,i=this.b,o=this.c,a=this.d,l=t.pivot,u=-Math.atan2(-o,a),f=Math.atan2(i,e),d=Math.abs(u+f);return d<1e-5||Math.abs(O1-d)<1e-5?(t.rotation=f,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=u,t.skew.y=f),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(o*o+a*a),t.position.x=this.tx+(l.x*e+l.y*o),t.position.y=this.ty+(l.x*i+l.y*a),t}invert(){const t=this.a,e=this.b,i=this.c,o=this.d,a=this.tx,l=t*o-e*i;return this.a=o/l,this.b=-e/l,this.c=-i/l,this.d=t/l,this.tx=(i*this.ty-o*a)/l,this.ty=-(t*this.ty-e*a)/l,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new bt;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}equals(t){return t.a===this.a&&t.b===this.b&&t.c===this.c&&t.d===this.d&&t.tx===this.tx&&t.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return N1.identity()}static get shared(){return W1.identity()}}const W1=new bt,N1=new bt,Nn=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],$n=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],zn=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Hn=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Pa=[],wf=[],Zi=Math.sign;function $1(){for(let n=0;n<16;n++){const t=[];Pa.push(t);for(let e=0;e<16;e++){const i=Zi(Nn[n]*Nn[e]+zn[n]*$n[e]),o=Zi($n[n]*Nn[e]+Hn[n]*$n[e]),a=Zi(Nn[n]*zn[e]+zn[n]*Hn[e]),l=Zi($n[n]*zn[e]+Hn[n]*Hn[e]);for(let u=0;u<16;u++)if(Nn[u]===i&&$n[u]===o&&zn[u]===a&&Hn[u]===l){t.push(u);break}}}for(let n=0;n<16;n++){const t=new bt;t.set(Nn[n],$n[n],zn[n],Hn[n],0,0),wf.push(t)}}$1();const Dt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:n=>Nn[n],uY:n=>$n[n],vX:n=>zn[n],vY:n=>Hn[n],inv:n=>n&8?n&15:-n&7,add:(n,t)=>Pa[n][t],sub:(n,t)=>Pa[n][Dt.inv(t)],rotate180:n=>n^4,isVertical:n=>(n&3)===2,byDirection:(n,t)=>Math.abs(n)*2<=Math.abs(t)?t>=0?Dt.S:Dt.N:Math.abs(t)*2<=Math.abs(n)?n>0?Dt.E:Dt.W:t>0?n>0?Dt.SE:Dt.SW:n>0?Dt.NE:Dt.NW,matrixAppendRotationInv:(n,t,e=0,i=0)=>{const o=wf[Dt.inv(t)];o.tx=e,o.ty=i,n.append(o)}},ji=[new oe,new oe,new oe,new oe];class ee{constructor(t=0,e=0,i=0,o=0){this.type="rectangle",this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(o)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new ee(0,0,0,0)}clone(){return new ee(this.x,this.y,this.width,this.height)}copyFromBounds(t){return this.x=t.minX,this.y=t.minY,this.width=t.maxX-t.minX,this.height=t.maxY-t.minY,this}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}strokeContains(t,e,i,o=.5){const{width:a,height:l}=this;if(a<=0||l<=0)return!1;const u=this.x,f=this.y,d=i*(1-o),p=i-d,_=u-d,v=u+a+d,m=f-d,C=f+l+d,M=u+p,w=u+a-p,T=f+p,R=f+l-p;return t>=_&&t<=v&&e>=m&&e<=C&&!(t>M&&t<w&&e>T&&e<R)}intersects(t,e){if(!e){const rt=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=rt)return!1;const Z=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>Z}const i=this.left,o=this.right,a=this.top,l=this.bottom;if(o<=i||l<=a)return!1;const u=ji[0].set(t.left,t.top),f=ji[1].set(t.left,t.bottom),d=ji[2].set(t.right,t.top),p=ji[3].set(t.right,t.bottom);if(d.x<=u.x||f.y<=u.y)return!1;const _=Math.sign(e.a*e.d-e.b*e.c);if(_===0||(e.apply(u,u),e.apply(f,f),e.apply(d,d),e.apply(p,p),Math.max(u.x,f.x,d.x,p.x)<=i||Math.min(u.x,f.x,d.x,p.x)>=o||Math.max(u.y,f.y,d.y,p.y)<=a||Math.min(u.y,f.y,d.y,p.y)>=l))return!1;const v=_*(f.y-u.y),m=_*(u.x-f.x),C=v*i+m*a,M=v*o+m*a,w=v*i+m*l,T=v*o+m*l;if(Math.max(C,M,w,T)<=v*u.x+m*u.y||Math.min(C,M,w,T)>=v*p.x+m*p.y)return!1;const R=_*(u.y-d.y),F=_*(d.x-u.x),D=R*i+F*a,X=R*o+F*a,z=R*i+F*l,$=R*o+F*l;return!(Math.max(D,X,z,$)<=R*u.x+F*u.y||Math.min(D,X,z,$)>=R*p.x+F*p.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this}fit(t){const e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),o=Math.max(this.y,t.y),a=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=o,this.height=Math.max(a-o,0),this}ceil(t=1,e=.001){const i=Math.ceil((this.x+this.width-e)*t)/t,o=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=o-this.y,this}enlarge(t){const e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),o=Math.min(this.y,t.y),a=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=o,this.height=a-o,this}getBounds(t){return t||(t=new ee),t.copyFrom(this),t}containsRect(t){if(this.width<=0||this.height<=0)return!1;const e=t.x,i=t.y,o=t.x+t.width,a=t.y+t.height;return e>=this.x&&e<this.x+this.width&&i>=this.y&&i<this.y+this.height&&o>=this.x&&o<this.x+this.width&&a>=this.y&&a<this.y+this.height}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const Zo={default:-1};function qt(n="default"){return Zo[n]===void 0&&(Zo[n]=-1),++Zo[n]}const Ku={},$t="8.0.0",z1="8.3.4";function Rt(n,t,e=3){if(Ku[t])return;let i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${n}`):(i=i.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${n}`),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${n}`),console.warn(i))),Ku[t]=!0}const Sf=()=>{};function Zu(n){return n+=n===0?1:0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1}function ju(n){return!(n&n-1)&&!!n}function Cf(n){const t={};for(const e in n)n[e]!==void 0&&(t[e]=n[e]);return t}const Qu=Object.create(null);function H1(n){const t=Qu[n];return t===void 0&&(Qu[n]=qt("resource")),t}const Af=class Pf extends rn{constructor(t={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,t={...Pf.defaultOptions,...t},this.addressMode=t.addressMode,this.addressModeU=t.addressModeU??this.addressModeU,this.addressModeV=t.addressModeV??this.addressModeV,this.addressModeW=t.addressModeW??this.addressModeW,this.scaleMode=t.scaleMode,this.magFilter=t.magFilter??this.magFilter,this.minFilter=t.minFilter??this.minFilter,this.mipmapFilter=t.mipmapFilter??this.mipmapFilter,this.lodMinClamp=t.lodMinClamp,this.lodMaxClamp=t.lodMaxClamp,this.compare=t.compare,this.maxAnisotropy=t.maxAnisotropy??1}set addressMode(t){this.addressModeU=t,this.addressModeV=t,this.addressModeW=t}get addressMode(){return this.addressModeU}set wrapMode(t){Rt($t,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=t}get wrapMode(){return this.addressMode}set scaleMode(t){this.magFilter=t,this.minFilter=t,this.mipmapFilter=t}get scaleMode(){return this.magFilter}set maxAnisotropy(t){this._maxAnisotropy=Math.min(t,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const t=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=H1(t),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};Af.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let Y1=Af;const Tf=class Mf extends rn{constructor(t={}){super(),this.options=t,this.uid=qt("textureSource"),this._resourceType="textureSource",this._resourceId=qt("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,t={...Mf.defaultOptions,...t},this.label=t.label??"",this.resource=t.resource,this.autoGarbageCollect=t.autoGarbageCollect,this._resolution=t.resolution,t.width?this.pixelWidth=t.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,t.height?this.pixelHeight=t.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=t.format,this.dimension=t.dimensions,this.mipLevelCount=t.mipLevelCount,this.autoGenerateMipmaps=t.autoGenerateMipmaps,this.sampleCount=t.sampleCount,this.antialias=t.antialias,this.alphaMode=t.alphaMode,this.style=new Y1(Cf(t)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(t){var e,i;this.style!==t&&((e=this._style)==null||e.off("change",this._onStyleChange,this),this._style=t,(i=this._style)==null||i.on("change",this._onStyleChange,this),this._onStyleChange())}get addressMode(){return this._style.addressMode}set addressMode(t){this._style.addressMode=t}get repeatMode(){return this._style.addressMode}set repeatMode(t){this._style.addressMode=t}get magFilter(){return this._style.magFilter}set magFilter(t){this._style.magFilter=t}get minFilter(){return this._style.minFilter}set minFilter(t){this._style.minFilter=t}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(t){this._style.mipmapFilter=t}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(t){this._style.lodMinClamp=t}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(t){this._style.lodMaxClamp=t}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const t=this._resolution;if(this.resize(this.resourceWidth/t,this.resourceHeight/t))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=qt("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:t}=this;return t.naturalWidth||t.videoWidth||t.displayWidth||t.width}get resourceHeight(){const{resource:t}=this;return t.naturalHeight||t.videoHeight||t.displayHeight||t.height}get resolution(){return this._resolution}set resolution(t){this._resolution!==t&&(this._resolution=t,this.width=this.pixelWidth/t,this.height=this.pixelHeight/t)}resize(t,e,i){i||(i=this._resolution),t||(t=this.width),e||(e=this.height);const o=Math.round(t*i),a=Math.round(e*i);return this.width=o/i,this.height=a/i,this._resolution=i,this.pixelWidth===o&&this.pixelHeight===a?!1:(this._refreshPOT(),this.pixelWidth=o,this.pixelHeight=a,this.emit("resize",this),this._resourceId=qt("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(t){this._style.wrapMode=t}get wrapMode(){return this._style.wrapMode}set scaleMode(t){this._style.scaleMode=t}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=ju(this.pixelWidth)&&ju(this.pixelHeight)}static test(t){throw new Error("Unimplemented")}};Tf.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let sn=Tf;class Za extends sn{constructor(t){const e=t.resource||new Float32Array(t.width*t.height*4);let i=t.format;i||(e instanceof Float32Array?i="rgba32float":e instanceof Int32Array||e instanceof Uint32Array?i="rgba32uint":e instanceof Int16Array||e instanceof Uint16Array?i="rgba16uint":(e instanceof Int8Array,i="bgra8unorm")),super({...t,resource:e,format:i}),this.uploadMethodId="buffer"}static test(t){return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}Za.extension=Mt.TextureSource;const Ju=new bt;class X1{constructor(t,e){this.mapCoord=new bt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof e>"u"?this.clampMargin=t.width<10?0:.5:this.clampMargin=e,this.isSimple=!1,this.texture=t}get texture(){return this._texture}set texture(t){var e;this.texture!==t&&((e=this._texture)==null||e.removeListener("update",this.update,this),this._texture=t,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(t,e){e===void 0&&(e=t);const i=this.mapCoord;for(let o=0;o<t.length;o+=2){const a=t[o],l=t[o+1];e[o]=a*i.a+l*i.c+i.tx,e[o+1]=a*i.b+l*i.d+i.ty}return e}update(){const t=this._texture;this._updateID++;const e=t.uvs;this.mapCoord.set(e.x1-e.x0,e.y1-e.y0,e.x3-e.x0,e.y3-e.y0,e.x0,e.y0);const i=t.orig,o=t.trim;o&&(Ju.set(i.width/o.width,0,0,i.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(Ju));const a=t.source,l=this.uClampFrame,u=this.clampMargin/a._resolution,f=this.clampOffset/a._resolution;return l[0]=(t.frame.x+u+f)/a.width,l[1]=(t.frame.y+u+f)/a.height,l[2]=(t.frame.x+t.frame.width-u+f)/a.width,l[3]=(t.frame.y+t.frame.height-u+f)/a.height,this.uClampOffset[0]=this.clampOffset/a.pixelWidth,this.uClampOffset[1]=this.clampOffset/a.pixelHeight,this.isSimple=t.frame.width===a.width&&t.frame.height===a.height&&t.rotate===0,!0}}class kt extends rn{constructor({source:t,label:e,frame:i,orig:o,trim:a,defaultAnchor:l,defaultBorders:u,rotate:f,dynamic:d}={}){if(super(),this.uid=qt("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new ee,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=e,this.source=(t==null?void 0:t.source)??new sn,this.noFrame=!i,i)this.frame.copyFrom(i);else{const{width:p,height:_}=this._source;this.frame.width=p,this.frame.height=_}this.orig=o||this.frame,this.trim=a,this.rotate=f??0,this.defaultAnchor=l,this.defaultBorders=u,this.destroyed=!1,this.dynamic=d||!1,this.updateUvs()}set source(t){this._source&&this._source.off("resize",this.update,this),this._source=t,t.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new X1(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:t,frame:e}=this,{width:i,height:o}=this._source,a=e.x/i,l=e.y/o,u=e.width/i,f=e.height/o;let d=this.rotate;if(d){const p=u/2,_=f/2,v=a+p,m=l+_;d=Dt.add(d,Dt.NW),t.x0=v+p*Dt.uX(d),t.y0=m+_*Dt.uY(d),d=Dt.add(d,2),t.x1=v+p*Dt.uX(d),t.y1=m+_*Dt.uY(d),d=Dt.add(d,2),t.x2=v+p*Dt.uX(d),t.y2=m+_*Dt.uY(d),d=Dt.add(d,2),t.x3=v+p*Dt.uX(d),t.y3=m+_*Dt.uY(d)}else t.x0=a,t.y0=l,t.x1=a+u,t.y1=l,t.x2=a+u,t.y2=l+f,t.x3=a,t.y3=l+f}destroy(t=!1){this._source&&t&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return Rt($t,"Texture.baseTexture is now Texture.source"),this._source}}kt.EMPTY=new kt({label:"EMPTY",source:new sn({label:"EMPTY"})});kt.EMPTY.destroy=Sf;kt.WHITE=new kt({source:new Za({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});kt.WHITE.destroy=Sf;function V1(n,t,e){const{width:i,height:o}=e.orig,a=e.trim;if(a){const l=a.width,u=a.height;n.minX=a.x-t._x*i,n.maxX=n.minX+l,n.minY=a.y-t._y*o,n.maxY=n.minY+u}else n.minX=-t._x*i,n.maxX=n.minX+i,n.minY=-t._y*o,n.maxY=n.minY+o}const tc=new bt;class qe{constructor(t=1/0,e=1/0,i=-1/0,o=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=tc,this.minX=t,this.minY=e,this.maxX=i,this.maxY=o}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new ee);const t=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(t.x=0,t.y=0,t.width=0,t.height=0):t.copyFromBounds(this),t}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=tc,this}set(t,e,i,o){this.minX=t,this.minY=e,this.maxX=i,this.maxY=o}addFrame(t,e,i,o,a){a||(a=this.matrix);const l=a.a,u=a.b,f=a.c,d=a.d,p=a.tx,_=a.ty;let v=this.minX,m=this.minY,C=this.maxX,M=this.maxY,w=l*t+f*e+p,T=u*t+d*e+_;w<v&&(v=w),T<m&&(m=T),w>C&&(C=w),T>M&&(M=T),w=l*i+f*e+p,T=u*i+d*e+_,w<v&&(v=w),T<m&&(m=T),w>C&&(C=w),T>M&&(M=T),w=l*t+f*o+p,T=u*t+d*o+_,w<v&&(v=w),T<m&&(m=T),w>C&&(C=w),T>M&&(M=T),w=l*i+f*o+p,T=u*i+d*o+_,w<v&&(v=w),T<m&&(m=T),w>C&&(C=w),T>M&&(M=T),this.minX=v,this.minY=m,this.maxX=C,this.maxY=M}addRect(t,e){this.addFrame(t.x,t.y,t.x+t.width,t.y+t.height,e)}addBounds(t,e){this.addFrame(t.minX,t.minY,t.maxX,t.maxY,e)}addBoundsMask(t){this.minX=this.minX>t.minX?this.minX:t.minX,this.minY=this.minY>t.minY?this.minY:t.minY,this.maxX=this.maxX<t.maxX?this.maxX:t.maxX,this.maxY=this.maxY<t.maxY?this.maxY:t.maxY}applyMatrix(t){const e=this.minX,i=this.minY,o=this.maxX,a=this.maxY,{a:l,b:u,c:f,d,tx:p,ty:_}=t;let v=l*e+f*i+p,m=u*e+d*i+_;this.minX=v,this.minY=m,this.maxX=v,this.maxY=m,v=l*o+f*i+p,m=u*o+d*i+_,this.minX=v<this.minX?v:this.minX,this.minY=m<this.minY?m:this.minY,this.maxX=v>this.maxX?v:this.maxX,this.maxY=m>this.maxY?m:this.maxY,v=l*e+f*a+p,m=u*e+d*a+_,this.minX=v<this.minX?v:this.minX,this.minY=m<this.minY?m:this.minY,this.maxX=v>this.maxX?v:this.maxX,this.maxY=m>this.maxY?m:this.maxY,v=l*o+f*a+p,m=u*o+d*a+_,this.minX=v<this.minX?v:this.minX,this.minY=m<this.minY?m:this.minY,this.maxX=v>this.maxX?v:this.maxX,this.maxY=m>this.maxY?m:this.maxY}fit(t){return this.minX<t.left&&(this.minX=t.left),this.maxX>t.right&&(this.maxX=t.right),this.minY<t.top&&(this.minY=t.top),this.maxY>t.bottom&&(this.maxY=t.bottom),this}fitBounds(t,e,i,o){return this.minX<t&&(this.minX=t),this.maxX>e&&(this.maxX=e),this.minY<i&&(this.minY=i),this.maxY>o&&(this.maxY=o),this}pad(t,e=t){return this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new qe(this.minX,this.minY,this.maxX,this.maxY)}scale(t,e=t){return this.minX*=t,this.minY*=e,this.maxX*=t,this.maxY*=e,this}get x(){return this.minX}set x(t){const e=this.maxX-this.minX;this.minX=t,this.maxX=t+e}get y(){return this.minY}set y(t){const e=this.maxY-this.minY;this.minY=t,this.maxY=t+e}get width(){return this.maxX-this.minX}set width(t){this.maxX=this.minX+t}get height(){return this.maxY-this.minY}set height(t){this.maxY=this.minY+t}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(t,e,i,o){let a=this.minX,l=this.minY,u=this.maxX,f=this.maxY;o||(o=this.matrix);const d=o.a,p=o.b,_=o.c,v=o.d,m=o.tx,C=o.ty;for(let M=e;M<i;M+=2){const w=t[M],T=t[M+1],R=d*w+_*T+m,F=p*w+v*T+C;a=R<a?R:a,l=F<l?F:l,u=R>u?R:u,f=F>f?F:f}this.minX=a,this.minY=l,this.maxX=u,this.maxY=f}containsPoint(t,e){return this.minX<=t&&this.minY<=e&&this.maxX>=t&&this.maxY>=e}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(t){return this.minX=t.minX,this.minY=t.minY,this.maxX=t.maxX,this.maxY=t.maxY,this}}var q1={grad:.9,turn:360,rad:360/(2*Math.PI)},_n=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},te=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=Math.pow(10,t)),Math.round(e*n)/e+0},Oe=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),n>e?e:n>t?n:t},If=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},ec=function(n){return{r:Oe(n.r,0,255),g:Oe(n.g,0,255),b:Oe(n.b,0,255),a:Oe(n.a)}},jo=function(n){return{r:te(n.r),g:te(n.g),b:te(n.b),a:te(n.a,3)}},K1=/^#([0-9a-f]{3,8})$/i,Qi=function(n){var t=n.toString(16);return t.length<2?"0"+t:t},Ef=function(n){var t=n.r,e=n.g,i=n.b,o=n.a,a=Math.max(t,e,i),l=a-Math.min(t,e,i),u=l?a===t?(e-i)/l:a===e?2+(i-t)/l:4+(t-e)/l:0;return{h:60*(u<0?u+6:u),s:a?l/a*100:0,v:a/255*100,a:o}},Rf=function(n){var t=n.h,e=n.s,i=n.v,o=n.a;t=t/360*6,e/=100,i/=100;var a=Math.floor(t),l=i*(1-e),u=i*(1-(t-a)*e),f=i*(1-(1-t+a)*e),d=a%6;return{r:255*[i,u,l,l,f,i][d],g:255*[f,i,i,u,l,l][d],b:255*[l,l,f,i,i,u][d],a:o}},nc=function(n){return{h:If(n.h),s:Oe(n.s,0,100),l:Oe(n.l,0,100),a:Oe(n.a)}},rc=function(n){return{h:te(n.h),s:te(n.s),l:te(n.l),a:te(n.a,3)}},ic=function(n){return Rf((e=(t=n).s,{h:t.h,s:(e*=((i=t.l)<50?i:100-i)/100)>0?2*e/(i+e)*100:0,v:i+e,a:t.a}));var t,e,i},Xr=function(n){return{h:(t=Ef(n)).h,s:(o=(200-(e=t.s))*(i=t.v)/100)>0&&o<200?e*i/100/(o<=100?o:200-o)*100:0,l:o/2,a:t.a};var t,e,i,o},Z1=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,j1=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Q1=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,J1=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ta={string:[[function(n){var t=K1.exec(n);return t?(n=t[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?te(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?te(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var t=Q1.exec(n)||J1.exec(n);return t?t[2]!==t[4]||t[4]!==t[6]?null:ec({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(n){var t=Z1.exec(n)||j1.exec(n);if(!t)return null;var e,i,o=nc({h:(e=t[1],i=t[2],i===void 0&&(i="deg"),Number(e)*(q1[i]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return ic(o)},"hsl"]],object:[[function(n){var t=n.r,e=n.g,i=n.b,o=n.a,a=o===void 0?1:o;return _n(t)&&_n(e)&&_n(i)?ec({r:Number(t),g:Number(e),b:Number(i),a:Number(a)}):null},"rgb"],[function(n){var t=n.h,e=n.s,i=n.l,o=n.a,a=o===void 0?1:o;if(!_n(t)||!_n(e)||!_n(i))return null;var l=nc({h:Number(t),s:Number(e),l:Number(i),a:Number(a)});return ic(l)},"hsl"],[function(n){var t=n.h,e=n.s,i=n.v,o=n.a,a=o===void 0?1:o;if(!_n(t)||!_n(e)||!_n(i))return null;var l=function(u){return{h:If(u.h),s:Oe(u.s,0,100),v:Oe(u.v,0,100),a:Oe(u.a)}}({h:Number(t),s:Number(e),v:Number(i),a:Number(a)});return Rf(l)},"hsv"]]},sc=function(n,t){for(var e=0;e<t.length;e++){var i=t[e][0](n);if(i)return[i,t[e][1]]}return[null,void 0]},tv=function(n){return typeof n=="string"?sc(n.trim(),Ta.string):typeof n=="object"&&n!==null?sc(n,Ta.object):[null,void 0]},Qo=function(n,t){var e=Xr(n);return{h:e.h,s:Oe(e.s+100*t,0,100),l:e.l,a:e.a}},Jo=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},oc=function(n,t){var e=Xr(n);return{h:e.h,s:e.s,l:Oe(e.l+100*t,0,100),a:e.a}},Ma=function(){function n(t){this.parsed=tv(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return te(Jo(this.rgba),2)},n.prototype.isDark=function(){return Jo(this.rgba)<.5},n.prototype.isLight=function(){return Jo(this.rgba)>=.5},n.prototype.toHex=function(){return t=jo(this.rgba),e=t.r,i=t.g,o=t.b,l=(a=t.a)<1?Qi(te(255*a)):"","#"+Qi(e)+Qi(i)+Qi(o)+l;var t,e,i,o,a,l},n.prototype.toRgb=function(){return jo(this.rgba)},n.prototype.toRgbString=function(){return t=jo(this.rgba),e=t.r,i=t.g,o=t.b,(a=t.a)<1?"rgba("+e+", "+i+", "+o+", "+a+")":"rgb("+e+", "+i+", "+o+")";var t,e,i,o,a},n.prototype.toHsl=function(){return rc(Xr(this.rgba))},n.prototype.toHslString=function(){return t=rc(Xr(this.rgba)),e=t.h,i=t.s,o=t.l,(a=t.a)<1?"hsla("+e+", "+i+"%, "+o+"%, "+a+")":"hsl("+e+", "+i+"%, "+o+"%)";var t,e,i,o,a},n.prototype.toHsv=function(){return t=Ef(this.rgba),{h:te(t.h),s:te(t.s),v:te(t.v),a:te(t.a,3)};var t},n.prototype.invert=function(){return tn({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},n.prototype.saturate=function(t){return t===void 0&&(t=.1),tn(Qo(this.rgba,t))},n.prototype.desaturate=function(t){return t===void 0&&(t=.1),tn(Qo(this.rgba,-t))},n.prototype.grayscale=function(){return tn(Qo(this.rgba,-1))},n.prototype.lighten=function(t){return t===void 0&&(t=.1),tn(oc(this.rgba,t))},n.prototype.darken=function(t){return t===void 0&&(t=.1),tn(oc(this.rgba,-t))},n.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},n.prototype.alpha=function(t){return typeof t=="number"?tn({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):te(this.rgba.a,3);var e},n.prototype.hue=function(t){var e=Xr(this.rgba);return typeof t=="number"?tn({h:t,s:e.s,l:e.l,a:e.a}):te(e.h)},n.prototype.isEqual=function(t){return this.toHex()===tn(t).toHex()},n}(),tn=function(n){return n instanceof Ma?n:new Ma(n)},ac=[],ev=function(n){n.forEach(function(t){ac.indexOf(t)<0&&(t(Ma,Ta),ac.push(t))})};function nv(n,t){var e={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var o in e)i[e[o]]=o;var a={};n.prototype.toName=function(l){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var u,f,d=i[this.toHex()];if(d)return d;if(l!=null&&l.closest){var p=this.toRgb(),_=1/0,v="black";if(!a.length)for(var m in e)a[m]=new n(e[m]).toRgb();for(var C in e){var M=(u=p,f=a[C],Math.pow(u.r-f.r,2)+Math.pow(u.g-f.g,2)+Math.pow(u.b-f.b,2));M<_&&(_=M,v=C)}return v}},t.string.push([function(l){var u=l.toLowerCase(),f=u==="transparent"?"#0000":e[u];return f?new n(f).toRgb():null},"name"])}ev([nv]);const gr=class Nr{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof Nr)this._value=this._cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,t))&&(this._value=this._cloneSource(t),this._normalize(this._value))}}get value(){return this._value}_cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}_isSourceEqual(t,e){const i=typeof t;if(i!==typeof e)return!1;if(i==="number"||i==="string"||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length!==e.length?!1:t.every((a,l)=>a===e[l]);if(t!==null&&e!==null){const a=Object.keys(t),l=Object.keys(e);return a.length!==l.length?!1:a.every(u=>t[u]===e[u])}return t===e}toRgba(){const[t,e,i,o]=this._components;return{r:t,g:e,b:i,a:o}}toRgb(){const[t,e,i]=this._components;return{r:t,g:e,b:i}}toRgbaString(){const[t,e,i]=this.toUint8RgbArray();return`rgba(${t},${e},${i},${this.alpha})`}toUint8RgbArray(t){const[e,i,o]=this._components;return this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb),t[0]=Math.round(e*255),t[1]=Math.round(i*255),t[2]=Math.round(o*255),t}toArray(t){this._arrayRgba||(this._arrayRgba=[]),t||(t=this._arrayRgba);const[e,i,o,a]=this._components;return t[0]=e,t[1]=i,t[2]=o,t[3]=a,t}toRgbArray(t){this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb);const[e,i,o]=this._components;return t[0]=e,t[1]=i,t[2]=o,t}toNumber(){return this._int}toBgrNumber(){const[t,e,i]=this.toUint8RgbArray();return(i<<16)+(e<<8)+t}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[e,i,o,a]=Nr._temp.setValue(t)._components;return this._components[0]*=e,this._components[1]*=i,this._components[2]*=o,this._components[3]*=a,this._refreshInt(),this._value=null,this}premultiply(t,e=!0){return e&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this._refreshInt(),this._value=null,this}toPremultiplied(t,e=!0){if(t===1)return(255<<24)+this._int;if(t===0)return e?0:this._int;let i=this._int>>16&255,o=this._int>>8&255,a=this._int&255;return e&&(i=i*t+.5|0,o=o*t+.5|0,a=a*t+.5|0),(t*255<<24)+(i<<16)+(o<<8)+a}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(t){return this._components[3]=this._clamp(t),this}_normalize(t){let e,i,o,a;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const l=t;e=(l>>16&255)/255,i=(l>>8&255)/255,o=(l&255)/255,a=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[e,i,o,a=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[e,i,o,a=255]=t,e/=255,i/=255,o/=255,a/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const u=Nr.HEX_PATTERN.exec(t);u&&(t=`#${u[2]}`)}const l=tn(t);l.isValid()&&({r:e,g:i,b:o,a}=l.rgba,e/=255,i/=255,o/=255)}if(e!==void 0)this._components[0]=e,this._components[1]=i,this._components[2]=o,this._components[3]=a,this._refreshInt();else throw new Error(`Unable to convert color ${t}`)}_refreshInt(){this._clamp(this._components);const[t,e,i]=this._components;this._int=(t*255<<16)+(e*255<<8)+(i*255|0)}_clamp(t,e=0,i=1){return typeof t=="number"?Math.min(Math.max(t,e),i):(t.forEach((o,a)=>{t[a]=Math.min(Math.max(o,e),i)}),t)}static isColorLike(t){return typeof t=="number"||typeof t=="string"||t instanceof Number||t instanceof Nr||Array.isArray(t)||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t.r!==void 0&&t.g!==void 0&&t.b!==void 0||t.r!==void 0&&t.g!==void 0&&t.b!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0&&t.a!==void 0}};gr.shared=new gr;gr._temp=new gr;gr.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let ae=gr;const rv={cullArea:null,cullable:!1,cullableChildren:!0};class ja{constructor(t,e){this._pool=[],this._count=0,this._index=0,this._classType=t,e&&this.prepopulate(e)}prepopulate(t){for(let e=0;e<t;e++)this._pool[this._index++]=new this._classType;this._count+=t}get(t){var i;let e;return this._index>0?e=this._pool[--this._index]:e=new this._classType,(i=e.init)==null||i.call(e,t),e}return(t){var e;(e=t.reset)==null||e.call(t),this._pool[this._index++]=t}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){this._pool.length=0,this._index=0}}class iv{constructor(){this._poolsByClass=new Map}prepopulate(t,e){this.getPool(t).prepopulate(e)}get(t,e){return this.getPool(t).get(e)}return(t){this.getPool(t.constructor).return(t)}getPool(t){return this._poolsByClass.has(t)||this._poolsByClass.set(t,new ja(t)),this._poolsByClass.get(t)}stats(){const t={};return this._poolsByClass.forEach(e=>{const i=t[e._classType.name]?e._classType.name+e._classType.ID:e._classType.name;t[i]={free:e.totalFree,used:e.totalUsed,size:e.totalSize}}),t}}const mn=new iv,sv={get isCachedAsTexture(){var n;return!!((n=this.renderGroup)!=null&&n.isCachedAsTexture)},cacheAsTexture(n){typeof n=="boolean"&&n===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(n===!0?{}:n))},updateCacheTexture(){var n;(n=this.renderGroup)==null||n.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(n){Rt("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(n)}};function ov(n,t,e){const i=n.length;let o;if(t>=i||e===0)return;e=t+e>i?i-t:e;const a=i-e;for(o=t;o<a;++o)n[o]=n[o+e];n.length=a}const av={allowChildren:!0,removeChildren(n=0,t){const e=t??this.children.length,i=e-n,o=[];if(i>0&&i<=e){for(let l=e-1;l>=n;l--){const u=this.children[l];u&&(o.push(u),u.parent=null)}ov(this.children,n,e);const a=this.renderGroup||this.parentRenderGroup;a&&a.removeChildren(o);for(let l=0;l<o.length;++l)this.emit("childRemoved",o[l],this,l),o[l].emit("removed",this);return o.length>0&&this._didViewChangeTick++,o}else if(i===0&&this.children.length===0)return o;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(n){const t=this.getChildAt(n);return this.removeChild(t)},getChildAt(n){if(n<0||n>=this.children.length)throw new Error(`getChildAt: Index (${n}) does not exist.`);return this.children[n]},setChildIndex(n,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);this.getChildIndex(n),this.addChildAt(n,t)},getChildIndex(n){const t=this.children.indexOf(n);if(t===-1)throw new Error("The supplied Container must be a child of the caller");return t},addChildAt(n,t){this.allowChildren||Rt($t,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:e}=this;if(t<0||t>e.length)throw new Error(`${n}addChildAt: The index ${t} supplied is out of bounds ${e.length}`);if(n.parent){const o=n.parent.children.indexOf(n);if(n.parent===this&&o===t)return n;o!==-1&&n.parent.children.splice(o,1)}t===e.length?e.push(n):e.splice(t,0,n),n.parent=this,n.didChange=!0,n._updateFlags=15;const i=this.renderGroup||this.parentRenderGroup;return i&&i.addChild(n),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",n,this,t),n.emit("added",this),n},swapChildren(n,t){if(n===t)return;const e=this.getChildIndex(n),i=this.getChildIndex(t);this.children[e]=t,this.children[i]=n;const o=this.renderGroup||this.parentRenderGroup;o&&(o.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){var n;(n=this.parent)==null||n.removeChild(this)},reparentChild(...n){return n.length===1?this.reparentChildAt(n[0],this.children.length):(n.forEach(t=>this.reparentChildAt(t,this.children.length)),n[0])},reparentChildAt(n,t){if(n.parent===this)return this.setChildIndex(n,t),n;const e=n.worldTransform.clone();n.removeFromParent(),this.addChildAt(n,t);const i=this.worldTransform.clone();return i.invert(),e.prepend(i),n.setFromMatrix(e),n}},hv={collectRenderables(n,t,e){this.parentRenderLayer&&this.parentRenderLayer!==e||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(n,t,e):this.renderGroup?t.renderPipes.renderGroup.addRenderGroup(this.renderGroup,n):this.collectRenderablesWithEffects(n,t,e))},collectRenderablesSimple(n,t,e){const i=this.children,o=i.length;for(let a=0;a<o;a++)i[a].collectRenderables(n,t,e)},collectRenderablesWithEffects(n,t,e){const{renderPipes:i}=t;for(let o=0;o<this.effects.length;o++){const a=this.effects[o];i[a.pipe].push(a,this,n)}this.collectRenderablesSimple(n,t,e);for(let o=this.effects.length-1;o>=0;o--){const a=this.effects[o];i[a.pipe].pop(a,this,n)}}};class hc{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let t=0;t<this.filters.length;t++)this.filters[t].destroy();this.filters=null,this.filterArea=null}}class lv{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(t=>{this.add({test:t.test,maskClass:t})}))}add(t){this._tests.push(t)}getMaskEffect(t){this._initialized||this.init();for(let e=0;e<this._tests.length;e++){const i=this._tests[e];if(i.test(t))return mn.get(i.maskClass,t)}return t}returnMaskEffect(t){mn.return(t)}}const Ia=new lv;De.handleByList(Mt.MaskEffect,Ia._effectClasses);const uv={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const n=this.renderGroup||this.parentRenderGroup;n&&(n.structureDidChange=!0)},addEffect(n){this.effects.indexOf(n)===-1&&(this.effects.push(n),this.effects.sort((e,i)=>e.priority-i.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(n){const t=this.effects.indexOf(n);t!==-1&&(this.effects.splice(t,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(n){const t=this._maskEffect;(t==null?void 0:t.mask)!==n&&(t&&(this.removeEffect(t),Ia.returnMaskEffect(t),this._maskEffect=null),n!=null&&(this._maskEffect=Ia.getMaskEffect(n),this.addEffect(this._maskEffect)))},setMask(n){this._maskOptions={...this._maskOptions,...n},n.mask&&(this.mask=n.mask),this._markStructureAsChanged()},get mask(){var n;return(n=this._maskEffect)==null?void 0:n.mask},set filters(n){var a;!Array.isArray(n)&&n&&(n=[n]);const t=this._filterEffect||(this._filterEffect=new hc);n=n;const e=(n==null?void 0:n.length)>0,i=((a=t.filters)==null?void 0:a.length)>0,o=e!==i;n=Array.isArray(n)?n.slice(0):n,t.filters=Object.freeze(n),o&&(e?this.addEffect(t):(this.removeEffect(t),t.filters=n??null))},get filters(){var n;return(n=this._filterEffect)==null?void 0:n.filters},set filterArea(n){this._filterEffect||(this._filterEffect=new hc),this._filterEffect.filterArea=n},get filterArea(){var n;return(n=this._filterEffect)==null?void 0:n.filterArea}},cv={label:null,get name(){return Rt($t,"Container.name property has been removed, use Container.label instead"),this.label},set name(n){Rt($t,"Container.name property has been removed, use Container.label instead"),this.label=n},getChildByName(n,t=!1){return this.getChildByLabel(n,t)},getChildByLabel(n,t=!1){const e=this.children;for(let i=0;i<e.length;i++){const o=e[i];if(o.label===n||n instanceof RegExp&&n.test(o.label))return o}if(t)for(let i=0;i<e.length;i++){const a=e[i].getChildByLabel(n,!0);if(a)return a}return null},getChildrenByLabel(n,t=!1,e=[]){const i=this.children;for(let o=0;o<i.length;o++){const a=i[o];(a.label===n||n instanceof RegExp&&n.test(a.label))&&e.push(a)}if(t)for(let o=0;o<i.length;o++)i[o].getChildrenByLabel(n,!0,e);return e}},ce=new ja(bt),xn=new ja(qe),fv=new bt,dv={getFastGlobalBounds(n,t){t||(t=new qe),t.clear(),this._getGlobalBoundsRecursive(!!n,t,this.parentRenderLayer),t.isValid||t.set(0,0,0,0);const e=this.renderGroup||this.parentRenderGroup;return t.applyMatrix(e.worldTransform),t},_getGlobalBoundsRecursive(n,t,e){let i=t;if(n&&this.parentRenderLayer&&this.parentRenderLayer!==e||this.localDisplayStatus!==7||!this.measurable)return;const o=!!this.effects.length;if((this.renderGroup||o)&&(i=xn.get().clear()),this.boundsArea)t.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const l=this.bounds;i.addFrame(l.minX,l.minY,l.maxX,l.maxY,this.groupTransform)}const a=this.children;for(let l=0;l<a.length;l++)a[l]._getGlobalBoundsRecursive(n,i,e)}if(o){let a=!1;const l=this.renderGroup||this.parentRenderGroup;for(let u=0;u<this.effects.length;u++)this.effects[u].addBounds&&(a||(a=!0,i.applyMatrix(l.worldTransform)),this.effects[u].addBounds(i,!0));a&&(i.applyMatrix(l.worldTransform.copyTo(fv).invert()),t.addBounds(i,this.relativeGroupTransform)),t.addBounds(i),xn.return(i)}else this.renderGroup&&(t.addBounds(i,this.relativeGroupTransform),xn.return(i))}};function kf(n,t,e){e.clear();let i,o;return n.parent?t?i=n.parent.worldTransform:(o=ce.get().identity(),i=Qa(n,o)):i=bt.IDENTITY,Ff(n,e,i,t),o&&ce.return(o),e.isValid||e.set(0,0,0,0),e}function Ff(n,t,e,i){var u,f;if(!n.visible||!n.measurable)return;let o;i?o=n.worldTransform:(n.updateLocalTransform(),o=ce.get(),o.appendFrom(n.localTransform,e));const a=t,l=!!n.effects.length;if(l&&(t=xn.get().clear()),n.boundsArea)t.addRect(n.boundsArea,o);else{n.bounds&&(t.matrix=o,t.addBounds(n.bounds));for(let d=0;d<n.children.length;d++)Ff(n.children[d],t,o,i)}if(l){for(let d=0;d<n.effects.length;d++)(f=(u=n.effects[d]).addBounds)==null||f.call(u,t);a.addBounds(t,bt.IDENTITY),xn.return(t)}i||ce.return(o)}function Qa(n,t){const e=n.parent;return e&&(Qa(e,t),e.updateLocalTransform(),t.append(e.localTransform)),t}function Bf(n,t){if(n===16777215||!t)return t;if(t===16777215||!n)return n;const e=n>>16&255,i=n>>8&255,o=n&255,a=t>>16&255,l=t>>8&255,u=t&255,f=e*a/255|0,d=i*l/255|0,p=o*u/255|0;return(f<<16)+(d<<8)+p}const lc=16777215;function uc(n,t){return n===lc?t:t===lc?n:Bf(n,t)}function us(n){return((n&255)<<16)+(n&65280)+(n>>16&255)}const pv={getGlobalAlpha(n){if(n)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let t=this.alpha,e=this.parent;for(;e;)t*=e.alpha,e=e.parent;return t},getGlobalTransform(n,t){if(t)return n.copyFrom(this.worldTransform);this.updateLocalTransform();const e=Qa(this,ce.get().identity());return n.appendFrom(this.localTransform,e),ce.return(e),n},getGlobalTint(n){if(n)return this.renderGroup?us(this.renderGroup.worldColor):this.parentRenderGroup?us(uc(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let t=this.localColor,e=this.parent;for(;e;)t=uc(t,e.localColor),e=e.parent;return us(t)}};let ta=0;const cc=500;function Te(...n){ta!==cc&&(ta++,ta===cc?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...n))}function Lf(n,t,e){return t.clear(),e||(e=bt.IDENTITY),Gf(n,t,e,n,!0),t.isValid||t.set(0,0,0,0),t}function Gf(n,t,e,i,o){var f,d;let a;if(o)a=ce.get(),a=e.copyTo(a);else{if(!n.visible||!n.measurable)return;n.updateLocalTransform();const p=n.localTransform;a=ce.get(),a.appendFrom(p,e)}const l=t,u=!!n.effects.length;if(u&&(t=xn.get().clear()),n.boundsArea)t.addRect(n.boundsArea,a);else{n.renderPipeId&&(t.matrix=a,t.addBounds(n.bounds));const p=n.children;for(let _=0;_<p.length;_++)Gf(p[_],t,a,i,!1)}if(u){for(let p=0;p<n.effects.length;p++)(d=(f=n.effects[p]).addLocalBounds)==null||d.call(f,t,i);l.addBounds(t,bt.IDENTITY),xn.return(t)}ce.return(a)}function Of(n,t){const e=n.children;for(let i=0;i<e.length;i++){const o=e[i],a=o.uid,l=(o._didViewChangeTick&65535)<<16|o._didContainerChangeTick&65535,u=t.index;(t.data[u]!==a||t.data[u+1]!==l)&&(t.data[t.index]=a,t.data[t.index+1]=l,t.didChange=!0),t.index=u+2,o.children.length&&Of(o,t)}return t.didChange}const _v=new bt,gv={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(n,t){const e=Math.sign(this.scale.x)||1;t!==0?this.scale.x=n/t*e:this.scale.x=e},_setHeight(n,t){const e=Math.sign(this.scale.y)||1;t!==0?this.scale.y=n/t*e:this.scale.y=e},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new qe});const n=this._localBoundsCacheData;return n.index=1,n.didChange=!1,n.data[0]!==this._didViewChangeTick&&(n.didChange=!0,n.data[0]=this._didViewChangeTick),Of(this,n),n.didChange&&Lf(this,n.localBounds,_v),n.localBounds},getBounds(n,t){return kf(this,n,t||new qe)}},mv={_onRender:null,set onRender(n){const t=this.renderGroup||this.parentRenderGroup;if(!n){this._onRender&&(t==null||t.removeOnRender(this)),this._onRender=null;return}this._onRender||t==null||t.addOnRender(this),this._onRender=n},get onRender(){return this._onRender}},xv={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(n){this._zIndex!==n&&(this._zIndex=n,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(yv))}};function yv(n,t){return n._zIndex-t._zIndex}const vv={getGlobalPosition(n=new oe,t=!1){return this.parent?this.parent.toGlobal(this._position,n,t):(n.x=this._position.x,n.y=this._position.y),n},toGlobal(n,t,e=!1){const i=this.getGlobalTransform(ce.get(),e);return t=i.apply(n,t),ce.return(i),t},toLocal(n,t,e,i){t&&(n=t.toGlobal(n,e,i));const o=this.getGlobalTransform(ce.get(),i);return e=o.applyInverse(n,e),ce.return(o),e}};class Df{constructor(){this.uid=qt("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}add(t){this.instructions[this.instructionSize++]=t}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let bv=0;class wv{constructor(t){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1}createTexture(t,e,i){const o=new sn({...this.textureOptions,width:t,height:e,resolution:1,antialias:i,autoGarbageCollect:!1});return new kt({source:o,label:`texturePool_${bv++}`})}getOptimalTexture(t,e,i=1,o){let a=Math.ceil(t*i-1e-6),l=Math.ceil(e*i-1e-6);a=Zu(a),l=Zu(l);const u=(a<<17)+(l<<1)+(o?1:0);this._texturePool[u]||(this._texturePool[u]=[]);let f=this._texturePool[u].pop();return f||(f=this.createTexture(a,l,o)),f.source._resolution=i,f.source.width=a/i,f.source.height=l/i,f.source.pixelWidth=a,f.source.pixelHeight=l,f.frame.x=0,f.frame.y=0,f.frame.width=t,f.frame.height=e,f.updateUvs(),this._poolKeyHash[f.uid]=u,f}getSameSizeTexture(t,e=!1){const i=t.source;return this.getOptimalTexture(t.width,t.height,i._resolution,e)}returnTexture(t){const e=this._poolKeyHash[t.uid];this._texturePool[e].push(t)}clear(t){if(t=t!==!1,t)for(const e in this._texturePool){const i=this._texturePool[e];if(i)for(let o=0;o<i.length;o++)i[o].destroy(!0)}this._texturePool={}}}const Sv=new wv;class Cv{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new bt,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new Df,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(t){this.root=t,t._onRender&&this.addOnRender(t),t.didChange=!0;const e=t.children;for(let i=0;i<e.length;i++){const o=e[i];o._updateFlags=15,this.addChild(o)}}enableCacheAsTexture(t={}){this.textureOptions=t,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(Sv.returnTexture(this.texture),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0}reset(){this.renderGroupChildren.length=0;for(const t in this.childrenToUpdate){const e=this.childrenToUpdate[t];e.list.fill(null),e.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(t){t.renderGroupParent&&t.renderGroupParent._removeRenderGroupChild(t),t.renderGroupParent=this,this.renderGroupChildren.push(t)}_removeRenderGroupChild(t){const e=this.renderGroupChildren.indexOf(t);e>-1&&this.renderGroupChildren.splice(e,1),t.renderGroupParent=null}addChild(t){if(this.structureDidChange=!0,t.parentRenderGroup=this,t.updateTick=-1,t.parent===this.root?t.relativeRenderGroupDepth=1:t.relativeRenderGroupDepth=t.parent.relativeRenderGroupDepth+1,t.didChange=!0,this.onChildUpdate(t),t.renderGroup){this.addRenderGroupChild(t.renderGroup);return}t._onRender&&this.addOnRender(t);const e=t.children;for(let i=0;i<e.length;i++)this.addChild(e[i])}removeChild(t){if(this.structureDidChange=!0,t._onRender&&(t.renderGroup||this.removeOnRender(t)),t.parentRenderGroup=null,t.renderGroup){this._removeRenderGroupChild(t.renderGroup);return}const e=t.children;for(let i=0;i<e.length;i++)this.removeChild(e[i])}removeChildren(t){for(let e=0;e<t.length;e++)this.removeChild(t[e])}onChildUpdate(t){let e=this.childrenToUpdate[t.relativeRenderGroupDepth];e||(e=this.childrenToUpdate[t.relativeRenderGroupDepth]={index:0,list:[]}),e.list[e.index++]=t}updateRenderable(t){t.globalDisplayStatus<7||(this.instructionSet.renderPipes[t.renderPipeId].updateRenderable(t),t.didViewUpdate=!1)}onChildViewUpdate(t){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=t}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(t){this._onRenderContainers.push(t)}removeOnRender(t){this._onRenderContainers.splice(this._onRenderContainers.indexOf(t),1)}runOnRender(t){for(let e=0;e<this._onRenderContainers.length;e++)this._onRenderContainers[e]._onRender(t)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(t=[]){const e=this.root.children;for(let i=0;i<e.length;i++)this._getChildren(e[i],t);return t}_getChildren(t,e=[]){if(e.push(t),t.renderGroup)return e;const i=t.children;for(let o=0;o<i.length;o++)this._getChildren(i[o],e);return e}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new bt),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new bt),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const t=this._parentCacheAsTextureRenderGroup;return t?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new bt),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(t.inverseWorldTransform).translate(-t._textureBounds.x,-t._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function Av(n,t,e={}){for(const i in t)!e[i]&&t[i]!==void 0&&(n[i]=t[i])}const ea=new me(null),na=new me(null),ra=new me(null,1,1),fc=1,Pv=2,ia=4;class En extends rn{constructor(t={}){var e,i;super(),this.uid=qt("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new bt,this.relativeGroupTransform=new bt,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new me(this,0,0),this._scale=ra,this._pivot=na,this._skew=ea,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],Av(this,t,{children:!0,parent:!0,effects:!0}),(e=t.children)==null||e.forEach(o=>this.addChild(o)),(i=t.parent)==null||i.addChild(this)}static mixin(t){Rt("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),De.mixin(En,t)}set _didChangeId(t){this._didViewChangeTick=t>>12&4095,this._didContainerChangeTick=t&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...t){if(this.allowChildren||Rt($t,"addChild: Only Containers will be allowed to add children in v8.0.0"),t.length>1){for(let o=0;o<t.length;o++)this.addChild(t[o]);return t[0]}const e=t[0],i=this.renderGroup||this.parentRenderGroup;return e.parent===this?(this.children.splice(this.children.indexOf(e),1),this.children.push(e),i&&(i.structureDidChange=!0),e):(e.parent&&e.parent.removeChild(e),this.children.push(e),this.sortableChildren&&(this.sortDirty=!0),e.parent=this,e.didChange=!0,e._updateFlags=15,i&&i.addChild(e),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this),this._didViewChangeTick++,e._zIndex!==0&&e.depthOfChildModified(),e)}removeChild(...t){if(t.length>1){for(let o=0;o<t.length;o++)this.removeChild(t[o]);return t[0]}const e=t[0],i=this.children.indexOf(e);return i>-1&&(this._didViewChangeTick++,this.children.splice(i,1),this.renderGroup?this.renderGroup.removeChild(e):this.parentRenderGroup&&this.parentRenderGroup.removeChild(e),e.parentRenderLayer&&e.parentRenderLayer.detach(e),e.parent=null,this.emit("childRemoved",e,this,i),e.emit("removed",this)),e}_onUpdate(t){t&&t===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(t){!!this.renderGroup!==t&&(t?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const t=this.parentRenderGroup;t==null||t.removeChild(this),this.renderGroup=mn.get(Cv,this),this.groupTransform=bt.IDENTITY,t==null||t.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const t=this.parentRenderGroup;t==null||t.removeChild(this),mn.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,t==null||t.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new bt),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(t){this._position.x=t}get y(){return this._position.y}set y(t){this._position.y=t}get position(){return this._position}set position(t){this._position.copyFrom(t)}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this._onUpdate(this._skew))}get angle(){return this.rotation*D1}set angle(t){this.rotation=t*U1}get pivot(){return this._pivot===na&&(this._pivot=new me(this,0,0)),this._pivot}set pivot(t){this._pivot===na&&(this._pivot=new me(this,0,0)),typeof t=="number"?this._pivot.set(t):this._pivot.copyFrom(t)}get skew(){return this._skew===ea&&(this._skew=new me(this,0,0)),this._skew}set skew(t){this._skew===ea&&(this._skew=new me(this,0,0)),this._skew.copyFrom(t)}get scale(){return this._scale===ra&&(this._scale=new me(this,1,1)),this._scale}set scale(t){this._scale===ra&&(this._scale=new me(this,0,0)),typeof t=="number"?this._scale.set(t):this._scale.copyFrom(t)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(t){const e=this.getLocalBounds().width;this._setWidth(t,e)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(t){const e=this.getLocalBounds().height;this._setHeight(t,e)}getSize(t){t||(t={});const e=this.getLocalBounds();return t.width=Math.abs(this.scale.x*e.width),t.height=Math.abs(this.scale.y*e.height),t}setSize(t,e){const i=this.getLocalBounds();typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,i.width),e!==void 0&&this._setHeight(e,i.height)}_updateSkew(){const t=this._rotation,e=this._skew;this._cx=Math.cos(t+e._y),this._sx=Math.sin(t+e._y),this._cy=-Math.sin(t-e._x),this._sy=Math.cos(t-e._x)}updateTransform(t){return this.position.set(typeof t.x=="number"?t.x:this.position.x,typeof t.y=="number"?t.y:this.position.y),this.scale.set(typeof t.scaleX=="number"?t.scaleX||1:this.scale.x,typeof t.scaleY=="number"?t.scaleY||1:this.scale.y),this.rotation=typeof t.rotation=="number"?t.rotation:this.rotation,this.skew.set(typeof t.skewX=="number"?t.skewX:this.skew.x,typeof t.skewY=="number"?t.skewY:this.skew.y),this.pivot.set(typeof t.pivotX=="number"?t.pivotX:this.pivot.x,typeof t.pivotY=="number"?t.pivotY:this.pivot.y),this}setFromMatrix(t){t.decompose(this)}updateLocalTransform(){const t=this._didContainerChangeTick;if(this._didLocalTransformChangeId===t)return;this._didLocalTransformChangeId=t;const e=this.localTransform,i=this._scale,o=this._pivot,a=this._position,l=i._x,u=i._y,f=o._x,d=o._y;e.a=this._cx*l,e.b=this._sx*l,e.c=this._cy*u,e.d=this._sy*u,e.tx=a._x-(f*e.a+d*e.c),e.ty=a._y-(f*e.b+d*e.d)}set alpha(t){t!==this.localAlpha&&(this.localAlpha=t,this._updateFlags|=fc,this._onUpdate())}get alpha(){return this.localAlpha}set tint(t){const i=ae.shared.setValue(t??16777215).toBgrNumber();i!==this.localColor&&(this.localColor=i,this._updateFlags|=fc,this._onUpdate())}get tint(){return us(this.localColor)}set blendMode(t){this.localBlendMode!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Pv,this.localBlendMode=t,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(t){const e=t?2:0;(this.localDisplayStatus&2)!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=ia,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(t){const e=t?0:4;(this.localDisplayStatus&4)!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=ia,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(t){const e=t?1:0;(this.localDisplayStatus&1)!==e&&(this._updateFlags|=ia,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(t=!1){var o;if(this.destroyed)return;this.destroyed=!0;let e;if(this.children.length&&(e=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof t=="boolean"?t:t==null?void 0:t.children)&&e)for(let a=0;a<e.length;++a)e[a].destroy(t);(o=this.renderGroup)==null||o.destroy(),this.renderGroup=null}}De.mixin(En,av,dv,vv,mv,gv,uv,cv,xv,rv,sv,pv,hv);class Ja extends En{constructor(t){super(t),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._bounds=new qe(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}containsPoint(t){const e=this.bounds,{x:i,y:o}=t;return i>=e.minX&&i<=e.maxX&&o>=e.minY&&o<=e.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const t=this.renderGroup||this.parentRenderGroup;t&&t.onChildViewUpdate(this)}destroy(t){super.destroy(t),this._bounds=null}collectRenderablesSimple(t,e,i){const{renderPipes:o,renderableGC:a}=e;o.blendMode.setBlendMode(this,this.groupBlendMode,t),o[this.renderPipeId].addRenderable(this,t),a.addRenderable(this),this.didViewUpdate=!1;const u=this.children,f=u.length;for(let d=0;d<f;d++)u[d].collectRenderables(t,e,i)}}class Zr extends Ja{constructor(t=kt.EMPTY){t instanceof kt&&(t={texture:t});const{texture:e=kt.EMPTY,anchor:i,roundPixels:o,width:a,height:l,...u}=t;super({label:"Sprite",...u}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new me({_onUpdate:()=>{this.onViewUpdate()}}),i?this.anchor=i:e.defaultAnchor&&(this.anchor=e.defaultAnchor),this.texture=e,this.allowChildren=!1,this.roundPixels=o??!1,a!==void 0&&(this.width=a),l!==void 0&&(this.height=l)}static from(t,e=!1){return t instanceof kt?new Zr(t):new Zr(kt.from(t,e))}set texture(t){t||(t=kt.EMPTY);const e=this._texture;e!==t&&(e&&e.dynamic&&e.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this._texture=t,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return V1(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return Rt("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const t=this._anchor,e=this._texture,i=this._bounds,{width:o,height:a}=e.orig;i.minX=-t._x*o,i.maxX=i.minX+o,i.minY=-t._y*a,i.maxY=i.minY+a}destroy(t=!1){if(super.destroy(t),typeof t=="boolean"?t:t==null?void 0:t.texture){const i=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._texture.destroy(i)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this._setWidth(t,this._texture.orig.width),this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this._setHeight(t,this._texture.orig.height),this._height=t}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this._texture.orig.width,t.height=Math.abs(this.scale.y)*this._texture.orig.height,t}setSize(t,e){typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,this._texture.orig.width),e!==void 0&&this._setHeight(e,this._texture.orig.height)}}const Tv=new qe;function Uf(n,t,e){const i=Tv;n.measurable=!0,kf(n,e,i),t.addBoundsMask(i),n.measurable=!1}function Wf(n,t,e){const i=xn.get();n.measurable=!0;const o=ce.get().identity(),a=Nf(n,e,o);Lf(n,i,a),n.measurable=!1,t.addBoundsMask(i),ce.return(o),xn.return(i)}function Nf(n,t,e){return n?(n!==t&&(Nf(n.parent,t,e),n.updateLocalTransform(),e.append(n.localTransform)),e):(Te("Mask bounds, renderable is not inside the root container"),e)}class $f{constructor(t){this.priority=0,this.inverse=!1,this.pipe="alphaMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t,this.renderMaskToTexture=!(t instanceof Zr),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(t,e){this.inverse||Uf(this.mask,t,e)}addLocalBounds(t,e){Wf(this.mask,t,e)}containsPoint(t,e){const i=this.mask;return e(i,t)}destroy(){this.reset()}static test(t){return t instanceof Zr}}$f.extension=Mt.MaskEffect;class zf{constructor(t){this.priority=0,this.pipe="colorMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t}destroy(){}static test(t){return typeof t=="number"}}zf.extension=Mt.MaskEffect;class Hf{constructor(t){this.priority=0,this.pipe="stencilMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(t,e){Uf(this.mask,t,e)}addLocalBounds(t,e){Wf(this.mask,t,e)}containsPoint(t,e){const i=this.mask;return e(i,t)}destroy(){this.reset()}static test(t){return t instanceof En}}Hf.extension=Mt.MaskEffect;const Mv={createCanvas:(n,t)=>{const e=document.createElement("canvas");return e.width=n,e.height=t,e},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(n,t)=>fetch(n,t),parseXML:n=>new DOMParser().parseFromString(n,"text/xml")};let dc=Mv;const Ve={get(){return dc},set(n){dc=n}};class Yf extends sn{constructor(t){t.resource||(t.resource=Ve.get().createCanvas()),t.width||(t.width=t.resource.width,t.autoDensity||(t.width/=t.resolution)),t.height||(t.height=t.resource.height,t.autoDensity||(t.height/=t.resolution)),super(t),this.uploadMethodId="image",this.autoDensity=t.autoDensity,this.resizeCanvas(),this.transparent=!!t.transparent}resizeCanvas(){this.autoDensity&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(t=this.width,e=this.height,i=this._resolution){const o=super.resize(t,e,i);return o&&this.resizeCanvas(),o}static test(t){return globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&t instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}Yf.extension=Mt.TextureSource;class ms extends sn{constructor(t){if(t.resource&&globalThis.HTMLImageElement&&t.resource instanceof HTMLImageElement){const e=Ve.get().createCanvas(t.resource.width,t.resource.height);e.getContext("2d").drawImage(t.resource,0,0,t.resource.width,t.resource.height),t.resource=e,Te("ImageSource: Image element passed, converting to canvas. Use CanvasSource instead.")}super(t),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(t){return globalThis.HTMLImageElement&&t instanceof HTMLImageElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||globalThis.VideoFrame&&t instanceof VideoFrame}}ms.extension=Mt.TextureSource;var Ea=(n=>(n[n.INTERACTION=50]="INTERACTION",n[n.HIGH=25]="HIGH",n[n.NORMAL=0]="NORMAL",n[n.LOW=-25]="LOW",n[n.UTILITY=-50]="UTILITY",n))(Ea||{});class sa{constructor(t,e=null,i=0,o=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=t,this._context=e,this.priority=i,this._once=o}match(t,e=null){return this._fn===t&&this._context===e}emit(t){this._fn&&(this._context?this._fn.call(this._context,t):this._fn(t));const e=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}}const Xf=class Pe{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new sa(null,null,1/0),this.deltaMS=1/Pe.targetFPMS,this.elapsedMS=1/Pe.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,i=Ea.NORMAL){return this._addListener(new sa(t,e,i))}addOnce(t,e,i=Ea.NORMAL){return this._addListener(new sa(t,e,i,!0))}_addListener(t){let e=this._head.next,i=this._head;if(!e)t.connect(i);else{for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}return this._startIfPossible(),this}remove(t,e){let i=this._head.next;for(;i;)i.match(t,e)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const a=t-this._lastFrame|0;if(a<this._minElapsedMS)return;this._lastFrame=t-a%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*Pe.targetFPMS;const i=this._head;let o=i.next;for(;o;)o=o.emit(this);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,Pe.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!Pe._shared){const t=Pe._shared=new Pe;t.autoStart=!0,t._protected=!0}return Pe._shared}static get system(){if(!Pe._system){const t=Pe._system=new Pe;t.autoStart=!0,t._protected=!0}return Pe._system}};Xf.targetFPMS=.06;let Ji=Xf,oa;async function Iv(){return oa??(oa=(async()=>{var l;const t=document.createElement("canvas").getContext("webgl");if(!t)return"premultiply-alpha-on-upload";const e=await new Promise(u=>{const f=document.createElement("video");f.onloadeddata=()=>u(f),f.onerror=()=>u(null),f.autoplay=!1,f.crossOrigin="anonymous",f.preload="auto",f.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",f.load()});if(!e)return"premultiply-alpha-on-upload";const i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e);const a=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,a),t.deleteFramebuffer(o),t.deleteTexture(i),(l=t.getExtension("WEBGL_lose_context"))==null||l.loseContext(),a[0]<=a[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),oa}const Ss=class Vf extends sn{constructor(t){super(t),this.isReady=!1,this.uploadMethodId="video",t={...Vf.defaultOptions,...t},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this.alphaMode=t.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const t=Ji.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const t=this.resource,e=this.options;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(e.preload||t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlayThrough),t.addEventListener("error",this._onError,!0)),this.alphaMode=await Iv(),this._load=new Promise((i,o)=>{this.isValid?i(this):(this._resolve=i,this._reject=o,e.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${e.preloadTimeoutMs}ms`))})),t.load())}),this._load}_onError(t){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.resource;return!t.paused&&!t.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const t=this.resource;this.isValid&&(this.isReady=!0,this.resize(t.videoWidth,t.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const t=this.resource;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlayThrough),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(Ji.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Ji.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Ji.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement}};Ss.extension=Mt.TextureSource;Ss.defaultOptions={...sn.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};Ss.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let Ev=Ss;const fr=(n,t,e=!1)=>(Array.isArray(n)||(n=[n]),t?n.map(i=>typeof i=="string"||e?t(i):i):n);class Rv{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);return e||Te(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){const i=fr(t);let o;for(let f=0;f<this.parsers.length;f++){const d=this.parsers[f];if(d.test(e)){o=d.getCacheableAssets(i,e);break}}const a=new Map(Object.entries(o||{}));o||i.forEach(f=>{a.set(f,e)});const l=[...a.keys()],u={cacheKeys:l,keys:i};i.forEach(f=>{this._cacheMap.set(f,u)}),l.forEach(f=>{const d=o?o[f]:e;this._cache.has(f)&&this._cache.get(f)!==d&&Te("[Cache] already has key:",f),this._cache.set(f,a.get(f))})}remove(t){if(!this._cacheMap.has(t)){Te(`[Assets] Asset id ${t} was not found in the Cache`);return}const e=this._cacheMap.get(t);e.cacheKeys.forEach(o=>{this._cache.delete(o)}),e.keys.forEach(o=>{this._cacheMap.delete(o)})}get parsers(){return this._parsers}}const dr=new Rv,Ra=[];De.handleByList(Mt.TextureSource,Ra);function qf(n={}){const t=n&&n.resource,e=t?n.resource:n,i=t?n:{resource:n};for(let o=0;o<Ra.length;o++){const a=Ra[o];if(a.test(e))return new a(i)}throw new Error(`Could not find a source type for resource: ${i.resource}`)}function kv(n={},t=!1){const e=n&&n.resource,i=e?n.resource:n,o=e?n:{resource:n};if(!t&&dr.has(i))return dr.get(i);const a=new kt({source:qf(o)});return a.on("destroy",()=>{dr.has(i)&&dr.remove(i)}),t||dr.set(i,a),a}function Fv(n,t=!1){return typeof n=="string"?dr.get(n):n instanceof sn?new kt({source:n}):kv(n,t)}kt.from=Fv;sn.from=qf;De.add($f,zf,Hf,Ev,ms,Yf,Za);var Kf=(n=>(n[n.Low=0]="Low",n[n.Normal=1]="Normal",n[n.High=2]="High",n))(Kf||{});function Ye(n){if(typeof n!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(n)}`)}function Or(n){return n.split("?")[0].split("#")[0]}function Bv(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Lv(n,t,e){return n.replace(new RegExp(Bv(t),"g"),e)}function Gv(n,t){let e="",i=0,o=-1,a=0,l=-1;for(let u=0;u<=n.length;++u){if(u<n.length)l=n.charCodeAt(u);else{if(l===47)break;l=47}if(l===47){if(!(o===u-1||a===1))if(o!==u-1&&a===2){if(e.length<2||i!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){const f=e.lastIndexOf("/");if(f!==e.length-1){f===-1?(e="",i=0):(e=e.slice(0,f),i=e.length-1-e.lastIndexOf("/")),o=u,a=0;continue}}else if(e.length===2||e.length===1){e="",i=0,o=u,a=0;continue}}}else e.length>0?e+=`/${n.slice(o+1,u)}`:e=n.slice(o+1,u),i=u-o-1;o=u,a=0}else l===46&&a!==-1?++a:a=-1}return e}const jr={toPosix(n){return Lv(n,"\\","/")},isUrl(n){return/^https?:/.test(this.toPosix(n))},isDataUrl(n){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(n)},isBlobUrl(n){return n.startsWith("blob:")},hasProtocol(n){return/^[^/:]+:/.test(this.toPosix(n))},getProtocol(n){Ye(n),n=this.toPosix(n);const t=/^file:\/\/\//.exec(n);if(t)return t[0];const e=/^[^/:]+:\/{0,2}/.exec(n);return e?e[0]:""},toAbsolute(n,t,e){if(Ye(n),this.isDataUrl(n)||this.isBlobUrl(n))return n;const i=Or(this.toPosix(t??Ve.get().getBaseUrl())),o=Or(this.toPosix(e??this.rootname(i)));return n=this.toPosix(n),n.startsWith("/")?jr.join(o,n.slice(1)):this.isAbsolute(n)?n:this.join(i,n)},normalize(n){if(Ye(n),n.length===0)return".";if(this.isDataUrl(n)||this.isBlobUrl(n))return n;n=this.toPosix(n);let t="";const e=n.startsWith("/");this.hasProtocol(n)&&(t=this.rootname(n),n=n.slice(t.length));const i=n.endsWith("/");return n=Gv(n),n.length>0&&i&&(n+="/"),e?`/${n}`:t+n},isAbsolute(n){return Ye(n),n=this.toPosix(n),this.hasProtocol(n)?!0:n.startsWith("/")},join(...n){if(n.length===0)return".";let t;for(let e=0;e<n.length;++e){const i=n[e];if(Ye(i),i.length>0)if(t===void 0)t=i;else{const o=n[e-1]??"";this.joinExtensions.includes(this.extname(o).toLowerCase())?t+=`/../${i}`:t+=`/${i}`}}return t===void 0?".":this.normalize(t)},dirname(n){if(Ye(n),n.length===0)return".";n=this.toPosix(n);let t=n.charCodeAt(0);const e=t===47;let i=-1,o=!0;const a=this.getProtocol(n),l=n;n=n.slice(a.length);for(let u=n.length-1;u>=1;--u)if(t=n.charCodeAt(u),t===47){if(!o){i=u;break}}else o=!1;return i===-1?e?"/":this.isUrl(l)?a+n:a:e&&i===1?"//":a+n.slice(0,i)},rootname(n){Ye(n),n=this.toPosix(n);let t="";if(n.startsWith("/")?t="/":t=this.getProtocol(n),this.isUrl(n)){const e=n.indexOf("/",t.length);e!==-1?t=n.slice(0,e):t=n,t.endsWith("/")||(t+="/")}return t},basename(n,t){Ye(n),t&&Ye(t),n=Or(this.toPosix(n));let e=0,i=-1,o=!0,a;if(t!==void 0&&t.length>0&&t.length<=n.length){if(t.length===n.length&&t===n)return"";let l=t.length-1,u=-1;for(a=n.length-1;a>=0;--a){const f=n.charCodeAt(a);if(f===47){if(!o){e=a+1;break}}else u===-1&&(o=!1,u=a+1),l>=0&&(f===t.charCodeAt(l)?--l===-1&&(i=a):(l=-1,i=u))}return e===i?i=u:i===-1&&(i=n.length),n.slice(e,i)}for(a=n.length-1;a>=0;--a)if(n.charCodeAt(a)===47){if(!o){e=a+1;break}}else i===-1&&(o=!1,i=a+1);return i===-1?"":n.slice(e,i)},extname(n){Ye(n),n=Or(this.toPosix(n));let t=-1,e=0,i=-1,o=!0,a=0;for(let l=n.length-1;l>=0;--l){const u=n.charCodeAt(l);if(u===47){if(!o){e=l+1;break}continue}i===-1&&(o=!1,i=l+1),u===46?t===-1?t=l:a!==1&&(a=1):t!==-1&&(a=-1)}return t===-1||i===-1||a===0||a===1&&t===i-1&&t===e+1?"":n.slice(t,i)},parse(n){Ye(n);const t={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return t;n=Or(this.toPosix(n));let e=n.charCodeAt(0);const i=this.isAbsolute(n);let o;t.root=this.rootname(n),i||this.hasProtocol(n)?o=1:o=0;let a=-1,l=0,u=-1,f=!0,d=n.length-1,p=0;for(;d>=o;--d){if(e=n.charCodeAt(d),e===47){if(!f){l=d+1;break}continue}u===-1&&(f=!1,u=d+1),e===46?a===-1?a=d:p!==1&&(p=1):a!==-1&&(p=-1)}return a===-1||u===-1||p===0||p===1&&a===u-1&&a===l+1?u!==-1&&(l===0&&i?t.base=t.name=n.slice(1,u):t.base=t.name=n.slice(l,u)):(l===0&&i?(t.name=n.slice(1,a),t.base=n.slice(1,u)):(t.name=n.slice(l,a),t.base=n.slice(l,u)),t.ext=n.slice(a,u)),t.dir=this.dirname(n),t},sep:"/",delimiter:":",joinExtensions:[".html"]};function Zf(n,t,e,i,o){const a=t[e];for(let l=0;l<a.length;l++){const u=a[l];e<t.length-1?Zf(n.replace(i[e],u),t,e+1,i,o):o.push(n.replace(i[e],u))}}function Ov(n){const t=/\{(.*?)\}/g,e=n.match(t),i=[];if(e){const o=[];e.forEach(a=>{const l=a.substring(1,a.length-1).split(",");o.push(l)}),Zf(n,o,0,e,i)}else i.push(n);return i}const pc=n=>!Array.isArray(n);class jf{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>`${t}${this._bundleIdConnector}${e}`,extractAssetIdFromBundle:(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const e=t;this._defaultSearchParams=Object.keys(e).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`).join("&")}}getAlias(t){const{alias:e,src:i}=t;return fr(e||i,a=>typeof a=="string"?a:Array.isArray(a)?a.map(l=>(l==null?void 0:l.src)??l):a!=null&&a.src?a.src:a,!0)}addManifest(t){this._manifest&&Te("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(t,e){const i=[];let o=e;Array.isArray(e)||(o=Object.entries(e).map(([a,l])=>typeof l=="string"||Array.isArray(l)?{alias:a,src:l}:{alias:a,...l})),o.forEach(a=>{const l=a.src,u=a.alias;let f;if(typeof u=="string"){const d=this._createBundleAssetId(t,u);i.push(d),f=[u,d]}else{const d=u.map(p=>this._createBundleAssetId(t,p));i.push(...d),f=[...u,...d]}this.add({...a,alias:f,src:l})}),this._bundles[t]=i}add(t){const e=[];Array.isArray(t)?e.push(...t):e.push(t);let i;i=a=>{this.hasKey(a)&&Te(`[Resolver] already has key: ${a} overwriting`)},fr(e).forEach(a=>{const{src:l}=a;let{data:u,format:f,loadParser:d}=a;const p=fr(l).map(m=>typeof m=="string"?Ov(m):Array.isArray(m)?m:[m]),_=this.getAlias(a);Array.isArray(_)?_.forEach(i):i(_);const v=[];p.forEach(m=>{m.forEach(C=>{let M={};if(typeof C!="object"){M.src=C;for(let w=0;w<this._parsers.length;w++){const T=this._parsers[w];if(T.test(C)){M=T.parse(C);break}}}else u=C.data??u,f=C.format??f,d=C.loadParser??d,M={...M,...C};if(!_)throw new Error(`[Resolver] alias is undefined for this asset: ${M.src}`);M=this._buildResolvedAsset(M,{aliases:_,data:u,format:f,loadParser:d}),v.push(M)})}),_.forEach(m=>{this._assetMap[m]=v})})}resolveBundle(t){const e=pc(t);t=fr(t);const i={};return t.forEach(o=>{const a=this._bundles[o];if(a){const l=this.resolve(a),u={};for(const f in l){const d=l[f];u[this._extractAssetIdFromBundle(o,f)]=d}i[o]=u}}),e?i[t[0]]:i}resolveUrl(t){const e=this.resolve(t);if(typeof t!="string"){const i={};for(const o in e)i[o]=e[o].src;return i}return e.src}resolve(t){const e=pc(t);t=fr(t);const i={};return t.forEach(o=>{if(!this._resolverHash[o])if(this._assetMap[o]){let a=this._assetMap[o];const l=this._getPreferredOrder(a);l==null||l.priority.forEach(u=>{l.params[u].forEach(f=>{const d=a.filter(p=>p[u]?p[u]===f:!1);d.length&&(a=d)})}),this._resolverHash[o]=a[0]}else this._resolverHash[o]=this._buildResolvedAsset({alias:[o],src:o},{});i[o]=this._resolverHash[o]}),e?i[t[0]]:i}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){const i=t[e],o=this._preferredOrder.find(a=>a.params.format.includes(i.format));if(o)return o}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const e=/\?/.test(t)?"&":"?";return`${t}${e}${this._defaultSearchParams}`}_buildResolvedAsset(t,e){const{aliases:i,data:o,loadParser:a,format:l}=e;return(this._basePath||this._rootPath)&&(t.src=jr.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=i??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...o||{},...t.data},t.loadParser=a??t.loadParser,t.format=l??t.format??Dv(t.src),t}}jf.RETINA_PREFIX=/@([0-9\.]+)x/;function Dv(n){return n.split(".").pop().split("?").shift().split("#").shift()}const _c=(n,t)=>{const e=t.split("?")[1];return e&&(n+=`?${e}`),n},Qf=class $r{constructor(t,e){this.linkedSheets=[],this._texture=t instanceof kt?t:null,this.textureSource=t.source,this.textures={},this.animations={},this.data=e;const i=parseFloat(e.meta.scale);i?(this.resolution=i,t.source.resolution=this.resolution):this.resolution=t.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=$r.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let e=t;const i=$r.BATCH_SIZE;for(;e-t<i&&e<this._frameKeys.length;){const o=this._frameKeys[e],a=this._frames[o],l=a.frame;if(l){let u=null,f=null;const d=a.trimmed!==!1&&a.sourceSize?a.sourceSize:a.frame,p=new ee(0,0,Math.floor(d.w)/this.resolution,Math.floor(d.h)/this.resolution);a.rotated?u=new ee(Math.floor(l.x)/this.resolution,Math.floor(l.y)/this.resolution,Math.floor(l.h)/this.resolution,Math.floor(l.w)/this.resolution):u=new ee(Math.floor(l.x)/this.resolution,Math.floor(l.y)/this.resolution,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution),a.trimmed!==!1&&a.spriteSourceSize&&(f=new ee(Math.floor(a.spriteSourceSize.x)/this.resolution,Math.floor(a.spriteSourceSize.y)/this.resolution,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution)),this.textures[o]=new kt({source:this.textureSource,frame:u,orig:p,trim:f,rotate:a.rotated?2:0,defaultAnchor:a.anchor,defaultBorders:a.borders,label:o.toString()})}e++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let i=0;i<t[e].length;i++){const o=t[e][i];this.animations[e].push(this.textures[o])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*$r.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*$r.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){var e;for(const i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((e=this._texture)==null||e.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};Qf.BATCH_SIZE=1e3;let gc=Qf;const Uv=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function Jf(n,t,e){const i={};if(n.forEach(o=>{i[o]=t}),Object.keys(t.textures).forEach(o=>{i[o]=t.textures[o]}),!e){const o=jr.dirname(n[0]);t.linkedSheets.forEach((a,l)=>{const u=Jf([`${o}/${t.data.meta.related_multi_packs[l]}`],a,!0);Object.assign(i,u)})}return i}const Wv={extension:Mt.Asset,cache:{test:n=>n instanceof gc,getCacheableAssets:(n,t)=>Jf(n,t,!1)},resolver:{extension:{type:Mt.ResolveParser,name:"resolveSpritesheet"},test:n=>{const e=n.split("?")[0].split("."),i=e.pop(),o=e.pop();return i==="json"&&Uv.includes(o)},parse:n=>{var e;const t=n.split(".");return{resolution:parseFloat(((e=jf.RETINA_PREFIX.exec(n))==null?void 0:e[1])??"1"),format:t[t.length-2],src:n}}},loader:{name:"spritesheetLoader",extension:{type:Mt.LoadParser,priority:Kf.Normal,name:"spritesheetLoader"},async testParse(n,t){return jr.extname(t.src).toLowerCase()===".json"&&!!n.frames},async parse(n,t,e){var p,_;const{texture:i,imageFilename:o,textureOptions:a}=(t==null?void 0:t.data)??{};let l=jr.dirname(t.src);l&&l.lastIndexOf("/")!==l.length-1&&(l+="/");let u;if(i instanceof kt)u=i;else{const v=_c(l+(o??n.meta.image),t.src);u=(await e.load([{src:v,data:a}]))[v]}const f=new gc(u.source,n);await f.parse();const d=(p=n==null?void 0:n.meta)==null?void 0:p.related_multi_packs;if(Array.isArray(d)){const v=[];for(const C of d){if(typeof C!="string")continue;let M=l+C;(_=t.data)!=null&&_.ignoreMultiPack||(M=_c(M,t.src),v.push(e.load({src:M,data:{textureOptions:a,ignoreMultiPack:!0}})))}const m=await Promise.all(v);f.linkedSheets=m,m.forEach(C=>{C.linkedSheets=[f].concat(f.linkedSheets.filter(M=>M!==C))})}return f},async unload(n,t,e){await e.unload(n.textureSource._sourceOrigin),n.destroy(!1)}}};De.add(Wv);const aa=Object.create(null),mc=Object.create(null);function th(n,t){let e=mc[n];return e===void 0&&(aa[t]===void 0&&(aa[t]=1),mc[n]=e=aa[t]++),e}let ur;function td(){return(!ur||ur!=null&&ur.isContextLost())&&(ur=Ve.get().createCanvas().getContext("webgl",{})),ur}let ts;function Nv(){if(!ts){ts="mediump";const n=td();n&&n.getShaderPrecisionFormat&&(ts=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision?"highp":"mediump")}return ts}function $v(n,t,e){return t?n:e?(n=n.replace("out vec4 finalColor;",""),`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${n}
        `):`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${n}
        `}function zv(n,t,e){const i=e?t.maxSupportedFragmentPrecision:t.maxSupportedVertexPrecision;if(n.substring(0,9)!=="precision"){let o=e?t.requestedFragmentPrecision:t.requestedVertexPrecision;return o==="highp"&&i!=="highp"&&(o="mediump"),`precision ${o} float;
${n}`}else if(i!=="highp"&&n.substring(0,15)==="precision highp")return n.replace("precision highp","precision mediump");return n}function Hv(n,t){return t?`#version 300 es
${n}`:n}const Yv={},Xv={};function Vv(n,{name:t="pixi-program"},e=!0){t=t.replace(/\s+/g,"-"),t+=e?"-fragment":"-vertex";const i=e?Yv:Xv;return i[t]?(i[t]++,t+=`-${i[t]}`):i[t]=1,n.indexOf("#define SHADER_NAME")!==-1?n:`${`#define SHADER_NAME ${t}`}
${n}`}function qv(n,t){return t?n.replace("#version 300 es",""):n}const ha={stripVersion:qv,ensurePrecision:zv,addProgramDefines:$v,setProgramName:Vv,insertVersion:Hv},la=Object.create(null),ed=class ka{constructor(t){t={...ka.defaultOptions,...t};const e=t.fragment.indexOf("#version 300 es")!==-1,i={stripVersion:e,ensurePrecision:{requestedFragmentPrecision:t.preferredFragmentPrecision,requestedVertexPrecision:t.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:Nv()},setProgramName:{name:t.name},addProgramDefines:e,insertVersion:e};let o=t.fragment,a=t.vertex;Object.keys(ha).forEach(l=>{const u=i[l];o=ha[l](o,u,!0),a=ha[l](a,u,!1)}),this.fragment=o,this.vertex=a,this.transformFeedbackVaryings=t.transformFeedbackVaryings,this._key=th(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null}static from(t){const e=`${t.vertex}:${t.fragment}`;return la[e]||(la[e]=new ka(t)),la[e]}};ed.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let nd=ed;const xc={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function Kv(n){return xc[n]??xc.float32}const Zv={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function jv({source:n,entryPoint:t}){const e={},i=n.indexOf(`fn ${t}`);if(i!==-1){const o=n.indexOf("->",i);if(o!==-1){const a=n.substring(i,o),l=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let u;for(;(u=l.exec(a))!==null;){const f=Zv[u[3]]??"float32";e[u[2]]={location:parseInt(u[1],10),format:f,stride:Kv(f).stride,offset:0,instance:!1,start:0}}}}return e}function ua(n){var _,v;const t=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,e=/@group\((\d+)\)/,i=/@binding\((\d+)\)/,o=/var(<[^>]+>)? (\w+)/,a=/:\s*(\w+)/,l=/struct\s+(\w+)\s*{([^}]+)}/g,u=/(\w+)\s*:\s*([\w\<\>]+)/g,f=/struct\s+(\w+)/,d=(_=n.match(t))==null?void 0:_.map(m=>({group:parseInt(m.match(e)[1],10),binding:parseInt(m.match(i)[1],10),name:m.match(o)[2],isUniform:m.match(o)[1]==="<uniform>",type:m.match(a)[1]}));if(!d)return{groups:[],structs:[]};const p=((v=n.match(l))==null?void 0:v.map(m=>{const C=m.match(f)[1],M=m.match(u).reduce((w,T)=>{const[R,F]=T.split(":");return w[R.trim()]=F.trim(),w},{});return M?{name:C,members:M}:null}).filter(({name:m})=>d.some(C=>C.type===m)))??[];return{groups:d,structs:p}}var zr=(n=>(n[n.VERTEX=1]="VERTEX",n[n.FRAGMENT=2]="FRAGMENT",n[n.COMPUTE=4]="COMPUTE",n))(zr||{});function Qv({groups:n}){const t=[];for(let e=0;e<n.length;e++){const i=n[e];t[i.group]||(t[i.group]=[]),i.isUniform?t[i.group].push({binding:i.binding,visibility:zr.VERTEX|zr.FRAGMENT,buffer:{type:"uniform"}}):i.type==="sampler"?t[i.group].push({binding:i.binding,visibility:zr.FRAGMENT,sampler:{type:"filtering"}}):i.type==="texture_2d"&&t[i.group].push({binding:i.binding,visibility:zr.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return t}function Jv({groups:n}){const t=[];for(let e=0;e<n.length;e++){const i=n[e];t[i.group]||(t[i.group]={}),t[i.group][i.name]=i.binding}return t}function tb(n,t){const e=new Set,i=new Set,o=[...n.structs,...t.structs].filter(l=>e.has(l.name)?!1:(e.add(l.name),!0)),a=[...n.groups,...t.groups].filter(l=>{const u=`${l.name}-${l.binding}`;return i.has(u)?!1:(i.add(u),!0)});return{structs:o,groups:a}}const ca=Object.create(null);class Cs{constructor(t){var u,f;this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:e,vertex:i,layout:o,gpuLayout:a,name:l}=t;if(this.name=l,this.fragment=e,this.vertex=i,e.source===i.source){const d=ua(e.source);this.structsAndGroups=d}else{const d=ua(i.source),p=ua(e.source);this.structsAndGroups=tb(d,p)}this.layout=o??Jv(this.structsAndGroups),this.gpuLayout=a??Qv(this.structsAndGroups),this.autoAssignGlobalUniforms=((u=this.layout[0])==null?void 0:u.globalUniforms)!==void 0,this.autoAssignLocalUniforms=((f=this.layout[1])==null?void 0:f.localUniforms)!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:t,fragment:e}=this,i=t.source+e.source+t.entryPoint+e.entryPoint;this._layoutKey=th(i,"program")}get attributeData(){return this._attributeData??(this._attributeData=jv(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null}static from(t){const e=`${t.vertex.source}:${t.fragment.source}:${t.fragment.entryPoint}:${t.vertex.entryPoint}`;return ca[e]||(ca[e]=new Cs(t)),ca[e]}}const rd=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],eb=rd.reduce((n,t)=>(n[t]=!0,n),{});function nb(n,t){switch(n){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*t);case"vec3<f32>":return new Float32Array(3*t);case"vec4<f32>":return new Float32Array(4*t);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const id=class sd{constructor(t,e){this._touched=0,this.uid=qt("uniform"),this._resourceType="uniformGroup",this._resourceId=qt("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,e={...sd.defaultOptions,...e},this.uniformStructures=t;const i={};for(const o in t){const a=t[o];if(a.name=o,a.size=a.size??1,!eb[a.type])throw new Error(`Uniform type ${a.type} is not supported. Supported uniform types are: ${rd.join(", ")}`);a.value??(a.value=nb(a.type,a.size)),i[o]=a.value}this.uniforms=i,this._dirtyId=1,this.ubo=e.ubo,this.isStatic=e.isStatic,this._signature=th(Object.keys(i).map(o=>`${o}-${t[o].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};id.defaultOptions={ubo:!1,isStatic:!1};let od=id;class cs{constructor(t){this.resources=Object.create(null),this._dirty=!0;let e=0;for(const i in t){const o=t[i];this.setResource(o,e++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const t=[];let e=0;for(const i in this.resources)t[e++]=this.resources[i]._resourceId;this._key=t.join("|")}setResource(t,e){var o,a;const i=this.resources[e];t!==i&&(i&&((o=t.off)==null||o.call(t,"change",this.onResourceChange,this)),(a=t.on)==null||a.call(t,"change",this.onResourceChange,this),this.resources[e]=t,this._dirty=!0)}getResource(t){return this.resources[t]}_touch(t){const e=this.resources;for(const i in e)e[i]._touched=t}destroy(){var e;const t=this.resources;for(const i in t){const o=t[i];(e=o.off)==null||e.call(o,"change",this.onResourceChange,this)}this.resources=null}onResourceChange(t){if(this._dirty=!0,t.destroyed){const e=this.resources;for(const i in e)e[i]===t&&(e[i]=null)}else this._updateKey()}}var Fa=(n=>(n[n.WEBGL=1]="WEBGL",n[n.WEBGPU=2]="WEBGPU",n[n.BOTH=3]="BOTH",n))(Fa||{});class eh extends rn{constructor(t){super(),this.uid=qt("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[];let{gpuProgram:e,glProgram:i,groups:o,resources:a,compatibleRenderers:l,groupMap:u}=t;this.gpuProgram=e,this.glProgram=i,l===void 0&&(l=0,e&&(l|=Fa.WEBGPU),i&&(l|=Fa.WEBGL)),this.compatibleRenderers=l;const f={};if(!a&&!o&&(a={}),a&&o)throw new Error("[Shader] Cannot have both resources and groups");if(!e&&o&&!u)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!e&&o&&u)for(const d in u)for(const p in u[d]){const _=u[d][p];f[_]={group:d,binding:p,name:_}}else if(e&&o&&!u){const d=e.structsAndGroups.groups;u={},d.forEach(p=>{u[p.group]=u[p.group]||{},u[p.group][p.binding]=p.name,f[p.name]=p})}else if(a){o={},u={},e&&e.structsAndGroups.groups.forEach(_=>{u[_.group]=u[_.group]||{},u[_.group][_.binding]=_.name,f[_.name]=_});let d=0;for(const p in a)f[p]||(o[99]||(o[99]=new cs,this._ownedBindGroups.push(o[99])),f[p]={group:99,binding:d,name:p},u[99]=u[99]||{},u[99][d]=p,d++);for(const p in a){const _=p;let v=a[p];!v.source&&!v._resourceType&&(v=new od(v));const m=f[_];m&&(o[m.group]||(o[m.group]=new cs,this._ownedBindGroups.push(o[m.group])),o[m.group].setResource(v,m.binding))}}this.groups=o,this._uniformBindMap=u,this.resources=this._buildResourceAccessor(o,f)}addResource(t,e,i){var o,a;(o=this._uniformBindMap)[e]||(o[e]={}),(a=this._uniformBindMap[e])[i]||(a[i]=t),this.groups[e]||(this.groups[e]=new cs,this._ownedBindGroups.push(this.groups[e]))}_buildResourceAccessor(t,e){const i={};for(const o in e){const a=e[o];Object.defineProperty(i,a.name,{get(){return t[a.group].getResource(a.binding)},set(l){t[a.group].setResource(l,a.binding)}})}return i}destroy(t=!1){var e,i;this.emit("destroy",this),t&&((e=this.gpuProgram)==null||e.destroy(),(i=this.glProgram)==null||i.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(o=>{o.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null}static from(t){const{gpu:e,gl:i,...o}=t;let a,l;return e&&(a=Cs.from(e)),i&&(l=nd.from(i)),new eh({gpuProgram:a,glProgram:l,...o})}}const Ba=[];De.handleByNamedList(Mt.Environment,Ba);async function rb(n){if(!n)for(let t=0;t<Ba.length;t++){const e=Ba[t];if(e.value.test()){await e.value.load();return}}}let Dr;function ib(){if(typeof Dr=="boolean")return Dr;try{Dr=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Dr=!1}return Dr}var es={exports:{}},yc;function sb(){if(yc)return es.exports;yc=1,es.exports=n,es.exports.default=n;function n(b,P,I){I=I||2;var L=P&&P.length,O=L?P[0]*I:b.length,W=t(b,0,O,I,!0),H=[];if(!W||W.next===W.prev)return H;var V,it,Q,mt,St,ft,It;if(L&&(W=f(b,P,W,I)),b.length>80*I){V=Q=b[0],it=mt=b[1];for(var vt=I;vt<O;vt+=I)St=b[vt],ft=b[vt+1],St<V&&(V=St),ft<it&&(it=ft),St>Q&&(Q=St),ft>mt&&(mt=ft);It=Math.max(Q-V,mt-it),It=It!==0?32767/It:0}return i(W,H,I,V,it,It,0),H}function t(b,P,I,L,O){var W,H;if(O===Ue(b,P,I,L)>0)for(W=P;W<I;W+=L)H=yt(W,b[W],b[W+1],H);else for(W=I-L;W>=P;W-=L)H=yt(W,b[W],b[W+1],H);return H&&D(H,H.next)&&(At(H),H=H.next),H}function e(b,P){if(!b)return b;P||(P=b);var I=b,L;do if(L=!1,!I.steiner&&(D(I,I.next)||F(I.prev,I,I.next)===0)){if(At(I),I=P=I.prev,I===I.next)break;L=!0}else I=I.next;while(L||I!==P);return P}function i(b,P,I,L,O,W,H){if(b){!H&&W&&m(b,L,O,W);for(var V=b,it,Q;b.prev!==b.next;){if(it=b.prev,Q=b.next,W?a(b,L,O,W):o(b)){P.push(it.i/I|0),P.push(b.i/I|0),P.push(Q.i/I|0),At(b),b=Q.next,V=Q.next;continue}if(b=Q,b===V){H?H===1?(b=l(e(b),P,I),i(b,P,I,L,O,W,2)):H===2&&u(b,P,I,L,O,W):i(e(b),P,I,L,O,W,1);break}}}}function o(b){var P=b.prev,I=b,L=b.next;if(F(P,I,L)>=0)return!1;for(var O=P.x,W=I.x,H=L.x,V=P.y,it=I.y,Q=L.y,mt=O<W?O<H?O:H:W<H?W:H,St=V<it?V<Q?V:Q:it<Q?it:Q,ft=O>W?O>H?O:H:W>H?W:H,It=V>it?V>Q?V:Q:it>Q?it:Q,vt=L.next;vt!==P;){if(vt.x>=mt&&vt.x<=ft&&vt.y>=St&&vt.y<=It&&T(O,V,W,it,H,Q,vt.x,vt.y)&&F(vt.prev,vt,vt.next)>=0)return!1;vt=vt.next}return!0}function a(b,P,I,L){var O=b.prev,W=b,H=b.next;if(F(O,W,H)>=0)return!1;for(var V=O.x,it=W.x,Q=H.x,mt=O.y,St=W.y,ft=H.y,It=V<it?V<Q?V:Q:it<Q?it:Q,vt=mt<St?mt<ft?mt:ft:St<ft?St:ft,fe=V>it?V>Q?V:Q:it>Q?it:Q,jt=mt>St?mt>ft?mt:ft:St>ft?St:ft,ye=M(It,vt,P,I,L),Ut=M(fe,jt,P,I,L),at=b.prevZ,xt=b.nextZ;at&&at.z>=ye&&xt&&xt.z<=Ut;){if(at.x>=It&&at.x<=fe&&at.y>=vt&&at.y<=jt&&at!==O&&at!==H&&T(V,mt,it,St,Q,ft,at.x,at.y)&&F(at.prev,at,at.next)>=0||(at=at.prevZ,xt.x>=It&&xt.x<=fe&&xt.y>=vt&&xt.y<=jt&&xt!==O&&xt!==H&&T(V,mt,it,St,Q,ft,xt.x,xt.y)&&F(xt.prev,xt,xt.next)>=0))return!1;xt=xt.nextZ}for(;at&&at.z>=ye;){if(at.x>=It&&at.x<=fe&&at.y>=vt&&at.y<=jt&&at!==O&&at!==H&&T(V,mt,it,St,Q,ft,at.x,at.y)&&F(at.prev,at,at.next)>=0)return!1;at=at.prevZ}for(;xt&&xt.z<=Ut;){if(xt.x>=It&&xt.x<=fe&&xt.y>=vt&&xt.y<=jt&&xt!==O&&xt!==H&&T(V,mt,it,St,Q,ft,xt.x,xt.y)&&F(xt.prev,xt,xt.next)>=0)return!1;xt=xt.nextZ}return!0}function l(b,P,I){var L=b;do{var O=L.prev,W=L.next.next;!D(O,W)&&X(O,L,L.next,W)&&et(O,W)&&et(W,O)&&(P.push(O.i/I|0),P.push(L.i/I|0),P.push(W.i/I|0),At(L),At(L.next),L=b=W),L=L.next}while(L!==b);return e(L)}function u(b,P,I,L,O,W){var H=b;do{for(var V=H.next.next;V!==H.prev;){if(H.i!==V.i&&R(H,V)){var it=K(H,V);H=e(H,H.next),it=e(it,it.next),i(H,P,I,L,O,W,0),i(it,P,I,L,O,W,0);return}V=V.next}H=H.next}while(H!==b)}function f(b,P,I,L){var O=[],W,H,V,it,Q;for(W=0,H=P.length;W<H;W++)V=P[W]*L,it=W<H-1?P[W+1]*L:b.length,Q=t(b,V,it,L,!1),Q===Q.next&&(Q.steiner=!0),O.push(w(Q));for(O.sort(d),W=0;W<O.length;W++)I=p(O[W],I);return I}function d(b,P){return b.x-P.x}function p(b,P){var I=_(b,P);if(!I)return P;var L=K(I,b);return e(L,L.next),e(I,I.next)}function _(b,P){var I=P,L=b.x,O=b.y,W=-1/0,H;do{if(O<=I.y&&O>=I.next.y&&I.next.y!==I.y){var V=I.x+(O-I.y)*(I.next.x-I.x)/(I.next.y-I.y);if(V<=L&&V>W&&(W=V,H=I.x<I.next.x?I:I.next,V===L))return H}I=I.next}while(I!==P);if(!H)return null;var it=H,Q=H.x,mt=H.y,St=1/0,ft;I=H;do L>=I.x&&I.x>=Q&&L!==I.x&&T(O<mt?L:W,O,Q,mt,O<mt?W:L,O,I.x,I.y)&&(ft=Math.abs(O-I.y)/(L-I.x),et(I,b)&&(ft<St||ft===St&&(I.x>H.x||I.x===H.x&&v(H,I)))&&(H=I,St=ft)),I=I.next;while(I!==it);return H}function v(b,P){return F(b.prev,b,P.prev)<0&&F(P.next,b,b.next)<0}function m(b,P,I,L){var O=b;do O.z===0&&(O.z=M(O.x,O.y,P,I,L)),O.prevZ=O.prev,O.nextZ=O.next,O=O.next;while(O!==b);O.prevZ.nextZ=null,O.prevZ=null,C(O)}function C(b){var P,I,L,O,W,H,V,it,Q=1;do{for(I=b,b=null,W=null,H=0;I;){for(H++,L=I,V=0,P=0;P<Q&&(V++,L=L.nextZ,!!L);P++);for(it=Q;V>0||it>0&&L;)V!==0&&(it===0||!L||I.z<=L.z)?(O=I,I=I.nextZ,V--):(O=L,L=L.nextZ,it--),W?W.nextZ=O:b=O,O.prevZ=W,W=O;I=L}W.nextZ=null,Q*=2}while(H>1);return b}function M(b,P,I,L,O){return b=(b-I)*O|0,P=(P-L)*O|0,b=(b|b<<8)&16711935,b=(b|b<<4)&252645135,b=(b|b<<2)&858993459,b=(b|b<<1)&1431655765,P=(P|P<<8)&16711935,P=(P|P<<4)&252645135,P=(P|P<<2)&858993459,P=(P|P<<1)&1431655765,b|P<<1}function w(b){var P=b,I=b;do(P.x<I.x||P.x===I.x&&P.y<I.y)&&(I=P),P=P.next;while(P!==b);return I}function T(b,P,I,L,O,W,H,V){return(O-H)*(P-V)>=(b-H)*(W-V)&&(b-H)*(L-V)>=(I-H)*(P-V)&&(I-H)*(W-V)>=(O-H)*(L-V)}function R(b,P){return b.next.i!==P.i&&b.prev.i!==P.i&&!rt(b,P)&&(et(b,P)&&et(P,b)&&Z(b,P)&&(F(b.prev,b,P.prev)||F(b,P.prev,P))||D(b,P)&&F(b.prev,b,b.next)>0&&F(P.prev,P,P.next)>0)}function F(b,P,I){return(P.y-b.y)*(I.x-P.x)-(P.x-b.x)*(I.y-P.y)}function D(b,P){return b.x===P.x&&b.y===P.y}function X(b,P,I,L){var O=$(F(b,P,I)),W=$(F(b,P,L)),H=$(F(I,L,b)),V=$(F(I,L,P));return!!(O!==W&&H!==V||O===0&&z(b,I,P)||W===0&&z(b,L,P)||H===0&&z(I,b,L)||V===0&&z(I,P,L))}function z(b,P,I){return P.x<=Math.max(b.x,I.x)&&P.x>=Math.min(b.x,I.x)&&P.y<=Math.max(b.y,I.y)&&P.y>=Math.min(b.y,I.y)}function $(b){return b>0?1:b<0?-1:0}function rt(b,P){var I=b;do{if(I.i!==b.i&&I.next.i!==b.i&&I.i!==P.i&&I.next.i!==P.i&&X(I,I.next,b,P))return!0;I=I.next}while(I!==b);return!1}function et(b,P){return F(b.prev,b,b.next)<0?F(b,P,b.next)>=0&&F(b,b.prev,P)>=0:F(b,P,b.prev)<0||F(b,b.next,P)<0}function Z(b,P){var I=b,L=!1,O=(b.x+P.x)/2,W=(b.y+P.y)/2;do I.y>W!=I.next.y>W&&I.next.y!==I.y&&O<(I.next.x-I.x)*(W-I.y)/(I.next.y-I.y)+I.x&&(L=!L),I=I.next;while(I!==b);return L}function K(b,P){var I=new zt(b.i,b.x,b.y),L=new zt(P.i,P.x,P.y),O=b.next,W=P.prev;return b.next=P,P.prev=b,I.next=O,O.prev=I,L.next=I,I.prev=L,W.next=L,L.prev=W,L}function yt(b,P,I,L){var O=new zt(b,P,I);return L?(O.next=L.next,O.prev=L,L.next.prev=O,L.next=O):(O.prev=O,O.next=O),O}function At(b){b.next.prev=b.prev,b.prev.next=b.next,b.prevZ&&(b.prevZ.nextZ=b.nextZ),b.nextZ&&(b.nextZ.prevZ=b.prevZ)}function zt(b,P,I){this.i=b,this.x=P,this.y=I,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}n.deviation=function(b,P,I,L){var O=P&&P.length,W=O?P[0]*I:b.length,H=Math.abs(Ue(b,0,W,I));if(O)for(var V=0,it=P.length;V<it;V++){var Q=P[V]*I,mt=V<it-1?P[V+1]*I:b.length;H-=Math.abs(Ue(b,Q,mt,I))}var St=0;for(V=0;V<L.length;V+=3){var ft=L[V]*I,It=L[V+1]*I,vt=L[V+2]*I;St+=Math.abs((b[ft]-b[vt])*(b[It+1]-b[ft+1])-(b[ft]-b[It])*(b[vt+1]-b[ft+1]))}return H===0&&St===0?0:Math.abs((St-H)/H)};function Ue(b,P,I,L){for(var O=0,W=P,H=I-L;W<I;W+=L)O+=(b[H]-b[W])*(b[W+1]+b[H+1]),H=W;return O}return n.flatten=function(b){for(var P=b[0][0].length,I={vertices:[],holes:[],dimensions:P},L=0,O=0;O<b.length;O++){for(var W=0;W<b[O].length;W++)for(var H=0;H<P;H++)I.vertices.push(b[O][W][H]);O>0&&(L+=b[O-1].length,I.holes.push(L))}return I},es.exports}var ob=sb();const ab=Ka(ob);var ad=(n=>(n[n.NONE=0]="NONE",n[n.COLOR=16384]="COLOR",n[n.STENCIL=1024]="STENCIL",n[n.DEPTH=256]="DEPTH",n[n.COLOR_DEPTH=16640]="COLOR_DEPTH",n[n.COLOR_STENCIL=17408]="COLOR_STENCIL",n[n.DEPTH_STENCIL=1280]="DEPTH_STENCIL",n[n.ALL=17664]="ALL",n))(ad||{});class hb{constructor(t){this.items=[],this._name=t}emit(t,e,i,o,a,l,u,f){const{name:d,items:p}=this;for(let _=0,v=p.length;_<v;_++)p[_][d](t,e,i,o,a,l,u,f);return this}add(t){return t[this._name]&&(this.remove(t),this.items.push(t)),this}remove(t){const e=this.items.indexOf(t);return e!==-1&&this.items.splice(e,1),this}contains(t){return this.items.indexOf(t)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const lb=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],hd=class ld extends rn{constructor(t){super(),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=t.type,this.name=t.name,this.config=t;const e=[...lb,...this.config.runners??[]];this._addRunners(...e),this._unsafeEvalCheck()}async init(t={}){const e=t.skipExtensionImports===!0?!0:t.manageImports===!1;await rb(e),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const i in this._systemsHash)t={...this._systemsHash[i].constructor.defaultOptions,...t};t={...ld.defaultOptions,...t},this._roundPixels=t.roundPixels?1:0;for(let i=0;i<this.runners.init.items.length;i++)await this.runners.init.items[i].init(t);this._initOptions=t}render(t,e){let i=t;if(i instanceof En&&(i={container:i},e&&(Rt($t,"passing a second argument is deprecated, please use render options instead"),i.target=e.renderTexture)),i.target||(i.target=this.view.renderTarget),i.target===this.view.renderTarget&&(this._lastObjectRendered=i.container,i.clearColor??(i.clearColor=this.background.colorRgba),i.clear??(i.clear=this.background.clearBeforeRender)),i.clearColor){const o=Array.isArray(i.clearColor)&&i.clearColor.length===4;i.clearColor=o?i.clearColor:ae.shared.setValue(i.clearColor).toArray()}i.transform||(i.container.updateLocalTransform(),i.transform=i.container.localTransform),i.container.enableRenderGroup(),this.runners.prerender.emit(i),this.runners.renderStart.emit(i),this.runners.render.emit(i),this.runners.renderEnd.emit(i),this.runners.postrender.emit(i)}resize(t,e,i){const o=this.view.resolution;this.view.resize(t,e,i),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),i!==void 0&&i!==o&&this.runners.resolutionChange.emit(i)}clear(t={}){const e=this;t.target||(t.target=e.renderTarget.renderTarget),t.clearColor||(t.clearColor=this.background.colorRgba),t.clear??(t.clear=ad.ALL);const{clear:i,clearColor:o,target:a}=t;ae.shared.setValue(o??this.background.colorRgba),e.renderTarget.clear(a,i,ae.shared.toArray())}get resolution(){return this.view.resolution}set resolution(t){this.view.resolution=t,this.runners.resolutionChange.emit(t)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...t){t.forEach(e=>{this.runners[e]=new hb(e)})}_addSystems(t){let e;for(e in t){const i=t[e];this._addSystem(i.value,i.name)}}_addSystem(t,e){const i=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=i,this._systemsHash[e]=i;for(const o in this.runners)this.runners[o].add(i);return this}_addPipes(t,e){const i=e.reduce((o,a)=>(o[a.name]=a.value,o),{});t.forEach(o=>{const a=o.value,l=o.name,u=i[l];this.renderPipes[l]=new a(this,u?new u:null)})}destroy(t=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(t),Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(t){return this.textureGenerator.generateTexture(t)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!ib())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};hd.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let ud=hd,ns;function ub(n){return ns!==void 0||(ns=(()=>{var e;const t={stencil:!0,failIfMajorPerformanceCaveat:n??ud.defaultOptions.failIfMajorPerformanceCaveat};try{if(!Ve.get().getWebGLRenderingContext())return!1;let o=Ve.get().createCanvas().getContext("webgl",t);const a=!!((e=o==null?void 0:o.getContextAttributes())!=null&&e.stencil);if(o){const l=o.getExtension("WEBGL_lose_context");l&&l.loseContext()}return o=null,a}catch{return!1}})()),ns}let rs;async function cb(n={}){return rs!==void 0||(rs=await(async()=>{const t=Ve.get().getNavigator().gpu;if(!t)return!1;try{return await(await t.requestAdapter(n)).requestDevice(),!0}catch{return!1}})()),rs}const vc=["webgl","webgpu","canvas"];async function fb(n){let t=[];n.preference?(t.push(n.preference),vc.forEach(a=>{a!==n.preference&&t.push(a)})):t=vc.slice();let e,i={};for(let a=0;a<t.length;a++){const l=t[a];if(l==="webgpu"&&await cb()){const{WebGPURenderer:u}=await gs(async()=>{const{WebGPURenderer:f}=await import("./WebGPURenderer-hJO2B9sR.js");return{WebGPURenderer:f}},__vite__mapDeps([4,2,5,3]));e=u,i={...n,...n.webgpu};break}else if(l==="webgl"&&ub(n.failIfMajorPerformanceCaveat??ud.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:u}=await gs(async()=>{const{WebGLRenderer:f}=await import("./WebGLRenderer-BN_ZAk_s.js");return{WebGLRenderer:f}},__vite__mapDeps([6,2,5]));e=u,i={...n,...n.webgl};break}else if(l==="canvas")throw i={...n},new Error("CanvasRenderer is not yet implemented")}if(delete i.webgpu,delete i.webgl,!e)throw new Error("No available renderer for the current environment");const o=new e;return await o.init(i),o}const cd="8.8.1";class fd{static init(){var t;(t=globalThis.__PIXI_APP_INIT__)==null||t.call(globalThis,this,cd)}static destroy(){}}fd.extension=Mt.Application;class db{constructor(t){this._renderer=t}init(){var t;(t=globalThis.__PIXI_RENDERER_INIT__)==null||t.call(globalThis,this._renderer,cd)}destroy(){this._renderer=null}}db.extension={type:[Mt.WebGLSystem,Mt.WebGPUSystem],name:"initHook",priority:-10};const dd=class La{constructor(...t){this.stage=new En,t[0]!==void 0&&Rt($t,"Application constructor options are deprecated, please use Application.init() instead.")}async init(t){t={...t},this.renderer=await fb(t),La._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return Rt($t,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(t=!1,e=!1){const i=La._plugins.slice(0);i.reverse(),i.forEach(o=>{o.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};dd._plugins=[];let pd=dd;De.handleByList(Mt.Application,pd._plugins);De.add(fd);const bc=[{offset:0,color:"white"},{offset:1,color:"black"}],nh=class Ga{constructor(...t){this.uid=qt("fillGradient"),this.type="linear",this.colorStops=[];let e=pb(t);e={...e.type==="radial"?Ga.defaultRadialOptions:Ga.defaultLinearOptions,...Cf(e)},this._textureSize=e.textureSize,e.type==="radial"?(this.center=e.center,this.outerCenter=e.outerCenter??this.center,this.innerRadius=e.innerRadius,this.outerRadius=e.outerRadius,this.scale=e.scale,this.rotation=e.rotation):(this.start=e.start,this.end=e.end),this.textureSpace=e.textureSpace,this.type=e.type,e.colorStops.forEach(o=>{this.addColorStop(o.offset,o.color)})}addColorStop(t,e){return this.colorStops.push({offset:t,color:ae.shared.setValue(e).toHexa()}),this}buildLinearGradient(){if(this.texture)return;const t=this.colorStops.length?this.colorStops:bc,e=this._textureSize,{canvas:i,context:o}=Sc(e,1),a=o.createLinearGradient(0,0,this._textureSize,0);wc(a,t),o.fillStyle=a,o.fillRect(0,0,e,1),this.texture=new kt({source:new ms({resource:i})});const{x:l,y:u}=this.start,{x:f,y:d}=this.end,p=new bt,_=f-l,v=d-u,m=Math.sqrt(_*_+v*v),C=Math.atan2(v,_);p.scale(m/e,1),p.rotate(C),p.translate(l,u),this.textureSpace==="local"&&p.scale(e,e),this.transform=p}buildGradient(){this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const t=this.colorStops.length?this.colorStops:bc,e=this._textureSize,{canvas:i,context:o}=Sc(e,e),{x:a,y:l}=this.center,{x:u,y:f}=this.outerCenter,d=this.innerRadius,p=this.outerRadius,_=u-p,v=f-p,m=e/(p*2),C=(a-_)*m,M=(l-v)*m,w=o.createRadialGradient(C,M,d*m,(u-_)*m,(f-v)*m,p*m);wc(w,t),o.fillStyle=t[t.length-1].color,o.fillRect(0,0,e,e),o.fillStyle=w,o.translate(C,M),o.rotate(this.rotation),o.scale(1,this.scale),o.translate(-C,-M),o.fillRect(0,0,e,e),this.texture=new kt({source:new ms({resource:i,addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"})});const T=new bt;T.scale(1/m,1/m),T.translate(_,v),this.textureSpace==="local"&&T.scale(e,e),this.transform=T}get styleKey(){return this.uid}destroy(){var t;(t=this.texture)==null||t.destroy(!0),this.texture=null}};nh.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256};nh.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256};let qn=nh;function wc(n,t){for(let e=0;e<t.length;e++){const i=t[e];n.addColorStop(i.offset,i.color)}}function Sc(n,t){const e=Ve.get().createCanvas(n,t),i=e.getContext("2d");return{canvas:e,context:i}}function pb(n){let t=n[0]??{};return(typeof t=="number"||n[1])&&(Rt("8.5.2","use options object instead"),t={type:"linear",start:{x:n[0],y:n[1]},end:{x:n[2],y:n[3]},textureSpace:n[4],textureSize:n[5]??qn.defaultLinearOptions.textureSize}),t}const Cc={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class rh{constructor(t,e){this.uid=qt("fillPattern"),this.transform=new bt,this._styleKey=null,this.texture=t,this.transform.scale(1/t.frame.width,1/t.frame.height),e&&(t.source.style.addressModeU=Cc[e].addressModeU,t.source.style.addressModeV=Cc[e].addressModeV)}setTransform(t){const e=this.texture;this.transform.copyFrom(t),this.transform.invert(),this.transform.scale(1/e.frame.width,1/e.frame.height),this._styleKey=null}get styleKey(){return this._styleKey?this._styleKey:(this._styleKey=`fill-pattern-${this.uid}-${this.texture.uid}-${this.transform.toArray().join("-")}`,this._styleKey)}}var fa,Ac;function _b(){if(Ac)return fa;Ac=1,fa=e;var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function e(a){var l=[];return a.replace(t,function(u,f,d){var p=f.toLowerCase();for(d=o(d),p=="m"&&d.length>2&&(l.push([f].concat(d.splice(0,2))),p="l",f=f=="m"?"l":"L");;){if(d.length==n[p])return d.unshift(f),l.push(d);if(d.length<n[p])throw new Error("malformed path data");l.push([f].concat(d.splice(0,n[p])))}}),l}var i=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function o(a){var l=a.match(i);return l?l.map(Number):[]}return fa}var gb=_b();const mb=Ka(gb);function xb(n,t){const e=mb(n),i=[];let o=null,a=0,l=0;for(let u=0;u<e.length;u++){const f=e[u],d=f[0],p=f;switch(d){case"M":a=p[1],l=p[2],t.moveTo(a,l);break;case"m":a+=p[1],l+=p[2],t.moveTo(a,l);break;case"H":a=p[1],t.lineTo(a,l);break;case"h":a+=p[1],t.lineTo(a,l);break;case"V":l=p[1],t.lineTo(a,l);break;case"v":l+=p[1],t.lineTo(a,l);break;case"L":a=p[1],l=p[2],t.lineTo(a,l);break;case"l":a+=p[1],l+=p[2],t.lineTo(a,l);break;case"C":a=p[5],l=p[6],t.bezierCurveTo(p[1],p[2],p[3],p[4],a,l);break;case"c":t.bezierCurveTo(a+p[1],l+p[2],a+p[3],l+p[4],a+p[5],l+p[6]),a+=p[5],l+=p[6];break;case"S":a=p[3],l=p[4],t.bezierCurveToShort(p[1],p[2],a,l);break;case"s":t.bezierCurveToShort(a+p[1],l+p[2],a+p[3],l+p[4]),a+=p[3],l+=p[4];break;case"Q":a=p[3],l=p[4],t.quadraticCurveTo(p[1],p[2],a,l);break;case"q":t.quadraticCurveTo(a+p[1],l+p[2],a+p[3],l+p[4]),a+=p[3],l+=p[4];break;case"T":a=p[1],l=p[2],t.quadraticCurveToShort(a,l);break;case"t":a+=p[1],l+=p[2],t.quadraticCurveToShort(a,l);break;case"A":a=p[6],l=p[7],t.arcToSvg(p[1],p[2],p[3],p[4],p[5],a,l);break;case"a":a+=p[6],l+=p[7],t.arcToSvg(p[1],p[2],p[3],p[4],p[5],a,l);break;case"Z":case"z":t.closePath(),i.length>0&&(o=i.pop(),o?(a=o.startX,l=o.startY):(a=0,l=0)),o=null;break;default:Te(`Unknown SVG path command: ${d}`)}d!=="Z"&&d!=="z"&&o===null&&(o={startX:a,startY:l},i.push(o))}return t}class ih{constructor(t=0,e=0,i=0){this.type="circle",this.x=t,this.y=e,this.radius=i}clone(){return new ih(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;const i=this.radius*this.radius;let o=this.x-t,a=this.y-e;return o*=o,a*=a,o+a<=i}strokeContains(t,e,i,o=.5){if(this.radius===0)return!1;const a=this.x-t,l=this.y-e,u=this.radius,f=(1-o)*i,d=Math.sqrt(a*a+l*l);return d<=u+f&&d>u-(i-f)}getBounds(t){return t||(t=new ee),t.x=this.x-this.radius,t.y=this.y-this.radius,t.width=this.radius*2,t.height=this.radius*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.radius=t.radius,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class sh{constructor(t=0,e=0,i=0,o=0){this.type="ellipse",this.x=t,this.y=e,this.halfWidth=i,this.halfHeight=o}clone(){return new sh(this.x,this.y,this.halfWidth,this.halfHeight)}contains(t,e){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let i=(t-this.x)/this.halfWidth,o=(e-this.y)/this.halfHeight;return i*=i,o*=o,i+o<=1}strokeContains(t,e,i,o=.5){const{halfWidth:a,halfHeight:l}=this;if(a<=0||l<=0)return!1;const u=i*(1-o),f=i-u,d=a-f,p=l-f,_=a+u,v=l+u,m=t-this.x,C=e-this.y,M=m*m/(d*d)+C*C/(p*p),w=m*m/(_*_)+C*C/(v*v);return M>1&&w<=1}getBounds(t){return t||(t=new ee),t.x=this.x-this.halfWidth,t.y=this.y-this.halfHeight,t.width=this.halfWidth*2,t.height=this.halfHeight*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.halfWidth=t.halfWidth,this.halfHeight=t.halfHeight,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function yb(n,t,e,i,o,a){const l=n-e,u=t-i,f=o-e,d=a-i,p=l*f+u*d,_=f*f+d*d;let v=-1;_!==0&&(v=p/_);let m,C;v<0?(m=e,C=i):v>1?(m=o,C=a):(m=e+v*f,C=i+v*d);const M=n-m,w=t-C;return M*M+w*w}let vb,bb;class Vr{constructor(...t){this.type="polygon";let e=Array.isArray(t[0])?t[0]:t;if(typeof e[0]!="number"){const i=[];for(let o=0,a=e.length;o<a;o++)i.push(e[o].x,e[o].y);e=i}this.points=e,this.closePath=!0}isClockwise(){let t=0;const e=this.points,i=e.length;for(let o=0;o<i;o+=2){const a=e[o],l=e[o+1],u=e[(o+2)%i],f=e[(o+3)%i];t+=(u-a)*(f+l)}return t<0}containsPolygon(t){const e=this.getBounds(vb),i=t.getBounds(bb);if(!e.containsRect(i))return!1;const o=t.points;for(let a=0;a<o.length;a+=2){const l=o[a],u=o[a+1];if(!this.contains(l,u))return!1}return!0}clone(){const t=this.points.slice(),e=new Vr(t);return e.closePath=this.closePath,e}contains(t,e){let i=!1;const o=this.points.length/2;for(let a=0,l=o-1;a<o;l=a++){const u=this.points[a*2],f=this.points[a*2+1],d=this.points[l*2],p=this.points[l*2+1];f>e!=p>e&&t<(d-u)*((e-f)/(p-f))+u&&(i=!i)}return i}strokeContains(t,e,i,o=.5){const a=i*i,l=a*(1-o),u=a-l,{points:f}=this,d=f.length-(this.closePath?0:2);for(let p=0;p<d;p+=2){const _=f[p],v=f[p+1],m=f[(p+2)%f.length],C=f[(p+3)%f.length],M=yb(t,e,_,v,m,C),w=Math.sign((m-_)*(e-v)-(C-v)*(t-_));if(M<=(w<0?u:l))return!0}return!1}getBounds(t){t||(t=new ee);const e=this.points;let i=1/0,o=-1/0,a=1/0,l=-1/0;for(let u=0,f=e.length;u<f;u+=2){const d=e[u],p=e[u+1];i=d<i?d:i,o=d>o?d:o,a=p<a?p:a,l=p>l?p:l}return t.x=i,t.width=o-i,t.y=a,t.height=l-a,t}copyFrom(t){return this.points=t.points.slice(),this.closePath=t.closePath,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((t,e)=>`${t}, ${e}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}}const is=(n,t,e,i,o,a,l)=>{const u=n-e,f=t-i,d=Math.sqrt(u*u+f*f);return d>=o-a&&d<=o+l};class oh{constructor(t=0,e=0,i=0,o=0,a=20){this.type="roundedRectangle",this.x=t,this.y=e,this.width=i,this.height=o,this.radius=a}getBounds(t){return t||(t=new ee),t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}clone(){return new oh(this.x,this.y,this.width,this.height,this.radius)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){const i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+i&&e<=this.y+this.height-i||t>=this.x+i&&t<=this.x+this.width-i)return!0;let o=t-(this.x+i),a=e-(this.y+i);const l=i*i;if(o*o+a*a<=l||(o=t-(this.x+this.width-i),o*o+a*a<=l)||(a=e-(this.y+this.height-i),o*o+a*a<=l)||(o=t-(this.x+i),o*o+a*a<=l))return!0}return!1}strokeContains(t,e,i,o=.5){const{x:a,y:l,width:u,height:f,radius:d}=this,p=i*(1-o),_=i-p,v=a+d,m=l+d,C=u-d*2,M=f-d*2,w=a+u,T=l+f;return(t>=a-p&&t<=a+_||t>=w-_&&t<=w+p)&&e>=m&&e<=m+M||(e>=l-p&&e<=l+_||e>=T-_&&e<=T+p)&&t>=v&&t<=v+C?!0:t<v&&e<m&&is(t,e,v,m,d,_,p)||t>w-d&&e<m&&is(t,e,w-d,m,d,_,p)||t>w-d&&e>T-d&&is(t,e,w-d,T-d,d,_,p)||t<v&&e>T-d&&is(t,e,v,T-d,d,_,p)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const wb=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function Sb(n){let t="";for(let e=0;e<n;++e)e>0&&(t+=`
else `),e<n-1&&(t+=`if(test == ${e}.0){}`);return t}function Cb(n,t){if(n===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const e=t.createShader(t.FRAGMENT_SHADER);try{for(;;){const i=wb.replace(/%forloop%/gi,Sb(n));if(t.shaderSource(e,i),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))n=n/2|0;else break}}finally{t.deleteShader(e)}return n}let cr=null;function _d(){var t;if(cr)return cr;const n=td();return cr=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),cr=Cb(cr,n),(t=n.getExtension("WEBGL_lose_context"))==null||t.loseContext(),cr}const gd={};function Ab(n,t){let e=2166136261;for(let i=0;i<t;i++)e^=n[i].uid,e=Math.imul(e,16777619),e>>>=0;return gd[e]||Pb(n,t,e)}let da=0;function Pb(n,t,e){const i={};let o=0;da||(da=_d());for(let l=0;l<da;l++){const u=l<t?n[l]:kt.EMPTY.source;i[o++]=u.source,i[o++]=u.style}const a=new cs(i);return gd[e]=a,a}class Pc{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}function Tc(n,t){const e=n.byteLength/8|0,i=new Float64Array(n,0,e);new Float64Array(t,0,e).set(i);const a=n.byteLength-e*8;if(a>0){const l=new Uint8Array(n,e*8,a);new Uint8Array(t,e*8,a).set(l)}}const Tb={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var Mb=(n=>(n[n.DISABLED=0]="DISABLED",n[n.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",n[n.MASK_ACTIVE=2]="MASK_ACTIVE",n[n.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",n[n.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",n[n.NONE=5]="NONE",n))(Mb||{});function Mc(n,t){return t.alphaMode==="no-premultiply-alpha"&&Tb[n]||n}class Ib{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let t=0;t<this.count;t++){const e=this.textures[t];this.textures[t]=null,this.ids[e.uid]=null}this.count=0}}class Eb{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new Ib,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const md=[];let Oa=0;function Ic(){return Oa>0?md[--Oa]:new Eb}function Ec(n){md[Oa++]=n}let Ur=0;const xd=class fs{constructor(t={}){this.uid=qt("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],fs.defaultOptions.maxTextures=fs.defaultOptions.maxTextures??_d(),t={...fs.defaultOptions,...t};const{maxTextures:e,attributesInitialSize:i,indicesInitialSize:o}=t;this.attributeBuffer=new Pc(i*4),this.indexBuffer=new Uint16Array(o),this.maxTextures=e}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let t=0;t<this.batchIndex;t++)Ec(this.batches[t]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(t){this._elements[this.elementSize++]=t,t._indexStart=this.indexSize,t._attributeStart=this.attributeSize,t._batcher=this,this.indexSize+=t.indexSize,this.attributeSize+=t.attributeSize*this.vertexSize}checkAndUpdateTexture(t,e){const i=t._batch.textures.ids[e._source.uid];return!i&&i!==0?!1:(t._textureId=i,t.texture=e,!0)}updateElement(t){this.dirty=!0;const e=this.attributeBuffer;t.packAsQuad?this.packQuadAttributes(t,e.float32View,e.uint32View,t._attributeStart,t._textureId):this.packAttributes(t,e.float32View,e.uint32View,t._attributeStart,t._textureId)}break(t){const e=this._elements;if(!e[this.elementStart])return;let i=Ic(),o=i.textures;o.clear();const a=e[this.elementStart];let l=Mc(a.blendMode,a.texture._source),u=a.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const f=this.attributeBuffer.float32View,d=this.attributeBuffer.uint32View,p=this.indexBuffer;let _=this._batchIndexSize,v=this._batchIndexStart,m="startBatch";const C=this.maxTextures;for(let M=this.elementStart;M<this.elementSize;++M){const w=e[M];e[M]=null;const R=w.texture._source,F=Mc(w.blendMode,R),D=l!==F||u!==w.topology;if(R._batchTick===Ur&&!D){w._textureId=R._textureBindLocation,_+=w.indexSize,w.packAsQuad?(this.packQuadAttributes(w,f,d,w._attributeStart,w._textureId),this.packQuadIndex(p,w._indexStart,w._attributeStart/this.vertexSize)):(this.packAttributes(w,f,d,w._attributeStart,w._textureId),this.packIndex(w,p,w._indexStart,w._attributeStart/this.vertexSize)),w._batch=i;continue}R._batchTick=Ur,(o.count>=C||D)&&(this._finishBatch(i,v,_-v,o,l,u,t,m),m="renderBatch",v=_,l=F,u=w.topology,i=Ic(),o=i.textures,o.clear(),++Ur),w._textureId=R._textureBindLocation=o.count,o.ids[R.uid]=o.count,o.textures[o.count++]=R,w._batch=i,_+=w.indexSize,w.packAsQuad?(this.packQuadAttributes(w,f,d,w._attributeStart,w._textureId),this.packQuadIndex(p,w._indexStart,w._attributeStart/this.vertexSize)):(this.packAttributes(w,f,d,w._attributeStart,w._textureId),this.packIndex(w,p,w._indexStart,w._attributeStart/this.vertexSize))}o.count>0&&(this._finishBatch(i,v,_-v,o,l,u,t,m),v=_,++Ur),this.elementStart=this.elementSize,this._batchIndexStart=v,this._batchIndexSize=_}_finishBatch(t,e,i,o,a,l,u,f){t.gpuBindGroup=null,t.bindGroup=null,t.action=f,t.batcher=this,t.textures=o,t.blendMode=a,t.topology=l,t.start=e,t.size=i,++Ur,this.batches[this.batchIndex++]=t,u.add(t)}finish(t){this.break(t)}ensureAttributeBuffer(t){t*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(t*4)}ensureIndexBuffer(t){t<=this.indexBuffer.length||this._resizeIndexBuffer(t)}_resizeAttributeBuffer(t){const e=Math.max(t,this.attributeBuffer.size*2),i=new Pc(e);Tc(this.attributeBuffer.rawBinaryData,i.rawBinaryData),this.attributeBuffer=i}_resizeIndexBuffer(t){const e=this.indexBuffer;let i=Math.max(t,e.length*1.5);i+=i%2;const o=i>65535?new Uint32Array(i):new Uint16Array(i);if(o.BYTES_PER_ELEMENT!==e.BYTES_PER_ELEMENT)for(let a=0;a<e.length;a++)o[a]=e[a];else Tc(e.buffer,o.buffer);this.indexBuffer=o}packQuadIndex(t,e,i){t[e]=i+0,t[e+1]=i+1,t[e+2]=i+2,t[e+3]=i+0,t[e+4]=i+2,t[e+5]=i+3}packIndex(t,e,i,o){const a=t.indices,l=t.indexSize,u=t.indexOffset,f=t.attributeOffset;for(let d=0;d<l;d++)e[i++]=o+a[d+u]-f}destroy(){for(let t=0;t<this.batches.length;t++)Ec(this.batches[t]);this.batches=null;for(let t=0;t<this._elements.length;t++)this._elements[t]._batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}};xd.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let Rb=xd;var xe=(n=>(n[n.MAP_READ=1]="MAP_READ",n[n.MAP_WRITE=2]="MAP_WRITE",n[n.COPY_SRC=4]="COPY_SRC",n[n.COPY_DST=8]="COPY_DST",n[n.INDEX=16]="INDEX",n[n.VERTEX=32]="VERTEX",n[n.UNIFORM=64]="UNIFORM",n[n.STORAGE=128]="STORAGE",n[n.INDIRECT=256]="INDIRECT",n[n.QUERY_RESOLVE=512]="QUERY_RESOLVE",n[n.STATIC=1024]="STATIC",n))(xe||{});class Qr extends rn{constructor(t){let{data:e,size:i}=t;const{usage:o,label:a,shrinkToFit:l}=t;super(),this.uid=qt("buffer"),this._resourceType="buffer",this._resourceId=qt("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,e instanceof Array&&(e=new Float32Array(e)),this._data=e,i??(i=e==null?void 0:e.byteLength);const u=!!e;this.descriptor={size:i,usage:o,mappedAtCreation:u,label:a},this.shrinkToFit=l??!0}get data(){return this._data}set data(t){this.setDataWithSize(t,t.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&xe.STATIC)}set static(t){t?this.descriptor.usage|=xe.STATIC:this.descriptor.usage&=~xe.STATIC}setDataWithSize(t,e,i){if(this._updateID++,this._updateSize=e*t.BYTES_PER_ELEMENT,this._data===t){i&&this.emit("update",this);return}const o=this._data;if(this._data=t,this._dataInt32=null,!o||o.length!==t.length){!this.shrinkToFit&&o&&t.byteLength<o.byteLength?i&&this.emit("update",this):(this.descriptor.size=t.byteLength,this._resourceId=qt("resource"),this.emit("change",this));return}i&&this.emit("update",this)}update(t){this._updateSize=t??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function yd(n,t){if(!(n instanceof Qr)){let e=t?xe.INDEX:xe.VERTEX;n instanceof Array&&(t?(n=new Uint32Array(n),e=xe.INDEX|xe.COPY_DST):(n=new Float32Array(n),e=xe.VERTEX|xe.COPY_DST)),n=new Qr({data:n,label:t?"index-mesh-buffer":"vertex-mesh-buffer",usage:e})}return n}function kb(n,t,e){const i=n.getAttribute(t);if(!i)return e.minX=0,e.minY=0,e.maxX=0,e.maxY=0,e;const o=i.buffer.data;let a=1/0,l=1/0,u=-1/0,f=-1/0;const d=o.BYTES_PER_ELEMENT,p=(i.offset||0)/d,_=(i.stride||2*4)/d;for(let v=p;v<o.length;v+=_){const m=o[v],C=o[v+1];m>u&&(u=m),C>f&&(f=C),m<a&&(a=m),C<l&&(l=C)}return e.minX=a,e.minY=l,e.maxX=u,e.maxY=f,e}function Fb(n){return(n instanceof Qr||Array.isArray(n)||n.BYTES_PER_ELEMENT)&&(n={buffer:n}),n.buffer=yd(n.buffer,!1),n}class Bb extends rn{constructor(t={}){super(),this.uid=qt("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new qe,this._boundsDirty=!0;const{attributes:e,indexBuffer:i,topology:o}=t;if(this.buffers=[],this.attributes={},e)for(const a in e)this.addAttribute(a,e[a]);this.instanceCount=t.instanceCount??1,i&&this.addIndex(i),this.topology=o||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(t){return this.attributes[t]}getIndex(){return this.indexBuffer}getBuffer(t){return this.getAttribute(t).buffer}getSize(){for(const t in this.attributes){const e=this.attributes[t];return e.buffer.data.length/(e.stride/4||e.size)}return 0}addAttribute(t,e){const i=Fb(e);this.buffers.indexOf(i.buffer)===-1&&(this.buffers.push(i.buffer),i.buffer.on("update",this.onBufferUpdate,this),i.buffer.on("change",this.onBufferUpdate,this)),this.attributes[t]=i}addIndex(t){this.indexBuffer=yd(t,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,kb(this,"aPosition",this._bounds)):this._bounds}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners(),t&&this.buffers.forEach(e=>e.destroy()),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const Lb=new Float32Array(1),Gb=new Uint32Array(1);class Ob extends Bb{constructor(){const e=new Qr({data:Lb,label:"attribute-batch-buffer",usage:xe.VERTEX|xe.COPY_DST,shrinkToFit:!1}),i=new Qr({data:Gb,label:"index-batch-buffer",usage:xe.INDEX|xe.COPY_DST,shrinkToFit:!1}),o=6*4;super({attributes:{aPosition:{buffer:e,format:"float32x2",stride:o,offset:0},aUV:{buffer:e,format:"float32x2",stride:o,offset:2*4},aColor:{buffer:e,format:"unorm8x4",stride:o,offset:4*4},aTextureIdAndRound:{buffer:e,format:"uint16x2",stride:o,offset:5*4}},indexBuffer:i})}}function Rc(n,t,e){if(n)for(const i in n){const o=i.toLocaleLowerCase(),a=t[o];if(a){let l=n[i];i==="header"&&(l=l.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),e&&a.push(`//----${e}----//`),a.push(l)}else Te(`${i} placement hook does not exist in shader`)}}const Db=/\{\{(.*?)\}\}/g;function kc(n){var i;const t={};return(((i=n.match(Db))==null?void 0:i.map(o=>o.replace(/[{()}]/g,"")))??[]).forEach(o=>{t[o]=[]}),t}function Fc(n,t){let e;const i=/@in\s+([^;]+);/g;for(;(e=i.exec(n))!==null;)t.push(e[1])}function Bc(n,t,e=!1){const i=[];Fc(t,i),n.forEach(u=>{u.header&&Fc(u.header,i)});const o=i;e&&o.sort();const a=o.map((u,f)=>`       @location(${f}) ${u},`).join(`
`);let l=t.replace(/@in\s+[^;]+;\s*/g,"");return l=l.replace("{{in}}",`
${a}
`),l}function Lc(n,t){let e;const i=/@out\s+([^;]+);/g;for(;(e=i.exec(n))!==null;)t.push(e[1])}function Ub(n){const e=/\b(\w+)\s*:/g.exec(n);return e?e[1]:""}function Wb(n){const t=/@.*?\s+/g;return n.replace(t,"")}function Nb(n,t){const e=[];Lc(t,e),n.forEach(f=>{f.header&&Lc(f.header,e)});let i=0;const o=e.sort().map(f=>f.indexOf("builtin")>-1?f:`@location(${i++}) ${f}`).join(`,
`),a=e.sort().map(f=>`       var ${Wb(f)};`).join(`
`),l=`return VSOutput(
            ${e.sort().map(f=>` ${Ub(f)}`).join(`,
`)});`;let u=t.replace(/@out\s+[^;]+;\s*/g,"");return u=u.replace("{{struct}}",`
${o}
`),u=u.replace("{{start}}",`
${a}
`),u=u.replace("{{return}}",`
${l}
`),u}function Gc(n,t){let e=n;for(const i in t){const o=t[i];o.join(`
`).length?e=e.replace(`{{${i}}}`,`//-----${i} START-----//
${o.join(`
`)}
//----${i} FINISH----//`):e=e.replace(`{{${i}}}`,"")}return e}const In=Object.create(null),pa=new Map;let $b=0;function zb({template:n,bits:t}){const e=vd(n,t);if(In[e])return In[e];const{vertex:i,fragment:o}=Yb(n,t);return In[e]=bd(i,o,t),In[e]}function Hb({template:n,bits:t}){const e=vd(n,t);return In[e]||(In[e]=bd(n.vertex,n.fragment,t)),In[e]}function Yb(n,t){const e=t.map(l=>l.vertex).filter(l=>!!l),i=t.map(l=>l.fragment).filter(l=>!!l);let o=Bc(e,n.vertex,!0);o=Nb(e,o);const a=Bc(i,n.fragment,!0);return{vertex:o,fragment:a}}function vd(n,t){return t.map(e=>(pa.has(e)||pa.set(e,$b++),pa.get(e))).sort((e,i)=>e-i).join("-")+n.vertex+n.fragment}function bd(n,t,e){const i=kc(n),o=kc(t);return e.forEach(a=>{Rc(a.vertex,i,a.name),Rc(a.fragment,o,a.name)}),{vertex:Gc(n,i),fragment:Gc(t,o)}}const Xb=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}
        
        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);
       
        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,Vb=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;
   
    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {
        
        {{start}}

        var outColor:vec4<f32>;
      
        {{main}}
        
        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,qb=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;
        
        {{start}}
        
        vColor = vec4(1.);
        
        {{main}}
        
        vUV = uv;
        
        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,Kb=`
   
    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {
        
        {{start}}

        vec4 outColor;
      
        {{main}}
        
        finalColor = outColor * vColor;
        
        {{end}}
    }
`,Zb={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},jb={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function Qb({bits:n,name:t}){const e=zb({template:{fragment:Vb,vertex:Xb},bits:[Zb,...n]});return Cs.from({name:t,vertex:{source:e.vertex,entryPoint:"main"},fragment:{source:e.fragment,entryPoint:"main"}})}function Jb({bits:n,name:t}){return new nd({name:t,...Hb({template:{vertex:qb,fragment:Kb},bits:[jb,...n]})})}const tw={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},ew={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},_a={};function nw(n){const t=[];if(n===1)t.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),t.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let e=0;for(let i=0;i<n;i++)t.push(`@group(1) @binding(${e++}) var textureSource${i+1}: texture_2d<f32>;`),t.push(`@group(1) @binding(${e++}) var textureSampler${i+1}: sampler;`)}return t.join(`
`)}function rw(n){const t=[];if(n===1)t.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{t.push("switch vTextureId {");for(let e=0;e<n;e++)e===n-1?t.push("  default:{"):t.push(`  case ${e}:{`),t.push(`      outColor = textureSampleGrad(textureSource${e+1}, textureSampler${e+1}, vUV, uvDx, uvDy);`),t.push("      break;}");t.push("}")}return t.join(`
`)}function iw(n){return _a[n]||(_a[n]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${nw(n)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${rw(n)}
            `}}),_a[n]}const ga={};function sw(n){const t=[];for(let e=0;e<n;e++)e>0&&t.push("else"),e<n-1&&t.push(`if(vTextureId < ${e}.5)`),t.push("{"),t.push(`	outColor = texture(uTextures[${e}], vUV);`),t.push("}");return t.join(`
`)}function ow(n){return ga[n]||(ga[n]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${n}];

            `,main:`

                ${sw(n)}
            `}}),ga[n]}const aw={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32> 
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},hw={name:"round-pixels-bit",vertex:{header:`   
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {       
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},Oc={};function lw(n){let t=Oc[n];if(t)return t;const e=new Int32Array(n);for(let i=0;i<n;i++)e[i]=i;return t=Oc[n]=new od({uTextures:{value:e,type:"i32",size:n}},{isStatic:!0}),t}class uw extends eh{constructor(t){const e=Jb({name:"batch",bits:[ew,ow(t),hw]}),i=Qb({name:"batch",bits:[tw,iw(t),aw]});super({glProgram:e,gpuProgram:i,resources:{batchSamplers:lw(t)}})}}let Dc=null;const wd=class Sd extends Rb{constructor(){super(...arguments),this.geometry=new Ob,this.shader=Dc||(Dc=new uw(this.maxTextures)),this.name=Sd.extension.name,this.vertexSize=6}packAttributes(t,e,i,o,a){const l=a<<16|t.roundPixels&65535,u=t.transform,f=u.a,d=u.b,p=u.c,_=u.d,v=u.tx,m=u.ty,{positions:C,uvs:M}=t,w=t.color,T=t.attributeOffset,R=T+t.attributeSize;for(let F=T;F<R;F++){const D=F*2,X=C[D],z=C[D+1];e[o++]=f*X+p*z+v,e[o++]=_*z+d*X+m,e[o++]=M[D],e[o++]=M[D+1],i[o++]=w,i[o++]=l}}packQuadAttributes(t,e,i,o,a){const l=t.texture,u=t.transform,f=u.a,d=u.b,p=u.c,_=u.d,v=u.tx,m=u.ty,C=t.bounds,M=C.maxX,w=C.minX,T=C.maxY,R=C.minY,F=l.uvs,D=t.color,X=a<<16|t.roundPixels&65535;e[o+0]=f*w+p*R+v,e[o+1]=_*R+d*w+m,e[o+2]=F.x0,e[o+3]=F.y0,i[o+4]=D,i[o+5]=X,e[o+6]=f*M+p*R+v,e[o+7]=_*R+d*M+m,e[o+8]=F.x1,e[o+9]=F.y1,i[o+10]=D,i[o+11]=X,e[o+12]=f*M+p*T+v,e[o+13]=_*T+d*M+m,e[o+14]=F.x2,e[o+15]=F.y2,i[o+16]=D,i[o+17]=X,e[o+18]=f*w+p*T+v,e[o+19]=_*T+d*w+m,e[o+20]=F.x3,e[o+21]=F.y3,i[o+22]=D,i[o+23]=X}};wd.extension={type:[Mt.Batcher],name:"default"};let cw=wd;function fw(n,t,e,i,o,a,l,u=null){let f=0;e*=t,o*=a;const d=u.a,p=u.b,_=u.c,v=u.d,m=u.tx,C=u.ty;for(;f<l;){const M=n[e],w=n[e+1];i[o]=d*M+_*w+m,i[o+1]=p*M+v*w+C,o+=a,e+=t,f++}}function dw(n,t,e,i){let o=0;for(t*=e;o<i;)n[t]=0,n[t+1]=0,t+=e,o++}function Cd(n,t,e,i,o){const a=t.a,l=t.b,u=t.c,f=t.d,d=t.tx,p=t.ty;e||(e=0),i||(i=2),o||(o=n.length/i-e);let _=e*i;for(let v=0;v<o;v++){const m=n[_],C=n[_+1];n[_]=a*m+u*C+d,n[_+1]=l*m+f*C+p,_+=i}}const pw=new bt;class Ad{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const t=this.baseColor,e=t>>16|t&65280|(t&255)<<16,i=this.renderable;return i?Bf(e,i.groupColor)+(this.alpha*i.groupAlpha*255<<24):e+(this.alpha*255<<24)}get transform(){var t;return((t=this.renderable)==null?void 0:t.groupTransform)||pw}copyTo(t){t.indexOffset=this.indexOffset,t.indexSize=this.indexSize,t.attributeOffset=this.attributeOffset,t.attributeSize=this.attributeSize,t.baseColor=this.baseColor,t.alpha=this.alpha,t.texture=this.texture,t.geometryData=this.geometryData,t.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}}const Jr={extension:{type:Mt.ShapeBuilder,name:"circle"},build(n,t){let e,i,o,a,l,u;if(n.type==="circle"){const D=n;e=D.x,i=D.y,l=u=D.radius,o=a=0}else if(n.type==="ellipse"){const D=n;e=D.x,i=D.y,l=D.halfWidth,u=D.halfHeight,o=a=0}else{const D=n,X=D.width/2,z=D.height/2;e=D.x+X,i=D.y+z,l=u=Math.max(0,Math.min(D.radius,Math.min(X,z))),o=X-l,a=z-u}if(!(l>=0&&u>=0&&o>=0&&a>=0))return t;const f=Math.ceil(2.3*Math.sqrt(l+u)),d=f*8+(o?4:0)+(a?4:0);if(d===0)return t;if(f===0)return t[0]=t[6]=e+o,t[1]=t[3]=i+a,t[2]=t[4]=e-o,t[5]=t[7]=i-a,t;let p=0,_=f*4+(o?2:0)+2,v=_,m=d,C=o+l,M=a,w=e+C,T=e-C,R=i+M;if(t[p++]=w,t[p++]=R,t[--_]=R,t[--_]=T,a){const D=i-M;t[v++]=T,t[v++]=D,t[--m]=D,t[--m]=w}for(let D=1;D<f;D++){const X=Math.PI/2*(D/f),z=o+Math.cos(X)*l,$=a+Math.sin(X)*u,rt=e+z,et=e-z,Z=i+$,K=i-$;t[p++]=rt,t[p++]=Z,t[--_]=Z,t[--_]=et,t[v++]=et,t[v++]=K,t[--m]=K,t[--m]=rt}C=o,M=a+u,w=e+C,T=e-C,R=i+M;const F=i-M;return t[p++]=w,t[p++]=R,t[--m]=F,t[--m]=w,o&&(t[p++]=T,t[p++]=R,t[--m]=F,t[--m]=T),t},triangulate(n,t,e,i,o,a){if(n.length===0)return;let l=0,u=0;for(let p=0;p<n.length;p+=2)l+=n[p],u+=n[p+1];l/=n.length/2,u/=n.length/2;let f=i;t[f*e]=l,t[f*e+1]=u;const d=f++;for(let p=0;p<n.length;p+=2)t[f*e]=n[p],t[f*e+1]=n[p+1],p>0&&(o[a++]=f,o[a++]=d,o[a++]=f-1),f++;o[a++]=d+1,o[a++]=d,o[a++]=f-1}},_w={...Jr,extension:{...Jr.extension,name:"ellipse"}},gw={...Jr,extension:{...Jr.extension,name:"roundedRectangle"}},Pd=1e-4,Uc=1e-4;function mw(n){const t=n.length;if(t<6)return 1;let e=0;for(let i=0,o=n[t-2],a=n[t-1];i<t;i+=2){const l=n[i],u=n[i+1];e+=(l-o)*(u+a),o=l,a=u}return e<0?-1:1}function Wc(n,t,e,i,o,a,l,u){const f=n-e*o,d=t-i*o,p=n+e*a,_=t+i*a;let v,m;l?(v=i,m=-e):(v=-i,m=e);const C=f+v,M=d+m,w=p+v,T=_+m;return u.push(C,M),u.push(w,T),2}function Wn(n,t,e,i,o,a,l,u){const f=e-n,d=i-t;let p=Math.atan2(f,d),_=Math.atan2(o-n,a-t);u&&p<_?p+=Math.PI*2:!u&&p>_&&(_+=Math.PI*2);let v=p;const m=_-p,C=Math.abs(m),M=Math.sqrt(f*f+d*d),w=(15*C*Math.sqrt(M)/Math.PI>>0)+1,T=m/w;if(v+=T,u){l.push(n,t),l.push(e,i);for(let R=1,F=v;R<w;R++,F+=T)l.push(n,t),l.push(n+Math.sin(F)*M,t+Math.cos(F)*M);l.push(n,t),l.push(o,a)}else{l.push(e,i),l.push(n,t);for(let R=1,F=v;R<w;R++,F+=T)l.push(n+Math.sin(F)*M,t+Math.cos(F)*M),l.push(n,t);l.push(o,a),l.push(n,t)}return w*2}function xw(n,t,e,i,o,a){const l=Pd;if(n.length===0)return;const u=t;let f=u.alignment;if(t.alignment!==.5){let L=mw(n);f=(f-.5)*L+.5}const d=new oe(n[0],n[1]),p=new oe(n[n.length-2],n[n.length-1]),_=i,v=Math.abs(d.x-p.x)<l&&Math.abs(d.y-p.y)<l;if(_){n=n.slice(),v&&(n.pop(),n.pop(),p.set(n[n.length-2],n[n.length-1]));const L=(d.x+p.x)*.5,O=(p.y+d.y)*.5;n.unshift(L,O),n.push(L,O)}const m=o,C=n.length/2;let M=n.length;const w=m.length/2,T=u.width/2,R=T*T,F=u.miterLimit*u.miterLimit;let D=n[0],X=n[1],z=n[2],$=n[3],rt=0,et=0,Z=-(X-$),K=D-z,yt=0,At=0,zt=Math.sqrt(Z*Z+K*K);Z/=zt,K/=zt,Z*=T,K*=T;const Ue=f,b=(1-Ue)*2,P=Ue*2;_||(u.cap==="round"?M+=Wn(D-Z*(b-P)*.5,X-K*(b-P)*.5,D-Z*b,X-K*b,D+Z*P,X+K*P,m,!0)+2:u.cap==="square"&&(M+=Wc(D,X,Z,K,b,P,!0,m))),m.push(D-Z*b,X-K*b),m.push(D+Z*P,X+K*P);for(let L=1;L<C-1;++L){D=n[(L-1)*2],X=n[(L-1)*2+1],z=n[L*2],$=n[L*2+1],rt=n[(L+1)*2],et=n[(L+1)*2+1],Z=-(X-$),K=D-z,zt=Math.sqrt(Z*Z+K*K),Z/=zt,K/=zt,Z*=T,K*=T,yt=-($-et),At=z-rt,zt=Math.sqrt(yt*yt+At*At),yt/=zt,At/=zt,yt*=T,At*=T;const O=z-D,W=X-$,H=z-rt,V=et-$,it=O*H+W*V,Q=W*H-V*O,mt=Q<0;if(Math.abs(Q)<.001*Math.abs(it)){m.push(z-Z*b,$-K*b),m.push(z+Z*P,$+K*P),it>=0&&(u.join==="round"?M+=Wn(z,$,z-Z*b,$-K*b,z-yt*b,$-At*b,m,!1)+4:M+=2,m.push(z-yt*P,$-At*P),m.push(z+yt*b,$+At*b));continue}const St=(-Z+D)*(-K+$)-(-Z+z)*(-K+X),ft=(-yt+rt)*(-At+$)-(-yt+z)*(-At+et),It=(O*ft-H*St)/Q,vt=(V*St-W*ft)/Q,fe=(It-z)*(It-z)+(vt-$)*(vt-$),jt=z+(It-z)*b,ye=$+(vt-$)*b,Ut=z-(It-z)*P,at=$-(vt-$)*P,xt=Math.min(O*O+W*W,H*H+V*V),Me=mt?b:P,ri=xt+Me*Me*R;fe<=ri?u.join==="bevel"||fe/R>F?(mt?(m.push(jt,ye),m.push(z+Z*P,$+K*P),m.push(jt,ye),m.push(z+yt*P,$+At*P)):(m.push(z-Z*b,$-K*b),m.push(Ut,at),m.push(z-yt*b,$-At*b),m.push(Ut,at)),M+=2):u.join==="round"?mt?(m.push(jt,ye),m.push(z+Z*P,$+K*P),M+=Wn(z,$,z+Z*P,$+K*P,z+yt*P,$+At*P,m,!0)+4,m.push(jt,ye),m.push(z+yt*P,$+At*P)):(m.push(z-Z*b,$-K*b),m.push(Ut,at),M+=Wn(z,$,z-Z*b,$-K*b,z-yt*b,$-At*b,m,!1)+4,m.push(z-yt*b,$-At*b),m.push(Ut,at)):(m.push(jt,ye),m.push(Ut,at)):(m.push(z-Z*b,$-K*b),m.push(z+Z*P,$+K*P),u.join==="round"?mt?M+=Wn(z,$,z+Z*P,$+K*P,z+yt*P,$+At*P,m,!0)+2:M+=Wn(z,$,z-Z*b,$-K*b,z-yt*b,$-At*b,m,!1)+2:u.join==="miter"&&fe/R<=F&&(mt?(m.push(Ut,at),m.push(Ut,at)):(m.push(jt,ye),m.push(jt,ye)),M+=2),m.push(z-yt*b,$-At*b),m.push(z+yt*P,$+At*P),M+=2)}D=n[(C-2)*2],X=n[(C-2)*2+1],z=n[(C-1)*2],$=n[(C-1)*2+1],Z=-(X-$),K=D-z,zt=Math.sqrt(Z*Z+K*K),Z/=zt,K/=zt,Z*=T,K*=T,m.push(z-Z*b,$-K*b),m.push(z+Z*P,$+K*P),_||(u.cap==="round"?M+=Wn(z-Z*(b-P)*.5,$-K*(b-P)*.5,z-Z*b,$-K*b,z+Z*P,$+K*P,m,!1)+2:u.cap==="square"&&(M+=Wc(z,$,Z,K,b,P,!1,m)));const I=Uc*Uc;for(let L=w;L<M+w-2;++L)D=m[L*2],X=m[L*2+1],z=m[(L+1)*2],$=m[(L+1)*2+1],rt=m[(L+2)*2],et=m[(L+2)*2+1],!(Math.abs(D*($-et)+z*(et-X)+rt*(X-$))<I)&&a.push(L,L+1,L+2)}function yw(n,t,e,i){const o=Pd;if(n.length===0)return;const a=n[0],l=n[1],u=n[n.length-2],f=n[n.length-1],d=t||Math.abs(a-u)<o&&Math.abs(l-f)<o,p=e,_=n.length/2,v=p.length/2;for(let m=0;m<_;m++)p.push(n[m*2]),p.push(n[m*2+1]);for(let m=0;m<_-1;m++)i.push(v+m,v+m+1);d&&i.push(v+_-1,v)}function Td(n,t,e,i,o,a,l){const u=ab(n,t,2);if(!u)return;for(let d=0;d<u.length;d+=3)a[l++]=u[d]+o,a[l++]=u[d+1]+o,a[l++]=u[d+2]+o;let f=o*i;for(let d=0;d<n.length;d+=2)e[f]=n[d],e[f+1]=n[d+1],f+=i}const vw=[],bw={extension:{type:Mt.ShapeBuilder,name:"polygon"},build(n,t){for(let e=0;e<n.points.length;e++)t[e]=n.points[e];return t},triangulate(n,t,e,i,o,a){Td(n,vw,t,e,i,o,a)}},ww={extension:{type:Mt.ShapeBuilder,name:"rectangle"},build(n,t){const e=n,i=e.x,o=e.y,a=e.width,l=e.height;return a>=0&&l>=0&&(t[0]=i,t[1]=o,t[2]=i+a,t[3]=o,t[4]=i+a,t[5]=o+l,t[6]=i,t[7]=o+l),t},triangulate(n,t,e,i,o,a){let l=0;i*=e,t[i+l]=n[0],t[i+l+1]=n[1],l+=e,t[i+l]=n[2],t[i+l+1]=n[3],l+=e,t[i+l]=n[6],t[i+l+1]=n[7],l+=e,t[i+l]=n[4],t[i+l+1]=n[5],l+=e;const u=i/e;o[a++]=u,o[a++]=u+1,o[a++]=u+2,o[a++]=u+1,o[a++]=u+3,o[a++]=u+2}},Sw={extension:{type:Mt.ShapeBuilder,name:"triangle"},build(n,t){return t[0]=n.x,t[1]=n.y,t[2]=n.x2,t[3]=n.y2,t[4]=n.x3,t[5]=n.y3,t},triangulate(n,t,e,i,o,a){let l=0;i*=e,t[i+l]=n[0],t[i+l+1]=n[1],l+=e,t[i+l]=n[2],t[i+l+1]=n[3],l+=e,t[i+l]=n[4],t[i+l+1]=n[5];const u=i/e;o[a++]=u,o[a++]=u+1,o[a++]=u+2}},Cw=new bt,Aw=new ee;function Pw(n,t,e,i){const o=t.matrix?n.copyFrom(t.matrix).invert():n.identity();if(t.textureSpace==="local"){const a=e.getBounds(Aw);o.translate(-a.x,-a.y),o.scale(1/a.width,1/a.height)}else{o.translate(t.texture.frame.x,t.texture.frame.y),o.scale(1/t.texture.source.width,1/t.texture.source.height);const a=t.texture.source.style;a.addressMode==="clamp-to-edge"&&(a.addressMode="repeat",a.update())}return i&&o.append(Cw.copyFrom(i).invert()),o}const As={};De.handleByMap(Mt.ShapeBuilder,As);De.add(ww,bw,Sw,Jr,_w,gw);const Tw=new ee,Mw=new bt;function Iw(n,t){const{geometryData:e,batches:i}=t;i.length=0,e.indices.length=0,e.vertices.length=0,e.uvs.length=0;for(let o=0;o<n.instructions.length;o++){const a=n.instructions[o];if(a.action==="texture")Ew(a.data,i,e);else if(a.action==="fill"||a.action==="stroke"){const l=a.action==="stroke",u=a.data.path.shapePath,f=a.data.style,d=a.data.hole;l&&d&&Nc(d.shapePath,f,!0,i,e),d&&(u.shapePrimitives[u.shapePrimitives.length-1].holes=d.shapePath.shapePrimitives),Nc(u,f,l,i,e)}}}function Ew(n,t,e){const{vertices:i,uvs:o,indices:a}=e,l=a.length,u=i.length/2,f=[],d=As.rectangle,p=Tw,_=n.image;p.x=n.dx,p.y=n.dy,p.width=n.dw,p.height=n.dh;const v=n.transform;d.build(p,f),v&&Cd(f,v),d.triangulate(f,i,2,u,a,l);const m=_.uvs;o.push(m.x0,m.y0,m.x1,m.y1,m.x3,m.y3,m.x2,m.y2);const C=mn.get(Ad);C.indexOffset=l,C.indexSize=a.length-l,C.attributeOffset=u,C.attributeSize=i.length/2-u,C.baseColor=n.style,C.alpha=n.alpha,C.texture=_,C.geometryData=e,t.push(C)}function Nc(n,t,e,i,o){const{vertices:a,uvs:l,indices:u}=o;n.shapePrimitives.forEach(({shape:f,transform:d,holes:p})=>{const _=u.length,v=a.length/2,m=[],C=As[f.type];let M="triangle-list";if(C.build(f,m),d&&Cd(m,d),e){const F=f.closePath??!0,D=t;D.pixelLine?(yw(m,F,a,u),M="line-list"):xw(m,D,!1,F,a,u)}else if(p){const F=[],D=m.slice();Rw(p).forEach(z=>{F.push(D.length/2),D.push(...z)}),Td(D,F,a,2,v,u,_)}else C.triangulate(m,a,2,v,u,_);const w=l.length/2,T=t.texture;if(T!==kt.WHITE){const F=Pw(Mw,t,f,d);fw(a,2,v,l,w,2,a.length/2-v,F)}else dw(l,w,2,a.length/2-v);const R=mn.get(Ad);R.indexOffset=_,R.indexSize=u.length-_,R.attributeOffset=v,R.attributeSize=a.length/2-v,R.baseColor=t.color,R.alpha=t.alpha,R.texture=T,R.geometryData=o,R.topology=M,i.push(R)})}function Rw(n){const t=[];for(let e=0;e<n.length;e++){const i=n[e].shape,o=[];As[i.type].build(i,o),t.push(o)}return t}class kw{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class Fw{constructor(){this.batcher=new cw,this.instructions=new Df}init(){this.instructions.reset()}get geometry(){return Rt(z1,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}}const ah=class Da{constructor(t){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),t.renderableGC.addManagedHash(this,"_gpuContextHash"),t.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(t){Da.defaultOptions.bezierSmoothness=(t==null?void 0:t.bezierSmoothness)??Da.defaultOptions.bezierSmoothness}getContextRenderData(t){return this._graphicsDataContextHash[t.uid]||this._initContextRenderData(t)}updateGpuContext(t){let e=this._gpuContextHash[t.uid]||this._initContext(t);if(t.dirty){e?this._cleanGraphicsContextData(t):e=this._initContext(t),Iw(t,e);const i=t.batchMode;t.customShader||i==="no-batch"?e.isBatchable=!1:i==="auto"&&(e.isBatchable=e.geometryData.vertices.length<400),t.dirty=!1}return e}getGpuContext(t){return this._gpuContextHash[t.uid]||this._initContext(t)}_initContextRenderData(t){const e=mn.get(Fw),{batches:i,geometryData:o}=this._gpuContextHash[t.uid],a=o.vertices.length,l=o.indices.length;for(let p=0;p<i.length;p++)i[p].applyTransform=!1;const u=e.batcher;u.ensureAttributeBuffer(a),u.ensureIndexBuffer(l),u.begin();for(let p=0;p<i.length;p++){const _=i[p];u.add(_)}u.finish(e.instructions);const f=u.geometry;f.indexBuffer.setDataWithSize(u.indexBuffer,u.indexSize,!0),f.buffers[0].setDataWithSize(u.attributeBuffer.float32View,u.attributeSize,!0);const d=u.batches;for(let p=0;p<d.length;p++){const _=d[p];_.bindGroup=Ab(_.textures.textures,_.textures.count)}return this._graphicsDataContextHash[t.uid]=e,e}_initContext(t){const e=new kw;return e.context=t,this._gpuContextHash[t.uid]=e,t.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]}onGraphicsContextDestroy(t){this._cleanGraphicsContextData(t),t.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]=null}_cleanGraphicsContextData(t){const e=this._gpuContextHash[t.uid];e.isBatchable||this._graphicsDataContextHash[t.uid]&&(mn.return(this.getContextRenderData(t)),this._graphicsDataContextHash[t.uid]=null),e.batches&&e.batches.forEach(i=>{mn.return(i)})}destroy(){for(const t in this._gpuContextHash)this._gpuContextHash[t]&&this.onGraphicsContextDestroy(this._gpuContextHash[t].context)}};ah.extension={type:[Mt.WebGLSystem,Mt.WebGPUSystem,Mt.CanvasSystem],name:"graphicsContext"};ah.defaultOptions={bezierSmoothness:.5};let Md=ah;const Bw=8,ss=11920929e-14,Lw=1;function Id(n,t,e,i,o,a,l,u,f,d){const _=Math.min(.99,Math.max(0,d??Md.defaultOptions.bezierSmoothness));let v=(Lw-_)/1;return v*=v,Gw(t,e,i,o,a,l,u,f,n,v),n}function Gw(n,t,e,i,o,a,l,u,f,d){Ua(n,t,e,i,o,a,l,u,f,d,0),f.push(l,u)}function Ua(n,t,e,i,o,a,l,u,f,d,p){if(p>Bw)return;const _=(n+e)/2,v=(t+i)/2,m=(e+o)/2,C=(i+a)/2,M=(o+l)/2,w=(a+u)/2,T=(_+m)/2,R=(v+C)/2,F=(m+M)/2,D=(C+w)/2,X=(T+F)/2,z=(R+D)/2;if(p>0){let $=l-n,rt=u-t;const et=Math.abs((e-l)*rt-(i-u)*$),Z=Math.abs((o-l)*rt-(a-u)*$);if(et>ss&&Z>ss){if((et+Z)*(et+Z)<=d*($*$+rt*rt)){f.push(X,z);return}}else if(et>ss){if(et*et<=d*($*$+rt*rt)){f.push(X,z);return}}else if(Z>ss){if(Z*Z<=d*($*$+rt*rt)){f.push(X,z);return}}else if($=X-(n+l)/2,rt=z-(t+u)/2,$*$+rt*rt<=d){f.push(X,z);return}}Ua(n,t,_,v,T,R,X,z,f,d,p+1),Ua(X,z,F,D,M,w,l,u,f,d,p+1)}const Ow=8,Dw=11920929e-14,Uw=1;function Ww(n,t,e,i,o,a,l,u){const d=Math.min(.99,Math.max(0,u??Md.defaultOptions.bezierSmoothness));let p=(Uw-d)/1;return p*=p,Nw(t,e,i,o,a,l,n,p),n}function Nw(n,t,e,i,o,a,l,u){Wa(l,n,t,e,i,o,a,u,0),l.push(o,a)}function Wa(n,t,e,i,o,a,l,u,f){if(f>Ow)return;const d=(t+i)/2,p=(e+o)/2,_=(i+a)/2,v=(o+l)/2,m=(d+_)/2,C=(p+v)/2;let M=a-t,w=l-e;const T=Math.abs((i-a)*w-(o-l)*M);if(T>Dw){if(T*T<=u*(M*M+w*w)){n.push(m,C);return}}else if(M=m-(t+a)/2,w=C-(e+l)/2,M*M+w*w<=u){n.push(m,C);return}Wa(n,t,e,d,p,m,C,u,f+1),Wa(n,m,C,_,v,a,l,u,f+1)}function Ed(n,t,e,i,o,a,l,u){let f=Math.abs(o-a);(!l&&o>a||l&&a>o)&&(f=2*Math.PI-f),u||(u=Math.max(6,Math.floor(6*Math.pow(i,1/3)*(f/Math.PI)))),u=Math.max(u,3);let d=f/u,p=o;d*=l?-1:1;for(let _=0;_<u+1;_++){const v=Math.cos(p),m=Math.sin(p),C=t+v*i,M=e+m*i;n.push(C,M),p+=d}}function $w(n,t,e,i,o,a){const l=n[n.length-2],f=n[n.length-1]-e,d=l-t,p=o-e,_=i-t,v=Math.abs(f*_-d*p);if(v<1e-8||a===0){(n[n.length-2]!==t||n[n.length-1]!==e)&&n.push(t,e);return}const m=f*f+d*d,C=p*p+_*_,M=f*p+d*_,w=a*Math.sqrt(m)/v,T=a*Math.sqrt(C)/v,R=w*M/m,F=T*M/C,D=w*_+T*d,X=w*p+T*f,z=d*(T+R),$=f*(T+R),rt=_*(w+F),et=p*(w+F),Z=Math.atan2($-X,z-D),K=Math.atan2(et-X,rt-D);Ed(n,D+t,X+e,a,Z,K,d*p>_*f)}const qr=Math.PI*2,ma={centerX:0,centerY:0,ang1:0,ang2:0},xa=({x:n,y:t},e,i,o,a,l,u,f)=>{n*=e,t*=i;const d=o*n-a*t,p=a*n+o*t;return f.x=d+l,f.y=p+u,f};function zw(n,t){const e=t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),i=t===1.5707963267948966?.551915024494:e,o=Math.cos(n),a=Math.sin(n),l=Math.cos(n+t),u=Math.sin(n+t);return[{x:o-a*i,y:a+o*i},{x:l+u*i,y:u-l*i},{x:l,y:u}]}const $c=(n,t,e,i)=>{const o=n*i-t*e<0?-1:1;let a=n*e+t*i;return a>1&&(a=1),a<-1&&(a=-1),o*Math.acos(a)},Hw=(n,t,e,i,o,a,l,u,f,d,p,_,v)=>{const m=Math.pow(o,2),C=Math.pow(a,2),M=Math.pow(p,2),w=Math.pow(_,2);let T=m*C-m*w-C*M;T<0&&(T=0),T/=m*w+C*M,T=Math.sqrt(T)*(l===u?-1:1);const R=T*o/a*_,F=T*-a/o*p,D=d*R-f*F+(n+e)/2,X=f*R+d*F+(t+i)/2,z=(p-R)/o,$=(_-F)/a,rt=(-p-R)/o,et=(-_-F)/a,Z=$c(1,0,z,$);let K=$c(z,$,rt,et);u===0&&K>0&&(K-=qr),u===1&&K<0&&(K+=qr),v.centerX=D,v.centerY=X,v.ang1=Z,v.ang2=K};function Yw(n,t,e,i,o,a,l,u=0,f=0,d=0){if(a===0||l===0)return;const p=Math.sin(u*qr/360),_=Math.cos(u*qr/360),v=_*(t-i)/2+p*(e-o)/2,m=-p*(t-i)/2+_*(e-o)/2;if(v===0&&m===0)return;a=Math.abs(a),l=Math.abs(l);const C=Math.pow(v,2)/Math.pow(a,2)+Math.pow(m,2)/Math.pow(l,2);C>1&&(a*=Math.sqrt(C),l*=Math.sqrt(C)),Hw(t,e,i,o,a,l,f,d,p,_,v,m,ma);let{ang1:M,ang2:w}=ma;const{centerX:T,centerY:R}=ma;let F=Math.abs(w)/(qr/4);Math.abs(1-F)<1e-7&&(F=1);const D=Math.max(Math.ceil(F),1);w/=D;let X=n[n.length-2],z=n[n.length-1];const $={x:0,y:0};for(let rt=0;rt<D;rt++){const et=zw(M,w),{x:Z,y:K}=xa(et[0],a,l,_,p,T,R,$),{x:yt,y:At}=xa(et[1],a,l,_,p,T,R,$),{x:zt,y:Ue}=xa(et[2],a,l,_,p,T,R,$);Id(n,X,z,Z,K,yt,At,zt,Ue),X=zt,z=Ue,M+=w}}function Xw(n,t,e){const i=(l,u)=>{const f=u.x-l.x,d=u.y-l.y,p=Math.sqrt(f*f+d*d),_=f/p,v=d/p;return{len:p,nx:_,ny:v}},o=(l,u)=>{l===0?n.moveTo(u.x,u.y):n.lineTo(u.x,u.y)};let a=t[t.length-1];for(let l=0;l<t.length;l++){const u=t[l%t.length],f=u.radius??e;if(f<=0){o(l,u),a=u;continue}const d=t[(l+1)%t.length],p=i(u,a),_=i(u,d);if(p.len<1e-4||_.len<1e-4){o(l,u),a=u;continue}let v=Math.asin(p.nx*_.ny-p.ny*_.nx),m=1,C=!1;p.nx*_.nx-p.ny*-_.ny<0?v<0?v=Math.PI+v:(v=Math.PI-v,m=-1,C=!0):v>0&&(m=-1,C=!0);const M=v/2;let w,T=Math.abs(Math.cos(M)*f/Math.sin(M));T>Math.min(p.len/2,_.len/2)?(T=Math.min(p.len/2,_.len/2),w=Math.abs(T*Math.sin(M)/Math.cos(M))):w=f;const R=u.x+_.nx*T+-_.ny*w*m,F=u.y+_.ny*T+_.nx*w*m,D=Math.atan2(p.ny,p.nx)+Math.PI/2*m,X=Math.atan2(_.ny,_.nx)-Math.PI/2*m;l===0&&n.moveTo(R+Math.cos(D)*w,F+Math.sin(D)*w),n.arc(R,F,w,D,X,C),a=u}}function Vw(n,t,e,i){const o=(u,f)=>Math.sqrt((u.x-f.x)**2+(u.y-f.y)**2),a=(u,f,d)=>({x:u.x+(f.x-u.x)*d,y:u.y+(f.y-u.y)*d}),l=t.length;for(let u=0;u<l;u++){const f=t[(u+1)%l],d=f.radius??e;if(d<=0){u===0?n.moveTo(f.x,f.y):n.lineTo(f.x,f.y);continue}const p=t[u],_=t[(u+2)%l],v=o(p,f);let m;if(v<1e-4)m=f;else{const w=Math.min(v/2,d);m=a(f,p,w/v)}const C=o(_,f);let M;if(C<1e-4)M=f;else{const w=Math.min(C/2,d);M=a(f,_,w/C)}u===0?n.moveTo(m.x,m.y):n.lineTo(m.x,m.y),n.quadraticCurveTo(f.x,f.y,M.x,M.y,i)}}const qw=new ee;class Kw{constructor(t){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new qe,this._graphicsPath2D=t,this.signed=t.checkForHoles}moveTo(t,e){return this.startPoly(t,e),this}lineTo(t,e){this._ensurePoly();const i=this._currentPoly.points,o=i[i.length-2],a=i[i.length-1];return(o!==t||a!==e)&&i.push(t,e),this}arc(t,e,i,o,a,l){this._ensurePoly(!1);const u=this._currentPoly.points;return Ed(u,t,e,i,o,a,l),this}arcTo(t,e,i,o,a){this._ensurePoly();const l=this._currentPoly.points;return $w(l,t,e,i,o,a),this}arcToSvg(t,e,i,o,a,l,u){const f=this._currentPoly.points;return Yw(f,this._currentPoly.lastX,this._currentPoly.lastY,l,u,t,e,i,o,a),this}bezierCurveTo(t,e,i,o,a,l,u){this._ensurePoly();const f=this._currentPoly;return Id(this._currentPoly.points,f.lastX,f.lastY,t,e,i,o,a,l,u),this}quadraticCurveTo(t,e,i,o,a){this._ensurePoly();const l=this._currentPoly;return Ww(this._currentPoly.points,l.lastX,l.lastY,t,e,i,o,a),this}closePath(){return this.endPoly(!0),this}addPath(t,e){this.endPoly(),e&&!e.isIdentity()&&(t=t.clone(!0),t.transform(e));const i=this.shapePrimitives,o=i.length;for(let a=0;a<t.instructions.length;a++){const l=t.instructions[a];this[l.action](...l.data)}if(t.checkForHoles&&i.length-o>1){let a=null;for(let l=o;l<i.length;l++){const u=i[l];if(u.shape.type==="polygon"){const f=u.shape,d=a==null?void 0:a.shape;d&&d.containsPolygon(f)?(a.holes||(a.holes=[]),a.holes.push(u),i.copyWithin(l,l+1),i.length--,l--):a=u}}}return this}finish(t=!1){this.endPoly(t)}rect(t,e,i,o,a){return this.drawShape(new ee(t,e,i,o),a),this}circle(t,e,i,o){return this.drawShape(new ih(t,e,i),o),this}poly(t,e,i){const o=new Vr(t);return o.closePath=e,this.drawShape(o,i),this}regularPoly(t,e,i,o,a=0,l){o=Math.max(o|0,3);const u=-1*Math.PI/2+a,f=Math.PI*2/o,d=[];for(let p=0;p<o;p++){const _=u-p*f;d.push(t+i*Math.cos(_),e+i*Math.sin(_))}return this.poly(d,!0,l),this}roundPoly(t,e,i,o,a,l=0,u){if(o=Math.max(o|0,3),a<=0)return this.regularPoly(t,e,i,o,l);const f=i*Math.sin(Math.PI/o)-.001;a=Math.min(a,f);const d=-1*Math.PI/2+l,p=Math.PI*2/o,_=(o-2)*Math.PI/o/2;for(let v=0;v<o;v++){const m=v*p+d,C=t+i*Math.cos(m),M=e+i*Math.sin(m),w=m+Math.PI+_,T=m-Math.PI-_,R=C+a*Math.cos(w),F=M+a*Math.sin(w),D=C+a*Math.cos(T),X=M+a*Math.sin(T);v===0?this.moveTo(R,F):this.lineTo(R,F),this.quadraticCurveTo(C,M,D,X,u)}return this.closePath()}roundShape(t,e,i=!1,o){return t.length<3?this:(i?Vw(this,t,e,o):Xw(this,t,e),this.closePath())}filletRect(t,e,i,o,a){if(a===0)return this.rect(t,e,i,o);const l=Math.min(i,o)/2,u=Math.min(l,Math.max(-l,a)),f=t+i,d=e+o,p=u<0?-u:0,_=Math.abs(u);return this.moveTo(t,e+_).arcTo(t+p,e+p,t+_,e,_).lineTo(f-_,e).arcTo(f-p,e+p,f,e+_,_).lineTo(f,d-_).arcTo(f-p,d-p,t+i-_,d,_).lineTo(t+_,d).arcTo(t+p,d-p,t,d-_,_).closePath()}chamferRect(t,e,i,o,a,l){if(a<=0)return this.rect(t,e,i,o);const u=Math.min(a,Math.min(i,o)/2),f=t+i,d=e+o,p=[t+u,e,f-u,e,f,e+u,f,d-u,f-u,d,t+u,d,t,d-u,t,e+u];for(let _=p.length-1;_>=2;_-=2)p[_]===p[_-2]&&p[_-1]===p[_-3]&&p.splice(_-1,2);return this.poly(p,!0,l)}ellipse(t,e,i,o,a){return this.drawShape(new sh(t,e,i,o),a),this}roundRect(t,e,i,o,a,l){return this.drawShape(new oh(t,e,i,o,a),l),this}drawShape(t,e){return this.endPoly(),this.shapePrimitives.push({shape:t,transform:e}),this}startPoly(t,e){let i=this._currentPoly;return i&&this.endPoly(),i=new Vr,i.points.push(t,e),this._currentPoly=i,this}endPoly(t=!1){const e=this._currentPoly;return e&&e.points.length>2&&(e.closePath=t,this.shapePrimitives.push({shape:e})),this._currentPoly=null,this}_ensurePoly(t=!0){if(!this._currentPoly&&(this._currentPoly=new Vr,t)){const e=this.shapePrimitives[this.shapePrimitives.length-1];if(e){let i=e.shape.x,o=e.shape.y;if(e.transform&&!e.transform.isIdentity()){const a=e.transform,l=i;i=a.a*i+a.c*o+a.tx,o=a.b*l+a.d*o+a.ty}this._currentPoly.points.push(i,o)}else this._currentPoly.points.push(0,0)}}buildPath(){const t=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let e=0;e<t.instructions.length;e++){const i=t.instructions[e];this[i.action](...i.data)}this.finish()}get bounds(){const t=this._bounds;t.clear();const e=this.shapePrimitives;for(let i=0;i<e.length;i++){const o=e[i],a=o.shape.getBounds(qw);o.transform?t.addRect(a,o.transform):t.addRect(a)}return t}}class mr{constructor(t,e=!1){this.instructions=[],this.uid=qt("graphicsPath"),this._dirty=!0,this.checkForHoles=e,typeof t=="string"?xb(t,this):this.instructions=(t==null?void 0:t.slice())??[]}get shapePath(){return this._shapePath||(this._shapePath=new Kw(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(t,e){return t=t.clone(),this.instructions.push({action:"addPath",data:[t,e]}),this._dirty=!0,this}arc(...t){return this.instructions.push({action:"arc",data:t}),this._dirty=!0,this}arcTo(...t){return this.instructions.push({action:"arcTo",data:t}),this._dirty=!0,this}arcToSvg(...t){return this.instructions.push({action:"arcToSvg",data:t}),this._dirty=!0,this}bezierCurveTo(...t){return this.instructions.push({action:"bezierCurveTo",data:t}),this._dirty=!0,this}bezierCurveToShort(t,e,i,o,a){const l=this.instructions[this.instructions.length-1],u=this.getLastPoint(oe.shared);let f=0,d=0;if(!l||l.action!=="bezierCurveTo")f=u.x,d=u.y;else{f=l.data[2],d=l.data[3];const p=u.x,_=u.y;f=p+(p-f),d=_+(_-d)}return this.instructions.push({action:"bezierCurveTo",data:[f,d,t,e,i,o,a]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...t){return this.instructions.push({action:"ellipse",data:t}),this._dirty=!0,this}lineTo(...t){return this.instructions.push({action:"lineTo",data:t}),this._dirty=!0,this}moveTo(...t){return this.instructions.push({action:"moveTo",data:t}),this}quadraticCurveTo(...t){return this.instructions.push({action:"quadraticCurveTo",data:t}),this._dirty=!0,this}quadraticCurveToShort(t,e,i){const o=this.instructions[this.instructions.length-1],a=this.getLastPoint(oe.shared);let l=0,u=0;if(!o||o.action!=="quadraticCurveTo")l=a.x,u=a.y;else{l=o.data[0],u=o.data[1];const f=a.x,d=a.y;l=f+(f-l),u=d+(d-u)}return this.instructions.push({action:"quadraticCurveTo",data:[l,u,t,e,i]}),this._dirty=!0,this}rect(t,e,i,o,a){return this.instructions.push({action:"rect",data:[t,e,i,o,a]}),this._dirty=!0,this}circle(t,e,i,o){return this.instructions.push({action:"circle",data:[t,e,i,o]}),this._dirty=!0,this}roundRect(...t){return this.instructions.push({action:"roundRect",data:t}),this._dirty=!0,this}poly(...t){return this.instructions.push({action:"poly",data:t}),this._dirty=!0,this}regularPoly(...t){return this.instructions.push({action:"regularPoly",data:t}),this._dirty=!0,this}roundPoly(...t){return this.instructions.push({action:"roundPoly",data:t}),this._dirty=!0,this}roundShape(...t){return this.instructions.push({action:"roundShape",data:t}),this._dirty=!0,this}filletRect(...t){return this.instructions.push({action:"filletRect",data:t}),this._dirty=!0,this}chamferRect(...t){return this.instructions.push({action:"chamferRect",data:t}),this._dirty=!0,this}star(t,e,i,o,a,l,u){a||(a=o/2);const f=-1*Math.PI/2+l,d=i*2,p=Math.PI*2/d,_=[];for(let v=0;v<d;v++){const m=v%2?a:o,C=v*p+f;_.push(t+m*Math.cos(C),e+m*Math.sin(C))}return this.poly(_,!0,u),this}clone(t=!1){const e=new mr;if(e.checkForHoles=this.checkForHoles,!t)e.instructions=this.instructions.slice();else for(let i=0;i<this.instructions.length;i++){const o=this.instructions[i];e.instructions.push({action:o.action,data:o.data.slice()})}return e}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(t){if(t.isIdentity())return this;const e=t.a,i=t.b,o=t.c,a=t.d,l=t.tx,u=t.ty;let f=0,d=0,p=0,_=0,v=0,m=0,C=0,M=0;for(let w=0;w<this.instructions.length;w++){const T=this.instructions[w],R=T.data;switch(T.action){case"moveTo":case"lineTo":f=R[0],d=R[1],R[0]=e*f+o*d+l,R[1]=i*f+a*d+u;break;case"bezierCurveTo":p=R[0],_=R[1],v=R[2],m=R[3],f=R[4],d=R[5],R[0]=e*p+o*_+l,R[1]=i*p+a*_+u,R[2]=e*v+o*m+l,R[3]=i*v+a*m+u,R[4]=e*f+o*d+l,R[5]=i*f+a*d+u;break;case"quadraticCurveTo":p=R[0],_=R[1],f=R[2],d=R[3],R[0]=e*p+o*_+l,R[1]=i*p+a*_+u,R[2]=e*f+o*d+l,R[3]=i*f+a*d+u;break;case"arcToSvg":f=R[5],d=R[6],C=R[0],M=R[1],R[0]=e*C+o*M,R[1]=i*C+a*M,R[5]=e*f+o*d+l,R[6]=i*f+a*d+u;break;case"circle":R[4]=Wr(R[3],t);break;case"rect":R[4]=Wr(R[4],t);break;case"ellipse":R[8]=Wr(R[8],t);break;case"roundRect":R[5]=Wr(R[5],t);break;case"addPath":R[0].transform(t);break;case"poly":R[2]=Wr(R[2],t);break;default:Te("unknown transform action",T.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(t){let e=this.instructions.length-1,i=this.instructions[e];if(!i)return t.x=0,t.y=0,t;for(;i.action==="closePath";){if(e--,e<0)return t.x=0,t.y=0,t;i=this.instructions[e]}switch(i.action){case"moveTo":case"lineTo":t.x=i.data[0],t.y=i.data[1];break;case"quadraticCurveTo":t.x=i.data[2],t.y=i.data[3];break;case"bezierCurveTo":t.x=i.data[4],t.y=i.data[5];break;case"arc":case"arcToSvg":t.x=i.data[5],t.y=i.data[6];break;case"addPath":i.data[0].getLastPoint(t);break}return t}}function Wr(n,t){return n?n.prepend(t):t.clone()}function Nt(n,t,e){const i=n.getAttribute(t);return i?Number(i):e}function Zw(n,t){const e=n.querySelectorAll("defs");for(let i=0;i<e.length;i++){const o=e[i];for(let a=0;a<o.children.length;a++){const l=o.children[a];switch(l.nodeName.toLowerCase()){case"lineargradient":t.defs[l.id]=jw(l);break;case"radialgradient":t.defs[l.id]=Qw();break}}}}function jw(n){const t=Nt(n,"x1",0),e=Nt(n,"y1",0),i=Nt(n,"x2",1),o=Nt(n,"y2",0),a=n.getAttribute("gradientUnits")||"objectBoundingBox",l=new qn(t,e,i,o,a==="objectBoundingBox"?"local":"global");for(let u=0;u<n.children.length;u++){const f=n.children[u],d=Nt(f,"offset",0),p=ae.shared.setValue(f.getAttribute("stop-color")).toNumber();l.addColorStop(d,p)}return l}function Qw(n){return Te("[SVG Parser] Radial gradients are not yet supported"),new qn(0,0,1,0)}function zc(n){const t=n.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return t?t[1]:""}const Hc={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function Rd(n,t){const e=n.getAttribute("style"),i={},o={},a={strokeStyle:i,fillStyle:o,useFill:!1,useStroke:!1};for(const l in Hc){const u=n.getAttribute(l);u&&Yc(t,a,l,u.trim())}if(e){const l=e.split(";");for(let u=0;u<l.length;u++){const f=l[u].trim(),[d,p]=f.split(":");Hc[d]&&Yc(t,a,d,p.trim())}}return{strokeStyle:a.useStroke?i:null,fillStyle:a.useFill?o:null,useFill:a.useFill,useStroke:a.useStroke}}function Yc(n,t,e,i){switch(e){case"stroke":if(i!=="none"){if(i.startsWith("url(")){const o=zc(i);t.strokeStyle.fill=n.defs[o]}else t.strokeStyle.color=ae.shared.setValue(i).toNumber();t.useStroke=!0}break;case"stroke-width":t.strokeStyle.width=Number(i);break;case"fill":if(i!=="none"){if(i.startsWith("url(")){const o=zc(i);t.fillStyle.fill=n.defs[o]}else t.fillStyle.color=ae.shared.setValue(i).toNumber();t.useFill=!0}break;case"fill-opacity":t.fillStyle.alpha=Number(i);break;case"stroke-opacity":t.strokeStyle.alpha=Number(i);break;case"opacity":t.fillStyle.alpha=Number(i),t.strokeStyle.alpha=Number(i);break}}function Jw(n,t){if(typeof n=="string"){const l=document.createElement("div");l.innerHTML=n.trim(),n=l.querySelector("svg")}const e={context:t,defs:{},path:new mr};Zw(n,e);const i=n.children,{fillStyle:o,strokeStyle:a}=Rd(n,e);for(let l=0;l<i.length;l++){const u=i[l];u.nodeName.toLowerCase()!=="defs"&&kd(u,e,o,a)}return t}function kd(n,t,e,i){const o=n.children,{fillStyle:a,strokeStyle:l}=Rd(n,t);a&&e?e={...e,...a}:a&&(e=a),l&&i?i={...i,...l}:l&&(i=l);const u=!e&&!i;u&&(e={color:0});let f,d,p,_,v,m,C,M,w,T,R,F,D,X,z,$,rt;switch(n.nodeName.toLowerCase()){case"path":X=n.getAttribute("d"),n.getAttribute("fill-rule")==="evenodd"&&Te("SVG Evenodd fill rule not supported, your svg may render incorrectly"),z=new mr(X,!0),t.context.path(z),e&&t.context.fill(e),i&&t.context.stroke(i);break;case"circle":C=Nt(n,"cx",0),M=Nt(n,"cy",0),w=Nt(n,"r",0),t.context.ellipse(C,M,w,w),e&&t.context.fill(e),i&&t.context.stroke(i);break;case"rect":f=Nt(n,"x",0),d=Nt(n,"y",0),$=Nt(n,"width",0),rt=Nt(n,"height",0),T=Nt(n,"rx",0),R=Nt(n,"ry",0),T||R?t.context.roundRect(f,d,$,rt,T||R):t.context.rect(f,d,$,rt),e&&t.context.fill(e),i&&t.context.stroke(i);break;case"ellipse":C=Nt(n,"cx",0),M=Nt(n,"cy",0),T=Nt(n,"rx",0),R=Nt(n,"ry",0),t.context.beginPath(),t.context.ellipse(C,M,T,R),e&&t.context.fill(e),i&&t.context.stroke(i);break;case"line":p=Nt(n,"x1",0),_=Nt(n,"y1",0),v=Nt(n,"x2",0),m=Nt(n,"y2",0),t.context.beginPath(),t.context.moveTo(p,_),t.context.lineTo(v,m),i&&t.context.stroke(i);break;case"polygon":D=n.getAttribute("points"),F=D.match(/\d+/g).map(et=>parseInt(et,10)),t.context.poly(F,!0),e&&t.context.fill(e),i&&t.context.stroke(i);break;case"polyline":D=n.getAttribute("points"),F=D.match(/\d+/g).map(et=>parseInt(et,10)),t.context.poly(F,!1),i&&t.context.stroke(i);break;case"g":case"svg":break;default:{Te(`[SVG parser] <${n.nodeName}> elements unsupported`);break}}u&&(e=null);for(let et=0;et<o.length;et++)kd(o[et],t,e,i)}function tS(n){return ae.isColorLike(n)}function Xc(n){return n instanceof rh}function Vc(n){return n instanceof qn}function eS(n){return n instanceof kt}function nS(n,t,e){const i=ae.shared.setValue(t??0);return n.color=i.toNumber(),n.alpha=i.alpha===1?e.alpha:i.alpha,n.texture=kt.WHITE,{...e,...n}}function rS(n,t,e){return n.texture=t,{...e,...n}}function qc(n,t,e){return n.fill=t,n.color=16777215,n.texture=t.texture,n.matrix=t.transform,{...e,...n}}function Kc(n,t,e){return t.buildGradient(),n.fill=t,n.color=16777215,n.texture=t.texture,n.matrix=t.transform,n.textureSpace=t.textureSpace,{...e,...n}}function iS(n,t){const e={...t,...n},i=ae.shared.setValue(e.color);return e.alpha*=i.alpha,e.color=i.toNumber(),e}function Xn(n,t){if(n==null)return null;const e={},i=n;return tS(n)?nS(e,n,t):eS(n)?rS(e,n,t):Xc(n)?qc(e,n,t):Vc(n)?Kc(e,n,t):i.fill&&Xc(i.fill)?qc(i,i.fill,t):i.fill&&Vc(i.fill)?Kc(i,i.fill,t):iS(i,t)}function xs(n,t){const{width:e,alignment:i,miterLimit:o,cap:a,join:l,pixelLine:u,...f}=t,d=Xn(n,f);return d?{width:e,alignment:i,miterLimit:o,cap:a,join:l,pixelLine:u,...d}:null}const sS=new oe,Zc=new bt,hh=class en extends rn{constructor(){super(...arguments),this.uid=qt("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new mr,this._transform=new bt,this._fillStyle={...en.defaultFillStyle},this._strokeStyle={...en.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new qe,this._boundsDirty=!0}clone(){const t=new en;return t.batchMode=this.batchMode,t.instructions=this.instructions.slice(),t._activePath=this._activePath.clone(),t._transform=this._transform.clone(),t._fillStyle={...this._fillStyle},t._strokeStyle={...this._strokeStyle},t._stateStack=this._stateStack.slice(),t._bounds=this._bounds.clone(),t._boundsDirty=!0,t}get fillStyle(){return this._fillStyle}set fillStyle(t){this._fillStyle=Xn(t,en.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){this._strokeStyle=xs(t,en.defaultStrokeStyle)}setFillStyle(t){return this._fillStyle=Xn(t,en.defaultFillStyle),this}setStrokeStyle(t){return this._strokeStyle=Xn(t,en.defaultStrokeStyle),this}texture(t,e,i,o,a,l){return this.instructions.push({action:"texture",data:{image:t,dx:i||0,dy:o||0,dw:a||t.frame.width,dh:l||t.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:e?ae.shared.setValue(e).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new mr,this}fill(t,e){let i;const o=this.instructions[this.instructions.length-1];return this._tick===0&&o&&o.action==="stroke"?i=o.data.path:i=this._activePath.clone(),i?(t!=null&&(e!==void 0&&typeof t=="number"&&(Rt($t,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),t={color:t,alpha:e}),this._fillStyle=Xn(t,en.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:i}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:t,y:e}=this._activePath.getLastPoint(oe.shared);this._activePath.clear(),this._activePath.moveTo(t,e)}stroke(t){let e;const i=this.instructions[this.instructions.length-1];return this._tick===0&&i&&i.action==="fill"?e=i.data.path:e=this._activePath.clone(),e?(t!=null&&(this._strokeStyle=xs(t,en.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:e}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let t=0;t<2;t++){const e=this.instructions[this.instructions.length-1-t],i=this._activePath.clone();if(e&&(e.action==="stroke"||e.action==="fill"))if(e.data.hole)e.data.hole.addPath(i);else{e.data.hole=i;break}}return this._initNextPathLocation(),this}arc(t,e,i,o,a,l){this._tick++;const u=this._transform;return this._activePath.arc(u.a*t+u.c*e+u.tx,u.b*t+u.d*e+u.ty,i,o,a,l),this}arcTo(t,e,i,o,a){this._tick++;const l=this._transform;return this._activePath.arcTo(l.a*t+l.c*e+l.tx,l.b*t+l.d*e+l.ty,l.a*i+l.c*o+l.tx,l.b*i+l.d*o+l.ty,a),this}arcToSvg(t,e,i,o,a,l,u){this._tick++;const f=this._transform;return this._activePath.arcToSvg(t,e,i,o,a,f.a*l+f.c*u+f.tx,f.b*l+f.d*u+f.ty),this}bezierCurveTo(t,e,i,o,a,l,u){this._tick++;const f=this._transform;return this._activePath.bezierCurveTo(f.a*t+f.c*e+f.tx,f.b*t+f.d*e+f.ty,f.a*i+f.c*o+f.tx,f.b*i+f.d*o+f.ty,f.a*a+f.c*l+f.tx,f.b*a+f.d*l+f.ty,u),this}closePath(){var t;return this._tick++,(t=this._activePath)==null||t.closePath(),this}ellipse(t,e,i,o){return this._tick++,this._activePath.ellipse(t,e,i,o,this._transform.clone()),this}circle(t,e,i){return this._tick++,this._activePath.circle(t,e,i,this._transform.clone()),this}path(t){return this._tick++,this._activePath.addPath(t,this._transform.clone()),this}lineTo(t,e){this._tick++;const i=this._transform;return this._activePath.lineTo(i.a*t+i.c*e+i.tx,i.b*t+i.d*e+i.ty),this}moveTo(t,e){this._tick++;const i=this._transform,o=this._activePath.instructions,a=i.a*t+i.c*e+i.tx,l=i.b*t+i.d*e+i.ty;return o.length===1&&o[0].action==="moveTo"?(o[0].data[0]=a,o[0].data[1]=l,this):(this._activePath.moveTo(a,l),this)}quadraticCurveTo(t,e,i,o,a){this._tick++;const l=this._transform;return this._activePath.quadraticCurveTo(l.a*t+l.c*e+l.tx,l.b*t+l.d*e+l.ty,l.a*i+l.c*o+l.tx,l.b*i+l.d*o+l.ty,a),this}rect(t,e,i,o){return this._tick++,this._activePath.rect(t,e,i,o,this._transform.clone()),this}roundRect(t,e,i,o,a){return this._tick++,this._activePath.roundRect(t,e,i,o,a,this._transform.clone()),this}poly(t,e){return this._tick++,this._activePath.poly(t,e,this._transform.clone()),this}regularPoly(t,e,i,o,a=0,l){return this._tick++,this._activePath.regularPoly(t,e,i,o,a,l),this}roundPoly(t,e,i,o,a,l){return this._tick++,this._activePath.roundPoly(t,e,i,o,a,l),this}roundShape(t,e,i,o){return this._tick++,this._activePath.roundShape(t,e,i,o),this}filletRect(t,e,i,o,a){return this._tick++,this._activePath.filletRect(t,e,i,o,a),this}chamferRect(t,e,i,o,a,l){return this._tick++,this._activePath.chamferRect(t,e,i,o,a,l),this}star(t,e,i,o,a=0,l=0){return this._tick++,this._activePath.star(t,e,i,o,a,l,this._transform.clone()),this}svg(t){return this._tick++,Jw(t,this),this}restore(){const t=this._stateStack.pop();return t&&(this._transform=t.transform,this._fillStyle=t.fillStyle,this._strokeStyle=t.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(t){return this._transform.rotate(t),this}scale(t,e=t){return this._transform.scale(t,e),this}setTransform(t,e,i,o,a,l){return t instanceof bt?(this._transform.set(t.a,t.b,t.c,t.d,t.tx,t.ty),this):(this._transform.set(t,e,i,o,a,l),this)}transform(t,e,i,o,a,l){return t instanceof bt?(this._transform.append(t),this):(Zc.set(t,e,i,o,a,l),this._transform.append(Zc),this)}translate(t,e=t){return this._transform.translate(t,e),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;const t=this._bounds;t.clear();for(let e=0;e<this.instructions.length;e++){const i=this.instructions[e],o=i.action;if(o==="fill"){const a=i.data;t.addBounds(a.path.bounds)}else if(o==="texture"){const a=i.data;t.addFrame(a.dx,a.dy,a.dx+a.dw,a.dy+a.dh,a.transform)}if(o==="stroke"){const a=i.data,l=a.style.alignment,u=a.style.width*(1-l),f=a.path.bounds;t.addFrame(f.minX-u,f.minY-u,f.maxX+u,f.maxY+u)}}return t}containsPoint(t){var o;if(!this.bounds.containsPoint(t.x,t.y))return!1;const e=this.instructions;let i=!1;for(let a=0;a<e.length;a++){const l=e[a],u=l.data,f=u.path;if(!l.action||!f)continue;const d=u.style,p=f.shapePath.shapePrimitives;for(let _=0;_<p.length;_++){const v=p[_].shape;if(!d||!v)continue;const m=p[_].transform,C=m?m.applyInverse(t,sS):t;if(l.action==="fill")i=v.contains(C.x,C.y);else{const w=d;i=v.strokeContains(C.x,C.y,w.width,w.alignment)}const M=u.hole;if(M){const w=(o=M.shapePath)==null?void 0:o.shapePrimitives;if(w)for(let T=0;T<w.length;T++)w[T].shape.contains(C.x,C.y)&&(i=!1)}if(i)return!0}}return i}destroy(t=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof t=="boolean"?t:t==null?void 0:t.texture){const i=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(i),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(i)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};hh.defaultFillStyle={color:16777215,alpha:1,texture:kt.WHITE,matrix:null,fill:null,textureSpace:"local"};hh.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:kt.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let Xe=hh;const jc=["align","breakWords","cssOverrides","fontVariant","fontWeight","leading","letterSpacing","lineHeight","padding","textBaseline","trim","whiteSpace","wordWrap","wordWrapWidth","fontFamily","fontStyle","fontSize"];function oS(n){const t=[];let e=0;for(let i=0;i<jc.length;i++){const o=`_${jc[i]}`;t[e++]=n[o]}return e=Fd(n._fill,t,e),e=aS(n._stroke,t,e),e=hS(n.dropShadow,t,e),t.join("-")}function Fd(n,t,e){var i;return n&&(t[e++]=n.color,t[e++]=n.alpha,t[e++]=(i=n.fill)==null?void 0:i.styleKey),e}function aS(n,t,e){return n&&(e=Fd(n,t,e),t[e++]=n.width,t[e++]=n.alignment,t[e++]=n.cap,t[e++]=n.join,t[e++]=n.miterLimit),e}function hS(n,t,e){return n&&(t[e++]=n.alpha,t[e++]=n.angle,t[e++]=n.blur,t[e++]=n.distance,t[e++]=ae.shared.setValue(n.color).toNumber()),e}const lh=class pr extends rn{constructor(t={}){super(),lS(t);const e={...pr.defaultTextStyle,...t};for(const i in e){const o=i;this[o]=e[i]}this.update()}get align(){return this._align}set align(t){this._align=t,this.update()}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords=t,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(t){t!==null&&typeof t=="object"?this._dropShadow=this._createProxy({...pr.defaultDropShadow,...t}):this._dropShadow=t?this._createProxy({...pr.defaultDropShadow}):null,this.update()}get fontFamily(){return this._fontFamily}set fontFamily(t){this._fontFamily=t,this.update()}get fontSize(){return this._fontSize}set fontSize(t){typeof t=="string"?this._fontSize=parseInt(t,10):this._fontSize=t,this.update()}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle=t.toLowerCase(),this.update()}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant=t,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight=t,this.update()}get leading(){return this._leading}set leading(t){this._leading=t,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing=t,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight=t,this.update()}get padding(){return this._padding}set padding(t){this._padding=t,this.update()}get trim(){return this._trim}set trim(t){this._trim=t,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline=t,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace=t,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap=t,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth=t,this.update()}get fill(){return this._originalFill}set fill(t){t!==this._originalFill&&(this._originalFill=t,this._isFillStyle(t)&&(this._originalFill=this._createProxy({...Xe.defaultFillStyle,...t},()=>{this._fill=Xn({...this._originalFill},Xe.defaultFillStyle)})),this._fill=Xn(t===0?"black":t,Xe.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(t){t!==this._originalStroke&&(this._originalStroke=t,this._isFillStyle(t)&&(this._originalStroke=this._createProxy({...Xe.defaultStrokeStyle,...t},()=>{this._stroke=xs({...this._originalStroke},Xe.defaultStrokeStyle)})),this._stroke=xs(t,Xe.defaultStrokeStyle),this.update())}_generateKey(){return this._styleKey=oS(this),this._styleKey}update(){this._styleKey=null,this.emit("update",this)}reset(){const t=pr.defaultTextStyle;for(const e in t)this[e]=t[e]}get styleKey(){return this._styleKey||this._generateKey()}clone(){return new pr({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth})}destroy(t=!1){var i,o,a,l;if(this.removeAllListeners(),typeof t=="boolean"?t:t==null?void 0:t.texture){const u=typeof t=="boolean"?t:t==null?void 0:t.textureSource;(i=this._fill)!=null&&i.texture&&this._fill.texture.destroy(u),(o=this._originalFill)!=null&&o.texture&&this._originalFill.texture.destroy(u),(a=this._stroke)!=null&&a.texture&&this._stroke.texture.destroy(u),(l=this._originalStroke)!=null&&l.texture&&this._originalStroke.texture.destroy(u)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(t,e){return new Proxy(t,{set:(i,o,a)=>(i[o]=a,e==null||e(o,a),this.update(),!0)})}_isFillStyle(t){return(t??null)!==null&&!(ae.isColorLike(t)||t instanceof qn||t instanceof rh)}};lh.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};lh.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let Na=lh;function lS(n){const t=n;if(typeof t.dropShadow=="boolean"&&t.dropShadow){const e=Na.defaultDropShadow;n.dropShadow={alpha:t.dropShadowAlpha??e.alpha,angle:t.dropShadowAngle??e.angle,blur:t.dropShadowBlur??e.blur,color:t.dropShadowColor??e.color,distance:t.dropShadowDistance??e.distance}}if(t.strokeThickness!==void 0){Rt($t,"strokeThickness is now a part of stroke");const e=t.stroke;let i={};if(ae.isColorLike(e))i.color=e;else if(e instanceof qn||e instanceof rh)i.fill=e;else if(Object.hasOwnProperty.call(e,"color")||Object.hasOwnProperty.call(e,"fill"))i=e;else throw new Error("Invalid stroke value.");n.stroke={...i,width:t.strokeThickness}}if(Array.isArray(t.fillGradientStops)){Rt($t,"gradient fill is now a fill pattern: `new FillGradient(...)`");let e;n.fontSize==null?n.fontSize=Na.defaultTextStyle.fontSize:typeof n.fontSize=="string"?e=parseInt(n.fontSize,10):e=n.fontSize;const i=new qn({start:{x:0,y:0},end:{x:0,y:(e||0)*1.7}}),o=t.fillGradientStops.map(a=>ae.shared.setValue(a).toNumber());o.forEach((a,l)=>{const u=l/(o.length-1);i.addColorStop(u,a)}),n.fill={fill:i}}}const uS=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function cS(n){const t=typeof n.fontSize=="number"?`${n.fontSize}px`:n.fontSize;let e=n.fontFamily;Array.isArray(n.fontFamily)||(e=n.fontFamily.split(","));for(let i=e.length-1;i>=0;i--){let o=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(o)&&!uS.includes(o)&&(o=`"${o}"`),e[i]=o}return`${n.fontStyle} ${n.fontVariant} ${n.fontWeight} ${t} ${e.join(",")}`}const ya={willReadFrequently:!0},Ze=class tt{static get experimentalLetterSpacingSupported(){let t=tt._experimentalLetterSpacingSupported;if(t!==void 0){const e=Ve.get().getCanvasRenderingContext2D().prototype;t=tt._experimentalLetterSpacingSupported="letterSpacing"in e||"textLetterSpacing"in e}return t}constructor(t,e,i,o,a,l,u,f,d){this.text=t,this.style=e,this.width=i,this.height=o,this.lines=a,this.lineWidths=l,this.lineHeight=u,this.maxLineWidth=f,this.fontProperties=d}static measureText(t=" ",e,i=tt._canvas,o=e.wordWrap){var R;const a=`${t}:${e.styleKey}`;if(tt._measurementCache[a])return tt._measurementCache[a];const l=cS(e),u=tt.measureFont(l);u.fontSize===0&&(u.fontSize=e.fontSize,u.ascent=e.fontSize);const f=tt.__context;f.font=l;const p=(o?tt._wordWrap(t,e,i):t).split(/(?:\r\n|\r|\n)/),_=new Array(p.length);let v=0;for(let F=0;F<p.length;F++){const D=tt._measureText(p[F],e.letterSpacing,f);_[F]=D,v=Math.max(v,D)}const m=((R=e._stroke)==null?void 0:R.width)||0;let C=v+m;e.dropShadow&&(C+=e.dropShadow.distance);const M=e.lineHeight||u.fontSize;let w=Math.max(M,u.fontSize+m)+(p.length-1)*(M+e.leading);return e.dropShadow&&(w+=e.dropShadow.distance),new tt(t,e,C,w,p,_,M+e.leading,v,u)}static _measureText(t,e,i){let o=!1;tt.experimentalLetterSpacingSupported&&(tt.experimentalLetterSpacing?(i.letterSpacing=`${e}px`,i.textLetterSpacing=`${e}px`,o=!0):(i.letterSpacing="0px",i.textLetterSpacing="0px"));const a=i.measureText(t);let l=a.width;const u=-a.actualBoundingBoxLeft;let d=a.actualBoundingBoxRight-u;if(l>0)if(o)l-=e,d-=e;else{const p=(tt.graphemeSegmenter(t).length-1)*e;l+=p,d+=p}return Math.max(l,d)}static _wordWrap(t,e,i=tt._canvas){const o=i.getContext("2d",ya);let a=0,l="",u="";const f=Object.create(null),{letterSpacing:d,whiteSpace:p}=e,_=tt._collapseSpaces(p),v=tt._collapseNewlines(p);let m=!_;const C=e.wordWrapWidth+d,M=tt._tokenize(t);for(let w=0;w<M.length;w++){let T=M[w];if(tt._isNewline(T)){if(!v){u+=tt._addLine(l),m=!_,l="",a=0;continue}T=" "}if(_){const F=tt.isBreakingSpace(T),D=tt.isBreakingSpace(l[l.length-1]);if(F&&D)continue}const R=tt._getFromCache(T,d,f,o);if(R>C)if(l!==""&&(u+=tt._addLine(l),l="",a=0),tt.canBreakWords(T,e.breakWords)){const F=tt.wordWrapSplit(T);for(let D=0;D<F.length;D++){let X=F[D],z=X,$=1;for(;F[D+$];){const et=F[D+$];if(!tt.canBreakChars(z,et,T,D,e.breakWords))X+=et;else break;z=et,$++}D+=$-1;const rt=tt._getFromCache(X,d,f,o);rt+a>C&&(u+=tt._addLine(l),m=!1,l="",a=0),l+=X,a+=rt}}else{l.length>0&&(u+=tt._addLine(l),l="",a=0);const F=w===M.length-1;u+=tt._addLine(T,!F),m=!1,l="",a=0}else R+a>C&&(m=!1,u+=tt._addLine(l),l="",a=0),(l.length>0||!tt.isBreakingSpace(T)||m)&&(l+=T,a+=R)}return u+=tt._addLine(l,!1),u}static _addLine(t,e=!0){return t=tt._trimRight(t),t=e?`${t}
`:t,t}static _getFromCache(t,e,i,o){let a=i[t];return typeof a!="number"&&(a=tt._measureText(t,e,o)+e,i[t]=a),a}static _collapseSpaces(t){return t==="normal"||t==="pre-line"}static _collapseNewlines(t){return t==="normal"}static _trimRight(t){if(typeof t!="string")return"";for(let e=t.length-1;e>=0;e--){const i=t[e];if(!tt.isBreakingSpace(i))break;t=t.slice(0,-1)}return t}static _isNewline(t){return typeof t!="string"?!1:tt._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,e){return typeof t!="string"?!1:tt._breakingSpaces.includes(t.charCodeAt(0))}static _tokenize(t){const e=[];let i="";if(typeof t!="string")return e;for(let o=0;o<t.length;o++){const a=t[o],l=t[o+1];if(tt.isBreakingSpace(a,l)||tt._isNewline(a)){i!==""&&(e.push(i),i=""),e.push(a);continue}i+=a}return i!==""&&e.push(i),e}static canBreakWords(t,e){return e}static canBreakChars(t,e,i,o,a){return!0}static wordWrapSplit(t){return tt.graphemeSegmenter(t)}static measureFont(t){if(tt._fonts[t])return tt._fonts[t];const e=tt._context;e.font=t;const i=e.measureText(tt.METRICS_STRING+tt.BASELINE_SYMBOL),o={ascent:i.actualBoundingBoxAscent,descent:i.actualBoundingBoxDescent,fontSize:i.actualBoundingBoxAscent+i.actualBoundingBoxDescent};return tt._fonts[t]=o,o}static clearMetrics(t=""){t?delete tt._fonts[t]:tt._fonts={}}static get _canvas(){if(!tt.__canvas){let t;try{const e=new OffscreenCanvas(0,0),i=e.getContext("2d",ya);if(i!=null&&i.measureText)return tt.__canvas=e,e;t=Ve.get().createCanvas()}catch{t=Ve.get().createCanvas()}t.width=t.height=10,tt.__canvas=t}return tt.__canvas}static get _context(){return tt.__context||(tt.__context=tt._canvas.getContext("2d",ya)),tt.__context}};Ze.METRICS_STRING="|q";Ze.BASELINE_SYMBOL="M";Ze.BASELINE_MULTIPLIER=1.4;Ze.HEIGHT_MULTIPLIER=2;Ze.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const n=new Intl.Segmenter;return t=>[...n.segment(t)].map(e=>e.segment)}return n=>[...n]})();Ze.experimentalLetterSpacing=!1;Ze._fonts={};Ze._newlines=[10,13];Ze._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];Ze._measurementCache={};let fS=Ze;class ys extends Ja{constructor(t){t instanceof Xe&&(t={context:t});const{context:e,roundPixels:i,...o}=t||{};super({label:"Graphics",...o}),this.renderPipeId="graphics",e?this._context=e:this._context=this._ownedContext=new Xe,this._context.on("update",this.onViewUpdate,this),this.allowChildren=!1,this.roundPixels=i??!1}set context(t){t!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=t,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(t){return this._context.containsPoint(t)}destroy(t){this._ownedContext&&!t?this._ownedContext.destroy(t):(t===!0||(t==null?void 0:t.context)===!0)&&this._context.destroy(t),this._ownedContext=null,this._context=null,super.destroy(t)}_callContextMethod(t,e){return this.context[t](...e),this}setFillStyle(...t){return this._callContextMethod("setFillStyle",t)}setStrokeStyle(...t){return this._callContextMethod("setStrokeStyle",t)}fill(...t){return this._callContextMethod("fill",t)}stroke(...t){return this._callContextMethod("stroke",t)}texture(...t){return this._callContextMethod("texture",t)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...t){return this._callContextMethod("arc",t)}arcTo(...t){return this._callContextMethod("arcTo",t)}arcToSvg(...t){return this._callContextMethod("arcToSvg",t)}bezierCurveTo(...t){return this._callContextMethod("bezierCurveTo",t)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...t){return this._callContextMethod("ellipse",t)}circle(...t){return this._callContextMethod("circle",t)}path(...t){return this._callContextMethod("path",t)}lineTo(...t){return this._callContextMethod("lineTo",t)}moveTo(...t){return this._callContextMethod("moveTo",t)}quadraticCurveTo(...t){return this._callContextMethod("quadraticCurveTo",t)}rect(...t){return this._callContextMethod("rect",t)}roundRect(...t){return this._callContextMethod("roundRect",t)}poly(...t){return this._callContextMethod("poly",t)}regularPoly(...t){return this._callContextMethod("regularPoly",t)}roundPoly(...t){return this._callContextMethod("roundPoly",t)}roundShape(...t){return this._callContextMethod("roundShape",t)}filletRect(...t){return this._callContextMethod("filletRect",t)}chamferRect(...t){return this._callContextMethod("chamferRect",t)}star(...t){return this._callContextMethod("star",t)}svg(...t){return this._callContextMethod("svg",t)}restore(...t){return this._callContextMethod("restore",t)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...t){return this._callContextMethod("rotate",t)}scaleTransform(...t){return this._callContextMethod("scale",t)}setTransform(...t){return this._callContextMethod("setTransform",t)}transform(...t){return this._callContextMethod("transform",t)}translateTransform(...t){return this._callContextMethod("translate",t)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(t){this._context.fillStyle=t}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(t){this._context.strokeStyle=t}clone(t=!1){return t?new ys(this._context.clone()):(this._ownedContext=null,new ys(this._context))}lineStyle(t,e,i){Rt($t,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const o={};return t&&(o.width=t),e&&(o.color=e),i&&(o.alpha=i),this.context.strokeStyle=o,this}beginFill(t,e){Rt($t,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const i={};return t!==void 0&&(i.color=t),e!==void 0&&(i.alpha=e),this.context.fillStyle=i,this}endFill(){Rt($t,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const t=this.context.strokeStyle;return(t.width!==Xe.defaultStrokeStyle.width||t.color!==Xe.defaultStrokeStyle.color||t.alpha!==Xe.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...t){return Rt($t,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",t)}drawEllipse(...t){return Rt($t,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",t)}drawPolygon(...t){return Rt($t,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",t)}drawRect(...t){return Rt($t,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",t)}drawRoundedRect(...t){return Rt($t,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",t)}drawStar(...t){return Rt($t,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",t)}}class dS extends Ja{constructor(t,e){const{text:i,resolution:o,style:a,anchor:l,width:u,height:f,roundPixels:d,...p}=t;super({...p}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=e,this.text=i??"",this.style=a,this.resolution=o??null,this.allowChildren=!1,this._anchor=new me({_onUpdate:()=>{this.onViewUpdate()}}),l&&(this.anchor=l),this.roundPixels=d??!1,u!==void 0&&(this.width=u),f!==void 0&&(this.height=f)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}set text(t){t=t.toString(),this._text!==t&&(this._text=t,this.onViewUpdate())}get text(){return this._text}set resolution(t){this._autoResolution=t===null,this._resolution=t,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(t){var e;t||(t={}),(e=this._style)==null||e.off("update",this.onViewUpdate,this),t instanceof this._styleClass?this._style=t:this._style=new this._styleClass(t),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(t){this._setWidth(t,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(t){this._setHeight(t,this.bounds.height)}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this.bounds.width,t.height=Math.abs(this.scale.y)*this.bounds.height,t}setSize(t,e){typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,this.bounds.width),e!==void 0&&this._setHeight(e,this.bounds.height)}containsPoint(t){const e=this.bounds.width,i=this.bounds.height,o=-e*this.anchor.x;let a=0;return t.x>=o&&t.x<=o+e&&(a=-i*this.anchor.y,t.y>=a&&t.y<=a+i)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}_getKey(){return`${this.text}:${this._style.styleKey}:${this._resolution}`}destroy(t=!1){super.destroy(t),this.owner=null,this._bounds=null,this._anchor=null,(typeof t=="boolean"?t:t!=null&&t.style)&&this._style.destroy(t),this._style=null,this._text=null}}function pS(n,t){let e=n[0]??{};return(typeof e=="string"||n[1])&&(Rt($t,`use new ${t}({ text: "hi!", style }) instead`),e={text:e,style:n[1]}),e}class _S extends dS{constructor(...t){const e=pS(t,"Text");super(e,Na),this.renderPipeId="text"}updateBounds(){const t=this._bounds,e=this._anchor,i=fS.measureText(this._text,this._style),{width:o,height:a}=i;t.minX=-e._x*o,t.maxX=t.minX+o,t.minY=-e._y*a,t.maxY=t.minY+a}}De.add(F1,B1);const gS={selectionDuration:2e3,selectionResetMovementThreshold:100,selectionDisplayDuration:5e3,animationDurationPointerAppears:1e3,animationDurationPointerLeaves:250,maxFPS:144,colorNeutralPointer:"rgba(204,204,204,0.75)",colorSelectionProgress:"#006ba8",colorSelectedPointerA:"#7AC74F",colorSelectedPointerB:"#47B0D7",colorSelectedPointerC:"#FFB947",colorSelectedPointerD:"#F34B3F",colorPointerText:"#434343",fontPointerText:"sans-serif",pointerSize:128};var ti,Xt,va,Qc,ei=0,Bd=[],Vt=Ft,Jc=Vt.__b,tf=Vt.__r,ef=Vt.diffed,nf=Vt.__c,rf=Vt.unmount,sf=Vt.__;function uh(n,t){Vt.__h&&Vt.__h(Xt,n,ei||t),ei=0;var e=Xt.__H||(Xt.__H={__:[],__h:[]});return n>=e.__.length&&e.__.push({}),e.__[n]}function ds(n){return ei=1,mS(Gd,n)}function mS(n,t,e){var i=uh(ti++,2);if(i.t=n,!i.__c&&(i.__=[Gd(void 0,t),function(u){var f=i.__N?i.__N[0]:i.__[0],d=i.t(f,u);f!==d&&(i.__N=[d,i.__[1]],i.__c.setState({}))}],i.__c=Xt,!Xt.__f)){var o=function(u,f,d){if(!i.__c.__H)return!0;var p=i.__c.__H.__.filter(function(v){return!!v.__c});if(p.every(function(v){return!v.__N}))return!a||a.call(this,u,f,d);var _=i.__c.props!==u;return p.forEach(function(v){if(v.__N){var m=v.__[0];v.__=v.__N,v.__N=void 0,m!==v.__[0]&&(_=!0)}}),a&&a.call(this,u,f,d)||_};Xt.__f=!0;var a=Xt.shouldComponentUpdate,l=Xt.componentWillUpdate;Xt.componentWillUpdate=function(u,f,d){if(this.__e){var p=a;a=void 0,o(u,f,d),a=p}l&&l.call(this,u,f,d)},Xt.shouldComponentUpdate=o}return i.__N||i.__}function os(n,t){var e=uh(ti++,3);!Vt.__s&&Ld(e.__H,t)&&(e.__=n,e.u=t,Xt.__H.__h.push(e))}function xS(n){return ei=5,ni(function(){return{current:n}},[])}function ni(n,t){var e=uh(ti++,7);return Ld(e.__H,t)&&(e.__=n(),e.__H=t,e.__h=n),e.__}function yS(n,t){return ei=8,ni(function(){return n},t)}function vS(){for(var n;n=Bd.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(ps),n.__H.__h.forEach($a),n.__H.__h=[]}catch(t){n.__H.__h=[],Vt.__e(t,n.__v)}}Vt.__b=function(n){Xt=null,Jc&&Jc(n)},Vt.__=function(n,t){n&&t.__k&&t.__k.__m&&(n.__m=t.__k.__m),sf&&sf(n,t)},Vt.__r=function(n){tf&&tf(n),ti=0;var t=(Xt=n.__c).__H;t&&(va===Xt?(t.__h=[],Xt.__h=[],t.__.forEach(function(e){e.__N&&(e.__=e.__N),e.u=e.__N=void 0})):(t.__h.forEach(ps),t.__h.forEach($a),t.__h=[],ti=0)),va=Xt},Vt.diffed=function(n){ef&&ef(n);var t=n.__c;t&&t.__H&&(t.__H.__h.length&&(Bd.push(t)!==1&&Qc===Vt.requestAnimationFrame||((Qc=Vt.requestAnimationFrame)||bS)(vS)),t.__H.__.forEach(function(e){e.u&&(e.__H=e.u),e.u=void 0})),va=Xt=null},Vt.__c=function(n,t){t.some(function(e){try{e.__h.forEach(ps),e.__h=e.__h.filter(function(i){return!i.__||$a(i)})}catch(i){t.some(function(o){o.__h&&(o.__h=[])}),t=[],Vt.__e(i,e.__v)}}),nf&&nf(n,t)},Vt.unmount=function(n){rf&&rf(n);var t,e=n.__c;e&&e.__H&&(e.__H.__.forEach(function(i){try{ps(i)}catch(o){t=o}}),e.__H=void 0,t&&Vt.__e(t,e.__v))};var of=typeof requestAnimationFrame=="function";function bS(n){var t,e=function(){clearTimeout(i),of&&cancelAnimationFrame(t),setTimeout(n)},i=setTimeout(e,100);of&&(t=requestAnimationFrame(e))}function ps(n){var t=Xt,e=n.__c;typeof e=="function"&&(n.__c=void 0,e()),Xt=t}function $a(n){var t=Xt;n.__c=n.__(),Xt=t}function Ld(n,t){return!n||n.length!==t.length||t.some(function(e,i){return e!==n[i]})}function Gd(n,t){return typeof t=="function"?t(n):t}var Hr={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var wS=Hr.exports,af;function SS(){return af||(af=1,function(n,t){(function(){var e,i="4.17.21",o=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",u="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",d=500,p="__lodash_placeholder__",_=1,v=2,m=4,C=1,M=2,w=1,T=2,R=4,F=8,D=16,X=32,z=64,$=128,rt=256,et=512,Z=30,K="...",yt=800,At=16,zt=1,Ue=2,b=3,P=1/0,I=9007199254740991,L=17976931348623157e292,O=NaN,W=4294967295,H=W-1,V=W>>>1,it=[["ary",$],["bind",w],["bindKey",T],["curry",F],["curryRight",D],["flip",et],["partial",X],["partialRight",z],["rearg",rt]],Q="[object Arguments]",mt="[object Array]",St="[object AsyncFunction]",ft="[object Boolean]",It="[object Date]",vt="[object DOMException]",fe="[object Error]",jt="[object Function]",ye="[object GeneratorFunction]",Ut="[object Map]",at="[object Number]",xt="[object Null]",Me="[object Object]",ri="[object Promise]",dh="[object Proxy]",xr="[object RegExp]",We="[object Set]",yr="[object String]",ii="[object Symbol]",Wd="[object Undefined]",vr="[object WeakMap]",Nd="[object WeakSet]",br="[object ArrayBuffer]",Kn="[object DataView]",Ps="[object Float32Array]",Ts="[object Float64Array]",Ms="[object Int8Array]",Is="[object Int16Array]",Es="[object Int32Array]",Rs="[object Uint8Array]",ks="[object Uint8ClampedArray]",Fs="[object Uint16Array]",Bs="[object Uint32Array]",$d=/\b__p \+= '';/g,zd=/\b(__p \+=) '' \+/g,Hd=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ph=/&(?:amp|lt|gt|quot|#39);/g,_h=/[&<>"']/g,Yd=RegExp(ph.source),Xd=RegExp(_h.source),Vd=/<%-([\s\S]+?)%>/g,qd=/<%([\s\S]+?)%>/g,gh=/<%=([\s\S]+?)%>/g,Kd=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Zd=/^\w*$/,jd=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ls=/[\\^$.*+?()[\]{}|]/g,Qd=RegExp(Ls.source),Gs=/^\s+/,Jd=/\s/,tp=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ep=/\{\n\/\* \[wrapped with (.+)\] \*/,np=/,? & /,rp=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ip=/[()=,{}\[\]\/\s]/,sp=/\\(\\)?/g,op=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,mh=/\w*$/,ap=/^[-+]0x[0-9a-f]+$/i,hp=/^0b[01]+$/i,lp=/^\[object .+?Constructor\]$/,up=/^0o[0-7]+$/i,cp=/^(?:0|[1-9]\d*)$/,fp=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,si=/($^)/,dp=/['\n\r\u2028\u2029\\]/g,oi="\\ud800-\\udfff",pp="\\u0300-\\u036f",_p="\\ufe20-\\ufe2f",gp="\\u20d0-\\u20ff",xh=pp+_p+gp,yh="\\u2700-\\u27bf",vh="a-z\\xdf-\\xf6\\xf8-\\xff",mp="\\xac\\xb1\\xd7\\xf7",xp="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",yp="\\u2000-\\u206f",vp=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",bh="A-Z\\xc0-\\xd6\\xd8-\\xde",wh="\\ufe0e\\ufe0f",Sh=mp+xp+yp+vp,Os="[']",bp="["+oi+"]",Ch="["+Sh+"]",ai="["+xh+"]",Ah="\\d+",wp="["+yh+"]",Ph="["+vh+"]",Th="[^"+oi+Sh+Ah+yh+vh+bh+"]",Ds="\\ud83c[\\udffb-\\udfff]",Sp="(?:"+ai+"|"+Ds+")",Mh="[^"+oi+"]",Us="(?:\\ud83c[\\udde6-\\uddff]){2}",Ws="[\\ud800-\\udbff][\\udc00-\\udfff]",Zn="["+bh+"]",Ih="\\u200d",Eh="(?:"+Ph+"|"+Th+")",Cp="(?:"+Zn+"|"+Th+")",Rh="(?:"+Os+"(?:d|ll|m|re|s|t|ve))?",kh="(?:"+Os+"(?:D|LL|M|RE|S|T|VE))?",Fh=Sp+"?",Bh="["+wh+"]?",Ap="(?:"+Ih+"(?:"+[Mh,Us,Ws].join("|")+")"+Bh+Fh+")*",Pp="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Tp="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Lh=Bh+Fh+Ap,Mp="(?:"+[wp,Us,Ws].join("|")+")"+Lh,Ip="(?:"+[Mh+ai+"?",ai,Us,Ws,bp].join("|")+")",Ep=RegExp(Os,"g"),Rp=RegExp(ai,"g"),Ns=RegExp(Ds+"(?="+Ds+")|"+Ip+Lh,"g"),kp=RegExp([Zn+"?"+Ph+"+"+Rh+"(?="+[Ch,Zn,"$"].join("|")+")",Cp+"+"+kh+"(?="+[Ch,Zn+Eh,"$"].join("|")+")",Zn+"?"+Eh+"+"+Rh,Zn+"+"+kh,Tp,Pp,Ah,Mp].join("|"),"g"),Fp=RegExp("["+Ih+oi+xh+wh+"]"),Bp=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Lp=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Gp=-1,Lt={};Lt[Ps]=Lt[Ts]=Lt[Ms]=Lt[Is]=Lt[Es]=Lt[Rs]=Lt[ks]=Lt[Fs]=Lt[Bs]=!0,Lt[Q]=Lt[mt]=Lt[br]=Lt[ft]=Lt[Kn]=Lt[It]=Lt[fe]=Lt[jt]=Lt[Ut]=Lt[at]=Lt[Me]=Lt[xr]=Lt[We]=Lt[yr]=Lt[vr]=!1;var Bt={};Bt[Q]=Bt[mt]=Bt[br]=Bt[Kn]=Bt[ft]=Bt[It]=Bt[Ps]=Bt[Ts]=Bt[Ms]=Bt[Is]=Bt[Es]=Bt[Ut]=Bt[at]=Bt[Me]=Bt[xr]=Bt[We]=Bt[yr]=Bt[ii]=Bt[Rs]=Bt[ks]=Bt[Fs]=Bt[Bs]=!0,Bt[fe]=Bt[jt]=Bt[vr]=!1;var Op={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Dp={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Up={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Wp={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Np=parseFloat,$p=parseInt,Gh=typeof Ki=="object"&&Ki&&Ki.Object===Object&&Ki,zp=typeof self=="object"&&self&&self.Object===Object&&self,ne=Gh||zp||Function("return this")(),$s=t&&!t.nodeType&&t,Rn=$s&&!0&&n&&!n.nodeType&&n,Oh=Rn&&Rn.exports===$s,zs=Oh&&Gh.process,Ie=function(){try{var E=Rn&&Rn.require&&Rn.require("util").types;return E||zs&&zs.binding&&zs.binding("util")}catch{}}(),Dh=Ie&&Ie.isArrayBuffer,Uh=Ie&&Ie.isDate,Wh=Ie&&Ie.isMap,Nh=Ie&&Ie.isRegExp,$h=Ie&&Ie.isSet,zh=Ie&&Ie.isTypedArray;function ve(E,G,B){switch(B.length){case 0:return E.call(G);case 1:return E.call(G,B[0]);case 2:return E.call(G,B[0],B[1]);case 3:return E.call(G,B[0],B[1],B[2])}return E.apply(G,B)}function Hp(E,G,B,j){for(var ht=-1,Ct=E==null?0:E.length;++ht<Ct;){var Kt=E[ht];G(j,Kt,B(Kt),E)}return j}function Ee(E,G){for(var B=-1,j=E==null?0:E.length;++B<j&&G(E[B],B,E)!==!1;);return E}function Yp(E,G){for(var B=E==null?0:E.length;B--&&G(E[B],B,E)!==!1;);return E}function Hh(E,G){for(var B=-1,j=E==null?0:E.length;++B<j;)if(!G(E[B],B,E))return!1;return!0}function vn(E,G){for(var B=-1,j=E==null?0:E.length,ht=0,Ct=[];++B<j;){var Kt=E[B];G(Kt,B,E)&&(Ct[ht++]=Kt)}return Ct}function hi(E,G){var B=E==null?0:E.length;return!!B&&jn(E,G,0)>-1}function Hs(E,G,B){for(var j=-1,ht=E==null?0:E.length;++j<ht;)if(B(G,E[j]))return!0;return!1}function Gt(E,G){for(var B=-1,j=E==null?0:E.length,ht=Array(j);++B<j;)ht[B]=G(E[B],B,E);return ht}function bn(E,G){for(var B=-1,j=G.length,ht=E.length;++B<j;)E[ht+B]=G[B];return E}function Ys(E,G,B,j){var ht=-1,Ct=E==null?0:E.length;for(j&&Ct&&(B=E[++ht]);++ht<Ct;)B=G(B,E[ht],ht,E);return B}function Xp(E,G,B,j){var ht=E==null?0:E.length;for(j&&ht&&(B=E[--ht]);ht--;)B=G(B,E[ht],ht,E);return B}function Xs(E,G){for(var B=-1,j=E==null?0:E.length;++B<j;)if(G(E[B],B,E))return!0;return!1}var Vp=Vs("length");function qp(E){return E.split("")}function Kp(E){return E.match(rp)||[]}function Yh(E,G,B){var j;return B(E,function(ht,Ct,Kt){if(G(ht,Ct,Kt))return j=Ct,!1}),j}function li(E,G,B,j){for(var ht=E.length,Ct=B+(j?1:-1);j?Ct--:++Ct<ht;)if(G(E[Ct],Ct,E))return Ct;return-1}function jn(E,G,B){return G===G?a_(E,G,B):li(E,Xh,B)}function Zp(E,G,B,j){for(var ht=B-1,Ct=E.length;++ht<Ct;)if(j(E[ht],G))return ht;return-1}function Xh(E){return E!==E}function Vh(E,G){var B=E==null?0:E.length;return B?Ks(E,G)/B:O}function Vs(E){return function(G){return G==null?e:G[E]}}function qs(E){return function(G){return E==null?e:E[G]}}function qh(E,G,B,j,ht){return ht(E,function(Ct,Kt,Et){B=j?(j=!1,Ct):G(B,Ct,Kt,Et)}),B}function jp(E,G){var B=E.length;for(E.sort(G);B--;)E[B]=E[B].value;return E}function Ks(E,G){for(var B,j=-1,ht=E.length;++j<ht;){var Ct=G(E[j]);Ct!==e&&(B=B===e?Ct:B+Ct)}return B}function Zs(E,G){for(var B=-1,j=Array(E);++B<E;)j[B]=G(B);return j}function Qp(E,G){return Gt(G,function(B){return[B,E[B]]})}function Kh(E){return E&&E.slice(0,Jh(E)+1).replace(Gs,"")}function be(E){return function(G){return E(G)}}function js(E,G){return Gt(G,function(B){return E[B]})}function wr(E,G){return E.has(G)}function Zh(E,G){for(var B=-1,j=E.length;++B<j&&jn(G,E[B],0)>-1;);return B}function jh(E,G){for(var B=E.length;B--&&jn(G,E[B],0)>-1;);return B}function Jp(E,G){for(var B=E.length,j=0;B--;)E[B]===G&&++j;return j}var t_=qs(Op),e_=qs(Dp);function n_(E){return"\\"+Wp[E]}function r_(E,G){return E==null?e:E[G]}function Qn(E){return Fp.test(E)}function i_(E){return Bp.test(E)}function s_(E){for(var G,B=[];!(G=E.next()).done;)B.push(G.value);return B}function Qs(E){var G=-1,B=Array(E.size);return E.forEach(function(j,ht){B[++G]=[ht,j]}),B}function Qh(E,G){return function(B){return E(G(B))}}function wn(E,G){for(var B=-1,j=E.length,ht=0,Ct=[];++B<j;){var Kt=E[B];(Kt===G||Kt===p)&&(E[B]=p,Ct[ht++]=B)}return Ct}function ui(E){var G=-1,B=Array(E.size);return E.forEach(function(j){B[++G]=j}),B}function o_(E){var G=-1,B=Array(E.size);return E.forEach(function(j){B[++G]=[j,j]}),B}function a_(E,G,B){for(var j=B-1,ht=E.length;++j<ht;)if(E[j]===G)return j;return-1}function h_(E,G,B){for(var j=B+1;j--;)if(E[j]===G)return j;return j}function Jn(E){return Qn(E)?u_(E):Vp(E)}function Ne(E){return Qn(E)?c_(E):qp(E)}function Jh(E){for(var G=E.length;G--&&Jd.test(E.charAt(G)););return G}var l_=qs(Up);function u_(E){for(var G=Ns.lastIndex=0;Ns.test(E);)++G;return G}function c_(E){return E.match(Ns)||[]}function f_(E){return E.match(kp)||[]}var d_=function E(G){G=G==null?ne:tr.defaults(ne.Object(),G,tr.pick(ne,Lp));var B=G.Array,j=G.Date,ht=G.Error,Ct=G.Function,Kt=G.Math,Et=G.Object,Js=G.RegExp,p_=G.String,Re=G.TypeError,ci=B.prototype,__=Ct.prototype,er=Et.prototype,fi=G["__core-js_shared__"],di=__.toString,Tt=er.hasOwnProperty,g_=0,tl=function(){var r=/[^.]+$/.exec(fi&&fi.keys&&fi.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),pi=er.toString,m_=di.call(Et),x_=ne._,y_=Js("^"+di.call(Tt).replace(Ls,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_i=Oh?G.Buffer:e,Sn=G.Symbol,gi=G.Uint8Array,el=_i?_i.allocUnsafe:e,mi=Qh(Et.getPrototypeOf,Et),nl=Et.create,rl=er.propertyIsEnumerable,xi=ci.splice,il=Sn?Sn.isConcatSpreadable:e,Sr=Sn?Sn.iterator:e,kn=Sn?Sn.toStringTag:e,yi=function(){try{var r=On(Et,"defineProperty");return r({},"",{}),r}catch{}}(),v_=G.clearTimeout!==ne.clearTimeout&&G.clearTimeout,b_=j&&j.now!==ne.Date.now&&j.now,w_=G.setTimeout!==ne.setTimeout&&G.setTimeout,vi=Kt.ceil,bi=Kt.floor,to=Et.getOwnPropertySymbols,S_=_i?_i.isBuffer:e,sl=G.isFinite,C_=ci.join,A_=Qh(Et.keys,Et),Zt=Kt.max,ie=Kt.min,P_=j.now,T_=G.parseInt,ol=Kt.random,M_=ci.reverse,eo=On(G,"DataView"),Cr=On(G,"Map"),no=On(G,"Promise"),nr=On(G,"Set"),Ar=On(G,"WeakMap"),Pr=On(Et,"create"),wi=Ar&&new Ar,rr={},I_=Dn(eo),E_=Dn(Cr),R_=Dn(no),k_=Dn(nr),F_=Dn(Ar),Si=Sn?Sn.prototype:e,Tr=Si?Si.valueOf:e,al=Si?Si.toString:e;function x(r){if(Wt(r)&&!lt(r)&&!(r instanceof _t)){if(r instanceof ke)return r;if(Tt.call(r,"__wrapped__"))return hu(r)}return new ke(r)}var ir=function(){function r(){}return function(s){if(!Ot(s))return{};if(nl)return nl(s);r.prototype=s;var h=new r;return r.prototype=e,h}}();function Ci(){}function ke(r,s){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!s,this.__index__=0,this.__values__=e}x.templateSettings={escape:Vd,evaluate:qd,interpolate:gh,variable:"",imports:{_:x}},x.prototype=Ci.prototype,x.prototype.constructor=x,ke.prototype=ir(Ci.prototype),ke.prototype.constructor=ke;function _t(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=W,this.__views__=[]}function B_(){var r=new _t(this.__wrapped__);return r.__actions__=de(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=de(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=de(this.__views__),r}function L_(){if(this.__filtered__){var r=new _t(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}function G_(){var r=this.__wrapped__.value(),s=this.__dir__,h=lt(r),c=s<0,g=h?r.length:0,y=qg(0,g,this.__views__),S=y.start,A=y.end,k=A-S,U=c?A:S-1,N=this.__iteratees__,Y=N.length,q=0,J=ie(k,this.__takeCount__);if(!h||!c&&g==k&&J==k)return Rl(r,this.__actions__);var st=[];t:for(;k--&&q<J;){U+=s;for(var ct=-1,ot=r[U];++ct<Y;){var pt=N[ct],gt=pt.iteratee,Ce=pt.type,ue=gt(ot);if(Ce==Ue)ot=ue;else if(!ue){if(Ce==zt)continue t;break t}}st[q++]=ot}return st}_t.prototype=ir(Ci.prototype),_t.prototype.constructor=_t;function Fn(r){var s=-1,h=r==null?0:r.length;for(this.clear();++s<h;){var c=r[s];this.set(c[0],c[1])}}function O_(){this.__data__=Pr?Pr(null):{},this.size=0}function D_(r){var s=this.has(r)&&delete this.__data__[r];return this.size-=s?1:0,s}function U_(r){var s=this.__data__;if(Pr){var h=s[r];return h===f?e:h}return Tt.call(s,r)?s[r]:e}function W_(r){var s=this.__data__;return Pr?s[r]!==e:Tt.call(s,r)}function N_(r,s){var h=this.__data__;return this.size+=this.has(r)?0:1,h[r]=Pr&&s===e?f:s,this}Fn.prototype.clear=O_,Fn.prototype.delete=D_,Fn.prototype.get=U_,Fn.prototype.has=W_,Fn.prototype.set=N_;function on(r){var s=-1,h=r==null?0:r.length;for(this.clear();++s<h;){var c=r[s];this.set(c[0],c[1])}}function $_(){this.__data__=[],this.size=0}function z_(r){var s=this.__data__,h=Ai(s,r);if(h<0)return!1;var c=s.length-1;return h==c?s.pop():xi.call(s,h,1),--this.size,!0}function H_(r){var s=this.__data__,h=Ai(s,r);return h<0?e:s[h][1]}function Y_(r){return Ai(this.__data__,r)>-1}function X_(r,s){var h=this.__data__,c=Ai(h,r);return c<0?(++this.size,h.push([r,s])):h[c][1]=s,this}on.prototype.clear=$_,on.prototype.delete=z_,on.prototype.get=H_,on.prototype.has=Y_,on.prototype.set=X_;function an(r){var s=-1,h=r==null?0:r.length;for(this.clear();++s<h;){var c=r[s];this.set(c[0],c[1])}}function V_(){this.size=0,this.__data__={hash:new Fn,map:new(Cr||on),string:new Fn}}function q_(r){var s=Oi(this,r).delete(r);return this.size-=s?1:0,s}function K_(r){return Oi(this,r).get(r)}function Z_(r){return Oi(this,r).has(r)}function j_(r,s){var h=Oi(this,r),c=h.size;return h.set(r,s),this.size+=h.size==c?0:1,this}an.prototype.clear=V_,an.prototype.delete=q_,an.prototype.get=K_,an.prototype.has=Z_,an.prototype.set=j_;function Bn(r){var s=-1,h=r==null?0:r.length;for(this.__data__=new an;++s<h;)this.add(r[s])}function Q_(r){return this.__data__.set(r,f),this}function J_(r){return this.__data__.has(r)}Bn.prototype.add=Bn.prototype.push=Q_,Bn.prototype.has=J_;function $e(r){var s=this.__data__=new on(r);this.size=s.size}function tg(){this.__data__=new on,this.size=0}function eg(r){var s=this.__data__,h=s.delete(r);return this.size=s.size,h}function ng(r){return this.__data__.get(r)}function rg(r){return this.__data__.has(r)}function ig(r,s){var h=this.__data__;if(h instanceof on){var c=h.__data__;if(!Cr||c.length<o-1)return c.push([r,s]),this.size=++h.size,this;h=this.__data__=new an(c)}return h.set(r,s),this.size=h.size,this}$e.prototype.clear=tg,$e.prototype.delete=eg,$e.prototype.get=ng,$e.prototype.has=rg,$e.prototype.set=ig;function hl(r,s){var h=lt(r),c=!h&&Un(r),g=!h&&!c&&Mn(r),y=!h&&!c&&!g&&hr(r),S=h||c||g||y,A=S?Zs(r.length,p_):[],k=A.length;for(var U in r)(s||Tt.call(r,U))&&!(S&&(U=="length"||g&&(U=="offset"||U=="parent")||y&&(U=="buffer"||U=="byteLength"||U=="byteOffset")||cn(U,k)))&&A.push(U);return A}function ll(r){var s=r.length;return s?r[po(0,s-1)]:e}function sg(r,s){return Di(de(r),Ln(s,0,r.length))}function og(r){return Di(de(r))}function ro(r,s,h){(h!==e&&!ze(r[s],h)||h===e&&!(s in r))&&hn(r,s,h)}function Mr(r,s,h){var c=r[s];(!(Tt.call(r,s)&&ze(c,h))||h===e&&!(s in r))&&hn(r,s,h)}function Ai(r,s){for(var h=r.length;h--;)if(ze(r[h][0],s))return h;return-1}function ag(r,s,h,c){return Cn(r,function(g,y,S){s(c,g,h(g),S)}),c}function ul(r,s){return r&&Qe(s,Qt(s),r)}function hg(r,s){return r&&Qe(s,_e(s),r)}function hn(r,s,h){s=="__proto__"&&yi?yi(r,s,{configurable:!0,enumerable:!0,value:h,writable:!0}):r[s]=h}function io(r,s){for(var h=-1,c=s.length,g=B(c),y=r==null;++h<c;)g[h]=y?e:Uo(r,s[h]);return g}function Ln(r,s,h){return r===r&&(h!==e&&(r=r<=h?r:h),s!==e&&(r=r>=s?r:s)),r}function Fe(r,s,h,c,g,y){var S,A=s&_,k=s&v,U=s&m;if(h&&(S=g?h(r,c,g,y):h(r)),S!==e)return S;if(!Ot(r))return r;var N=lt(r);if(N){if(S=Zg(r),!A)return de(r,S)}else{var Y=se(r),q=Y==jt||Y==ye;if(Mn(r))return Bl(r,A);if(Y==Me||Y==Q||q&&!g){if(S=k||q?{}:Jl(r),!A)return k?Ug(r,hg(S,r)):Dg(r,ul(S,r))}else{if(!Bt[Y])return g?r:{};S=jg(r,Y,A)}}y||(y=new $e);var J=y.get(r);if(J)return J;y.set(r,S),Mu(r)?r.forEach(function(ot){S.add(Fe(ot,s,h,ot,r,y))}):Pu(r)&&r.forEach(function(ot,pt){S.set(pt,Fe(ot,s,h,pt,r,y))});var st=U?k?Ao:Co:k?_e:Qt,ct=N?e:st(r);return Ee(ct||r,function(ot,pt){ct&&(pt=ot,ot=r[pt]),Mr(S,pt,Fe(ot,s,h,pt,r,y))}),S}function lg(r){var s=Qt(r);return function(h){return cl(h,r,s)}}function cl(r,s,h){var c=h.length;if(r==null)return!c;for(r=Et(r);c--;){var g=h[c],y=s[g],S=r[g];if(S===e&&!(g in r)||!y(S))return!1}return!0}function fl(r,s,h){if(typeof r!="function")throw new Re(l);return Lr(function(){r.apply(e,h)},s)}function Ir(r,s,h,c){var g=-1,y=hi,S=!0,A=r.length,k=[],U=s.length;if(!A)return k;h&&(s=Gt(s,be(h))),c?(y=Hs,S=!1):s.length>=o&&(y=wr,S=!1,s=new Bn(s));t:for(;++g<A;){var N=r[g],Y=h==null?N:h(N);if(N=c||N!==0?N:0,S&&Y===Y){for(var q=U;q--;)if(s[q]===Y)continue t;k.push(N)}else y(s,Y,c)||k.push(N)}return k}var Cn=Ul(je),dl=Ul(oo,!0);function ug(r,s){var h=!0;return Cn(r,function(c,g,y){return h=!!s(c,g,y),h}),h}function Pi(r,s,h){for(var c=-1,g=r.length;++c<g;){var y=r[c],S=s(y);if(S!=null&&(A===e?S===S&&!Se(S):h(S,A)))var A=S,k=y}return k}function cg(r,s,h,c){var g=r.length;for(h=ut(h),h<0&&(h=-h>g?0:g+h),c=c===e||c>g?g:ut(c),c<0&&(c+=g),c=h>c?0:Eu(c);h<c;)r[h++]=s;return r}function pl(r,s){var h=[];return Cn(r,function(c,g,y){s(c,g,y)&&h.push(c)}),h}function re(r,s,h,c,g){var y=-1,S=r.length;for(h||(h=Jg),g||(g=[]);++y<S;){var A=r[y];s>0&&h(A)?s>1?re(A,s-1,h,c,g):bn(g,A):c||(g[g.length]=A)}return g}var so=Wl(),_l=Wl(!0);function je(r,s){return r&&so(r,s,Qt)}function oo(r,s){return r&&_l(r,s,Qt)}function Ti(r,s){return vn(s,function(h){return fn(r[h])})}function Gn(r,s){s=Pn(s,r);for(var h=0,c=s.length;r!=null&&h<c;)r=r[Je(s[h++])];return h&&h==c?r:e}function gl(r,s,h){var c=s(r);return lt(r)?c:bn(c,h(r))}function he(r){return r==null?r===e?Wd:xt:kn&&kn in Et(r)?Vg(r):o0(r)}function ao(r,s){return r>s}function fg(r,s){return r!=null&&Tt.call(r,s)}function dg(r,s){return r!=null&&s in Et(r)}function pg(r,s,h){return r>=ie(s,h)&&r<Zt(s,h)}function ho(r,s,h){for(var c=h?Hs:hi,g=r[0].length,y=r.length,S=y,A=B(y),k=1/0,U=[];S--;){var N=r[S];S&&s&&(N=Gt(N,be(s))),k=ie(N.length,k),A[S]=!h&&(s||g>=120&&N.length>=120)?new Bn(S&&N):e}N=r[0];var Y=-1,q=A[0];t:for(;++Y<g&&U.length<k;){var J=N[Y],st=s?s(J):J;if(J=h||J!==0?J:0,!(q?wr(q,st):c(U,st,h))){for(S=y;--S;){var ct=A[S];if(!(ct?wr(ct,st):c(r[S],st,h)))continue t}q&&q.push(st),U.push(J)}}return U}function _g(r,s,h,c){return je(r,function(g,y,S){s(c,h(g),y,S)}),c}function Er(r,s,h){s=Pn(s,r),r=ru(r,s);var c=r==null?r:r[Je(Le(s))];return c==null?e:ve(c,r,h)}function ml(r){return Wt(r)&&he(r)==Q}function gg(r){return Wt(r)&&he(r)==br}function mg(r){return Wt(r)&&he(r)==It}function Rr(r,s,h,c,g){return r===s?!0:r==null||s==null||!Wt(r)&&!Wt(s)?r!==r&&s!==s:xg(r,s,h,c,Rr,g)}function xg(r,s,h,c,g,y){var S=lt(r),A=lt(s),k=S?mt:se(r),U=A?mt:se(s);k=k==Q?Me:k,U=U==Q?Me:U;var N=k==Me,Y=U==Me,q=k==U;if(q&&Mn(r)){if(!Mn(s))return!1;S=!0,N=!1}if(q&&!N)return y||(y=new $e),S||hr(r)?Zl(r,s,h,c,g,y):Yg(r,s,k,h,c,g,y);if(!(h&C)){var J=N&&Tt.call(r,"__wrapped__"),st=Y&&Tt.call(s,"__wrapped__");if(J||st){var ct=J?r.value():r,ot=st?s.value():s;return y||(y=new $e),g(ct,ot,h,c,y)}}return q?(y||(y=new $e),Xg(r,s,h,c,g,y)):!1}function yg(r){return Wt(r)&&se(r)==Ut}function lo(r,s,h,c){var g=h.length,y=g,S=!c;if(r==null)return!y;for(r=Et(r);g--;){var A=h[g];if(S&&A[2]?A[1]!==r[A[0]]:!(A[0]in r))return!1}for(;++g<y;){A=h[g];var k=A[0],U=r[k],N=A[1];if(S&&A[2]){if(U===e&&!(k in r))return!1}else{var Y=new $e;if(c)var q=c(U,N,k,r,s,Y);if(!(q===e?Rr(N,U,C|M,c,Y):q))return!1}}return!0}function xl(r){if(!Ot(r)||e0(r))return!1;var s=fn(r)?y_:lp;return s.test(Dn(r))}function vg(r){return Wt(r)&&he(r)==xr}function bg(r){return Wt(r)&&se(r)==We}function wg(r){return Wt(r)&&Hi(r.length)&&!!Lt[he(r)]}function yl(r){return typeof r=="function"?r:r==null?ge:typeof r=="object"?lt(r)?wl(r[0],r[1]):bl(r):Nu(r)}function uo(r){if(!Br(r))return A_(r);var s=[];for(var h in Et(r))Tt.call(r,h)&&h!="constructor"&&s.push(h);return s}function Sg(r){if(!Ot(r))return s0(r);var s=Br(r),h=[];for(var c in r)c=="constructor"&&(s||!Tt.call(r,c))||h.push(c);return h}function co(r,s){return r<s}function vl(r,s){var h=-1,c=pe(r)?B(r.length):[];return Cn(r,function(g,y,S){c[++h]=s(g,y,S)}),c}function bl(r){var s=To(r);return s.length==1&&s[0][2]?eu(s[0][0],s[0][1]):function(h){return h===r||lo(h,r,s)}}function wl(r,s){return Io(r)&&tu(s)?eu(Je(r),s):function(h){var c=Uo(h,r);return c===e&&c===s?Wo(h,r):Rr(s,c,C|M)}}function Mi(r,s,h,c,g){r!==s&&so(s,function(y,S){if(g||(g=new $e),Ot(y))Cg(r,s,S,h,Mi,c,g);else{var A=c?c(Ro(r,S),y,S+"",r,s,g):e;A===e&&(A=y),ro(r,S,A)}},_e)}function Cg(r,s,h,c,g,y,S){var A=Ro(r,h),k=Ro(s,h),U=S.get(k);if(U){ro(r,h,U);return}var N=y?y(A,k,h+"",r,s,S):e,Y=N===e;if(Y){var q=lt(k),J=!q&&Mn(k),st=!q&&!J&&hr(k);N=k,q||J||st?lt(A)?N=A:Ht(A)?N=de(A):J?(Y=!1,N=Bl(k,!0)):st?(Y=!1,N=Ll(k,!0)):N=[]:Gr(k)||Un(k)?(N=A,Un(A)?N=Ru(A):(!Ot(A)||fn(A))&&(N=Jl(k))):Y=!1}Y&&(S.set(k,N),g(N,k,c,y,S),S.delete(k)),ro(r,h,N)}function Sl(r,s){var h=r.length;if(h)return s+=s<0?h:0,cn(s,h)?r[s]:e}function Cl(r,s,h){s.length?s=Gt(s,function(y){return lt(y)?function(S){return Gn(S,y.length===1?y[0]:y)}:y}):s=[ge];var c=-1;s=Gt(s,be(nt()));var g=vl(r,function(y,S,A){var k=Gt(s,function(U){return U(y)});return{criteria:k,index:++c,value:y}});return jp(g,function(y,S){return Og(y,S,h)})}function Ag(r,s){return Al(r,s,function(h,c){return Wo(r,c)})}function Al(r,s,h){for(var c=-1,g=s.length,y={};++c<g;){var S=s[c],A=Gn(r,S);h(A,S)&&kr(y,Pn(S,r),A)}return y}function Pg(r){return function(s){return Gn(s,r)}}function fo(r,s,h,c){var g=c?Zp:jn,y=-1,S=s.length,A=r;for(r===s&&(s=de(s)),h&&(A=Gt(r,be(h)));++y<S;)for(var k=0,U=s[y],N=h?h(U):U;(k=g(A,N,k,c))>-1;)A!==r&&xi.call(A,k,1),xi.call(r,k,1);return r}function Pl(r,s){for(var h=r?s.length:0,c=h-1;h--;){var g=s[h];if(h==c||g!==y){var y=g;cn(g)?xi.call(r,g,1):mo(r,g)}}return r}function po(r,s){return r+bi(ol()*(s-r+1))}function Tg(r,s,h,c){for(var g=-1,y=Zt(vi((s-r)/(h||1)),0),S=B(y);y--;)S[c?y:++g]=r,r+=h;return S}function _o(r,s){var h="";if(!r||s<1||s>I)return h;do s%2&&(h+=r),s=bi(s/2),s&&(r+=r);while(s);return h}function dt(r,s){return ko(nu(r,s,ge),r+"")}function Mg(r){return ll(lr(r))}function Ig(r,s){var h=lr(r);return Di(h,Ln(s,0,h.length))}function kr(r,s,h,c){if(!Ot(r))return r;s=Pn(s,r);for(var g=-1,y=s.length,S=y-1,A=r;A!=null&&++g<y;){var k=Je(s[g]),U=h;if(k==="__proto__"||k==="constructor"||k==="prototype")return r;if(g!=S){var N=A[k];U=c?c(N,k,A):e,U===e&&(U=Ot(N)?N:cn(s[g+1])?[]:{})}Mr(A,k,U),A=A[k]}return r}var Tl=wi?function(r,s){return wi.set(r,s),r}:ge,Eg=yi?function(r,s){return yi(r,"toString",{configurable:!0,enumerable:!1,value:$o(s),writable:!0})}:ge;function Rg(r){return Di(lr(r))}function Be(r,s,h){var c=-1,g=r.length;s<0&&(s=-s>g?0:g+s),h=h>g?g:h,h<0&&(h+=g),g=s>h?0:h-s>>>0,s>>>=0;for(var y=B(g);++c<g;)y[c]=r[c+s];return y}function kg(r,s){var h;return Cn(r,function(c,g,y){return h=s(c,g,y),!h}),!!h}function Ii(r,s,h){var c=0,g=r==null?c:r.length;if(typeof s=="number"&&s===s&&g<=V){for(;c<g;){var y=c+g>>>1,S=r[y];S!==null&&!Se(S)&&(h?S<=s:S<s)?c=y+1:g=y}return g}return go(r,s,ge,h)}function go(r,s,h,c){var g=0,y=r==null?0:r.length;if(y===0)return 0;s=h(s);for(var S=s!==s,A=s===null,k=Se(s),U=s===e;g<y;){var N=bi((g+y)/2),Y=h(r[N]),q=Y!==e,J=Y===null,st=Y===Y,ct=Se(Y);if(S)var ot=c||st;else U?ot=st&&(c||q):A?ot=st&&q&&(c||!J):k?ot=st&&q&&!J&&(c||!ct):J||ct?ot=!1:ot=c?Y<=s:Y<s;ot?g=N+1:y=N}return ie(y,H)}function Ml(r,s){for(var h=-1,c=r.length,g=0,y=[];++h<c;){var S=r[h],A=s?s(S):S;if(!h||!ze(A,k)){var k=A;y[g++]=S===0?0:S}}return y}function Il(r){return typeof r=="number"?r:Se(r)?O:+r}function we(r){if(typeof r=="string")return r;if(lt(r))return Gt(r,we)+"";if(Se(r))return al?al.call(r):"";var s=r+"";return s=="0"&&1/r==-1/0?"-0":s}function An(r,s,h){var c=-1,g=hi,y=r.length,S=!0,A=[],k=A;if(h)S=!1,g=Hs;else if(y>=o){var U=s?null:zg(r);if(U)return ui(U);S=!1,g=wr,k=new Bn}else k=s?[]:A;t:for(;++c<y;){var N=r[c],Y=s?s(N):N;if(N=h||N!==0?N:0,S&&Y===Y){for(var q=k.length;q--;)if(k[q]===Y)continue t;s&&k.push(Y),A.push(N)}else g(k,Y,h)||(k!==A&&k.push(Y),A.push(N))}return A}function mo(r,s){return s=Pn(s,r),r=ru(r,s),r==null||delete r[Je(Le(s))]}function El(r,s,h,c){return kr(r,s,h(Gn(r,s)),c)}function Ei(r,s,h,c){for(var g=r.length,y=c?g:-1;(c?y--:++y<g)&&s(r[y],y,r););return h?Be(r,c?0:y,c?y+1:g):Be(r,c?y+1:0,c?g:y)}function Rl(r,s){var h=r;return h instanceof _t&&(h=h.value()),Ys(s,function(c,g){return g.func.apply(g.thisArg,bn([c],g.args))},h)}function xo(r,s,h){var c=r.length;if(c<2)return c?An(r[0]):[];for(var g=-1,y=B(c);++g<c;)for(var S=r[g],A=-1;++A<c;)A!=g&&(y[g]=Ir(y[g]||S,r[A],s,h));return An(re(y,1),s,h)}function kl(r,s,h){for(var c=-1,g=r.length,y=s.length,S={};++c<g;){var A=c<y?s[c]:e;h(S,r[c],A)}return S}function yo(r){return Ht(r)?r:[]}function vo(r){return typeof r=="function"?r:ge}function Pn(r,s){return lt(r)?r:Io(r,s)?[r]:au(Pt(r))}var Fg=dt;function Tn(r,s,h){var c=r.length;return h=h===e?c:h,!s&&h>=c?r:Be(r,s,h)}var Fl=v_||function(r){return ne.clearTimeout(r)};function Bl(r,s){if(s)return r.slice();var h=r.length,c=el?el(h):new r.constructor(h);return r.copy(c),c}function bo(r){var s=new r.constructor(r.byteLength);return new gi(s).set(new gi(r)),s}function Bg(r,s){var h=s?bo(r.buffer):r.buffer;return new r.constructor(h,r.byteOffset,r.byteLength)}function Lg(r){var s=new r.constructor(r.source,mh.exec(r));return s.lastIndex=r.lastIndex,s}function Gg(r){return Tr?Et(Tr.call(r)):{}}function Ll(r,s){var h=s?bo(r.buffer):r.buffer;return new r.constructor(h,r.byteOffset,r.length)}function Gl(r,s){if(r!==s){var h=r!==e,c=r===null,g=r===r,y=Se(r),S=s!==e,A=s===null,k=s===s,U=Se(s);if(!A&&!U&&!y&&r>s||y&&S&&k&&!A&&!U||c&&S&&k||!h&&k||!g)return 1;if(!c&&!y&&!U&&r<s||U&&h&&g&&!c&&!y||A&&h&&g||!S&&g||!k)return-1}return 0}function Og(r,s,h){for(var c=-1,g=r.criteria,y=s.criteria,S=g.length,A=h.length;++c<S;){var k=Gl(g[c],y[c]);if(k){if(c>=A)return k;var U=h[c];return k*(U=="desc"?-1:1)}}return r.index-s.index}function Ol(r,s,h,c){for(var g=-1,y=r.length,S=h.length,A=-1,k=s.length,U=Zt(y-S,0),N=B(k+U),Y=!c;++A<k;)N[A]=s[A];for(;++g<S;)(Y||g<y)&&(N[h[g]]=r[g]);for(;U--;)N[A++]=r[g++];return N}function Dl(r,s,h,c){for(var g=-1,y=r.length,S=-1,A=h.length,k=-1,U=s.length,N=Zt(y-A,0),Y=B(N+U),q=!c;++g<N;)Y[g]=r[g];for(var J=g;++k<U;)Y[J+k]=s[k];for(;++S<A;)(q||g<y)&&(Y[J+h[S]]=r[g++]);return Y}function de(r,s){var h=-1,c=r.length;for(s||(s=B(c));++h<c;)s[h]=r[h];return s}function Qe(r,s,h,c){var g=!h;h||(h={});for(var y=-1,S=s.length;++y<S;){var A=s[y],k=c?c(h[A],r[A],A,h,r):e;k===e&&(k=r[A]),g?hn(h,A,k):Mr(h,A,k)}return h}function Dg(r,s){return Qe(r,Mo(r),s)}function Ug(r,s){return Qe(r,jl(r),s)}function Ri(r,s){return function(h,c){var g=lt(h)?Hp:ag,y=s?s():{};return g(h,r,nt(c,2),y)}}function sr(r){return dt(function(s,h){var c=-1,g=h.length,y=g>1?h[g-1]:e,S=g>2?h[2]:e;for(y=r.length>3&&typeof y=="function"?(g--,y):e,S&&le(h[0],h[1],S)&&(y=g<3?e:y,g=1),s=Et(s);++c<g;){var A=h[c];A&&r(s,A,c,y)}return s})}function Ul(r,s){return function(h,c){if(h==null)return h;if(!pe(h))return r(h,c);for(var g=h.length,y=s?g:-1,S=Et(h);(s?y--:++y<g)&&c(S[y],y,S)!==!1;);return h}}function Wl(r){return function(s,h,c){for(var g=-1,y=Et(s),S=c(s),A=S.length;A--;){var k=S[r?A:++g];if(h(y[k],k,y)===!1)break}return s}}function Wg(r,s,h){var c=s&w,g=Fr(r);function y(){var S=this&&this!==ne&&this instanceof y?g:r;return S.apply(c?h:this,arguments)}return y}function Nl(r){return function(s){s=Pt(s);var h=Qn(s)?Ne(s):e,c=h?h[0]:s.charAt(0),g=h?Tn(h,1).join(""):s.slice(1);return c[r]()+g}}function or(r){return function(s){return Ys(Uu(Du(s).replace(Ep,"")),r,"")}}function Fr(r){return function(){var s=arguments;switch(s.length){case 0:return new r;case 1:return new r(s[0]);case 2:return new r(s[0],s[1]);case 3:return new r(s[0],s[1],s[2]);case 4:return new r(s[0],s[1],s[2],s[3]);case 5:return new r(s[0],s[1],s[2],s[3],s[4]);case 6:return new r(s[0],s[1],s[2],s[3],s[4],s[5]);case 7:return new r(s[0],s[1],s[2],s[3],s[4],s[5],s[6])}var h=ir(r.prototype),c=r.apply(h,s);return Ot(c)?c:h}}function Ng(r,s,h){var c=Fr(r);function g(){for(var y=arguments.length,S=B(y),A=y,k=ar(g);A--;)S[A]=arguments[A];var U=y<3&&S[0]!==k&&S[y-1]!==k?[]:wn(S,k);if(y-=U.length,y<h)return Xl(r,s,ki,g.placeholder,e,S,U,e,e,h-y);var N=this&&this!==ne&&this instanceof g?c:r;return ve(N,this,S)}return g}function $l(r){return function(s,h,c){var g=Et(s);if(!pe(s)){var y=nt(h,3);s=Qt(s),h=function(A){return y(g[A],A,g)}}var S=r(s,h,c);return S>-1?g[y?s[S]:S]:e}}function zl(r){return un(function(s){var h=s.length,c=h,g=ke.prototype.thru;for(r&&s.reverse();c--;){var y=s[c];if(typeof y!="function")throw new Re(l);if(g&&!S&&Gi(y)=="wrapper")var S=new ke([],!0)}for(c=S?c:h;++c<h;){y=s[c];var A=Gi(y),k=A=="wrapper"?Po(y):e;k&&Eo(k[0])&&k[1]==($|F|X|rt)&&!k[4].length&&k[9]==1?S=S[Gi(k[0])].apply(S,k[3]):S=y.length==1&&Eo(y)?S[A]():S.thru(y)}return function(){var U=arguments,N=U[0];if(S&&U.length==1&&lt(N))return S.plant(N).value();for(var Y=0,q=h?s[Y].apply(this,U):N;++Y<h;)q=s[Y].call(this,q);return q}})}function ki(r,s,h,c,g,y,S,A,k,U){var N=s&$,Y=s&w,q=s&T,J=s&(F|D),st=s&et,ct=q?e:Fr(r);function ot(){for(var pt=arguments.length,gt=B(pt),Ce=pt;Ce--;)gt[Ce]=arguments[Ce];if(J)var ue=ar(ot),Ae=Jp(gt,ue);if(c&&(gt=Ol(gt,c,g,J)),y&&(gt=Dl(gt,y,S,J)),pt-=Ae,J&&pt<U){var Yt=wn(gt,ue);return Xl(r,s,ki,ot.placeholder,h,gt,Yt,A,k,U-pt)}var He=Y?h:this,pn=q?He[r]:r;return pt=gt.length,A?gt=a0(gt,A):st&&pt>1&&gt.reverse(),N&&k<pt&&(gt.length=k),this&&this!==ne&&this instanceof ot&&(pn=ct||Fr(pn)),pn.apply(He,gt)}return ot}function Hl(r,s){return function(h,c){return _g(h,r,s(c),{})}}function Fi(r,s){return function(h,c){var g;if(h===e&&c===e)return s;if(h!==e&&(g=h),c!==e){if(g===e)return c;typeof h=="string"||typeof c=="string"?(h=we(h),c=we(c)):(h=Il(h),c=Il(c)),g=r(h,c)}return g}}function wo(r){return un(function(s){return s=Gt(s,be(nt())),dt(function(h){var c=this;return r(s,function(g){return ve(g,c,h)})})})}function Bi(r,s){s=s===e?" ":we(s);var h=s.length;if(h<2)return h?_o(s,r):s;var c=_o(s,vi(r/Jn(s)));return Qn(s)?Tn(Ne(c),0,r).join(""):c.slice(0,r)}function $g(r,s,h,c){var g=s&w,y=Fr(r);function S(){for(var A=-1,k=arguments.length,U=-1,N=c.length,Y=B(N+k),q=this&&this!==ne&&this instanceof S?y:r;++U<N;)Y[U]=c[U];for(;k--;)Y[U++]=arguments[++A];return ve(q,g?h:this,Y)}return S}function Yl(r){return function(s,h,c){return c&&typeof c!="number"&&le(s,h,c)&&(h=c=e),s=dn(s),h===e?(h=s,s=0):h=dn(h),c=c===e?s<h?1:-1:dn(c),Tg(s,h,c,r)}}function Li(r){return function(s,h){return typeof s=="string"&&typeof h=="string"||(s=Ge(s),h=Ge(h)),r(s,h)}}function Xl(r,s,h,c,g,y,S,A,k,U){var N=s&F,Y=N?S:e,q=N?e:S,J=N?y:e,st=N?e:y;s|=N?X:z,s&=~(N?z:X),s&R||(s&=-4);var ct=[r,s,g,J,Y,st,q,A,k,U],ot=h.apply(e,ct);return Eo(r)&&iu(ot,ct),ot.placeholder=c,su(ot,r,s)}function So(r){var s=Kt[r];return function(h,c){if(h=Ge(h),c=c==null?0:ie(ut(c),292),c&&sl(h)){var g=(Pt(h)+"e").split("e"),y=s(g[0]+"e"+(+g[1]+c));return g=(Pt(y)+"e").split("e"),+(g[0]+"e"+(+g[1]-c))}return s(h)}}var zg=nr&&1/ui(new nr([,-0]))[1]==P?function(r){return new nr(r)}:Yo;function Vl(r){return function(s){var h=se(s);return h==Ut?Qs(s):h==We?o_(s):Qp(s,r(s))}}function ln(r,s,h,c,g,y,S,A){var k=s&T;if(!k&&typeof r!="function")throw new Re(l);var U=c?c.length:0;if(U||(s&=-97,c=g=e),S=S===e?S:Zt(ut(S),0),A=A===e?A:ut(A),U-=g?g.length:0,s&z){var N=c,Y=g;c=g=e}var q=k?e:Po(r),J=[r,s,h,c,g,N,Y,y,S,A];if(q&&i0(J,q),r=J[0],s=J[1],h=J[2],c=J[3],g=J[4],A=J[9]=J[9]===e?k?0:r.length:Zt(J[9]-U,0),!A&&s&(F|D)&&(s&=-25),!s||s==w)var st=Wg(r,s,h);else s==F||s==D?st=Ng(r,s,A):(s==X||s==(w|X))&&!g.length?st=$g(r,s,h,c):st=ki.apply(e,J);var ct=q?Tl:iu;return su(ct(st,J),r,s)}function ql(r,s,h,c){return r===e||ze(r,er[h])&&!Tt.call(c,h)?s:r}function Kl(r,s,h,c,g,y){return Ot(r)&&Ot(s)&&(y.set(s,r),Mi(r,s,e,Kl,y),y.delete(s)),r}function Hg(r){return Gr(r)?e:r}function Zl(r,s,h,c,g,y){var S=h&C,A=r.length,k=s.length;if(A!=k&&!(S&&k>A))return!1;var U=y.get(r),N=y.get(s);if(U&&N)return U==s&&N==r;var Y=-1,q=!0,J=h&M?new Bn:e;for(y.set(r,s),y.set(s,r);++Y<A;){var st=r[Y],ct=s[Y];if(c)var ot=S?c(ct,st,Y,s,r,y):c(st,ct,Y,r,s,y);if(ot!==e){if(ot)continue;q=!1;break}if(J){if(!Xs(s,function(pt,gt){if(!wr(J,gt)&&(st===pt||g(st,pt,h,c,y)))return J.push(gt)})){q=!1;break}}else if(!(st===ct||g(st,ct,h,c,y))){q=!1;break}}return y.delete(r),y.delete(s),q}function Yg(r,s,h,c,g,y,S){switch(h){case Kn:if(r.byteLength!=s.byteLength||r.byteOffset!=s.byteOffset)return!1;r=r.buffer,s=s.buffer;case br:return!(r.byteLength!=s.byteLength||!y(new gi(r),new gi(s)));case ft:case It:case at:return ze(+r,+s);case fe:return r.name==s.name&&r.message==s.message;case xr:case yr:return r==s+"";case Ut:var A=Qs;case We:var k=c&C;if(A||(A=ui),r.size!=s.size&&!k)return!1;var U=S.get(r);if(U)return U==s;c|=M,S.set(r,s);var N=Zl(A(r),A(s),c,g,y,S);return S.delete(r),N;case ii:if(Tr)return Tr.call(r)==Tr.call(s)}return!1}function Xg(r,s,h,c,g,y){var S=h&C,A=Co(r),k=A.length,U=Co(s),N=U.length;if(k!=N&&!S)return!1;for(var Y=k;Y--;){var q=A[Y];if(!(S?q in s:Tt.call(s,q)))return!1}var J=y.get(r),st=y.get(s);if(J&&st)return J==s&&st==r;var ct=!0;y.set(r,s),y.set(s,r);for(var ot=S;++Y<k;){q=A[Y];var pt=r[q],gt=s[q];if(c)var Ce=S?c(gt,pt,q,s,r,y):c(pt,gt,q,r,s,y);if(!(Ce===e?pt===gt||g(pt,gt,h,c,y):Ce)){ct=!1;break}ot||(ot=q=="constructor")}if(ct&&!ot){var ue=r.constructor,Ae=s.constructor;ue!=Ae&&"constructor"in r&&"constructor"in s&&!(typeof ue=="function"&&ue instanceof ue&&typeof Ae=="function"&&Ae instanceof Ae)&&(ct=!1)}return y.delete(r),y.delete(s),ct}function un(r){return ko(nu(r,e,cu),r+"")}function Co(r){return gl(r,Qt,Mo)}function Ao(r){return gl(r,_e,jl)}var Po=wi?function(r){return wi.get(r)}:Yo;function Gi(r){for(var s=r.name+"",h=rr[s],c=Tt.call(rr,s)?h.length:0;c--;){var g=h[c],y=g.func;if(y==null||y==r)return g.name}return s}function ar(r){var s=Tt.call(x,"placeholder")?x:r;return s.placeholder}function nt(){var r=x.iteratee||zo;return r=r===zo?yl:r,arguments.length?r(arguments[0],arguments[1]):r}function Oi(r,s){var h=r.__data__;return t0(s)?h[typeof s=="string"?"string":"hash"]:h.map}function To(r){for(var s=Qt(r),h=s.length;h--;){var c=s[h],g=r[c];s[h]=[c,g,tu(g)]}return s}function On(r,s){var h=r_(r,s);return xl(h)?h:e}function Vg(r){var s=Tt.call(r,kn),h=r[kn];try{r[kn]=e;var c=!0}catch{}var g=pi.call(r);return c&&(s?r[kn]=h:delete r[kn]),g}var Mo=to?function(r){return r==null?[]:(r=Et(r),vn(to(r),function(s){return rl.call(r,s)}))}:Xo,jl=to?function(r){for(var s=[];r;)bn(s,Mo(r)),r=mi(r);return s}:Xo,se=he;(eo&&se(new eo(new ArrayBuffer(1)))!=Kn||Cr&&se(new Cr)!=Ut||no&&se(no.resolve())!=ri||nr&&se(new nr)!=We||Ar&&se(new Ar)!=vr)&&(se=function(r){var s=he(r),h=s==Me?r.constructor:e,c=h?Dn(h):"";if(c)switch(c){case I_:return Kn;case E_:return Ut;case R_:return ri;case k_:return We;case F_:return vr}return s});function qg(r,s,h){for(var c=-1,g=h.length;++c<g;){var y=h[c],S=y.size;switch(y.type){case"drop":r+=S;break;case"dropRight":s-=S;break;case"take":s=ie(s,r+S);break;case"takeRight":r=Zt(r,s-S);break}}return{start:r,end:s}}function Kg(r){var s=r.match(ep);return s?s[1].split(np):[]}function Ql(r,s,h){s=Pn(s,r);for(var c=-1,g=s.length,y=!1;++c<g;){var S=Je(s[c]);if(!(y=r!=null&&h(r,S)))break;r=r[S]}return y||++c!=g?y:(g=r==null?0:r.length,!!g&&Hi(g)&&cn(S,g)&&(lt(r)||Un(r)))}function Zg(r){var s=r.length,h=new r.constructor(s);return s&&typeof r[0]=="string"&&Tt.call(r,"index")&&(h.index=r.index,h.input=r.input),h}function Jl(r){return typeof r.constructor=="function"&&!Br(r)?ir(mi(r)):{}}function jg(r,s,h){var c=r.constructor;switch(s){case br:return bo(r);case ft:case It:return new c(+r);case Kn:return Bg(r,h);case Ps:case Ts:case Ms:case Is:case Es:case Rs:case ks:case Fs:case Bs:return Ll(r,h);case Ut:return new c;case at:case yr:return new c(r);case xr:return Lg(r);case We:return new c;case ii:return Gg(r)}}function Qg(r,s){var h=s.length;if(!h)return r;var c=h-1;return s[c]=(h>1?"& ":"")+s[c],s=s.join(h>2?", ":" "),r.replace(tp,`{
/* [wrapped with `+s+`] */
`)}function Jg(r){return lt(r)||Un(r)||!!(il&&r&&r[il])}function cn(r,s){var h=typeof r;return s=s??I,!!s&&(h=="number"||h!="symbol"&&cp.test(r))&&r>-1&&r%1==0&&r<s}function le(r,s,h){if(!Ot(h))return!1;var c=typeof s;return(c=="number"?pe(h)&&cn(s,h.length):c=="string"&&s in h)?ze(h[s],r):!1}function Io(r,s){if(lt(r))return!1;var h=typeof r;return h=="number"||h=="symbol"||h=="boolean"||r==null||Se(r)?!0:Zd.test(r)||!Kd.test(r)||s!=null&&r in Et(s)}function t0(r){var s=typeof r;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?r!=="__proto__":r===null}function Eo(r){var s=Gi(r),h=x[s];if(typeof h!="function"||!(s in _t.prototype))return!1;if(r===h)return!0;var c=Po(h);return!!c&&r===c[0]}function e0(r){return!!tl&&tl in r}var n0=fi?fn:Vo;function Br(r){var s=r&&r.constructor,h=typeof s=="function"&&s.prototype||er;return r===h}function tu(r){return r===r&&!Ot(r)}function eu(r,s){return function(h){return h==null?!1:h[r]===s&&(s!==e||r in Et(h))}}function r0(r){var s=$i(r,function(c){return h.size===d&&h.clear(),c}),h=s.cache;return s}function i0(r,s){var h=r[1],c=s[1],g=h|c,y=g<(w|T|$),S=c==$&&h==F||c==$&&h==rt&&r[7].length<=s[8]||c==($|rt)&&s[7].length<=s[8]&&h==F;if(!(y||S))return r;c&w&&(r[2]=s[2],g|=h&w?0:R);var A=s[3];if(A){var k=r[3];r[3]=k?Ol(k,A,s[4]):A,r[4]=k?wn(r[3],p):s[4]}return A=s[5],A&&(k=r[5],r[5]=k?Dl(k,A,s[6]):A,r[6]=k?wn(r[5],p):s[6]),A=s[7],A&&(r[7]=A),c&$&&(r[8]=r[8]==null?s[8]:ie(r[8],s[8])),r[9]==null&&(r[9]=s[9]),r[0]=s[0],r[1]=g,r}function s0(r){var s=[];if(r!=null)for(var h in Et(r))s.push(h);return s}function o0(r){return pi.call(r)}function nu(r,s,h){return s=Zt(s===e?r.length-1:s,0),function(){for(var c=arguments,g=-1,y=Zt(c.length-s,0),S=B(y);++g<y;)S[g]=c[s+g];g=-1;for(var A=B(s+1);++g<s;)A[g]=c[g];return A[s]=h(S),ve(r,this,A)}}function ru(r,s){return s.length<2?r:Gn(r,Be(s,0,-1))}function a0(r,s){for(var h=r.length,c=ie(s.length,h),g=de(r);c--;){var y=s[c];r[c]=cn(y,h)?g[y]:e}return r}function Ro(r,s){if(!(s==="constructor"&&typeof r[s]=="function")&&s!="__proto__")return r[s]}var iu=ou(Tl),Lr=w_||function(r,s){return ne.setTimeout(r,s)},ko=ou(Eg);function su(r,s,h){var c=s+"";return ko(r,Qg(c,h0(Kg(c),h)))}function ou(r){var s=0,h=0;return function(){var c=P_(),g=At-(c-h);if(h=c,g>0){if(++s>=yt)return arguments[0]}else s=0;return r.apply(e,arguments)}}function Di(r,s){var h=-1,c=r.length,g=c-1;for(s=s===e?c:s;++h<s;){var y=po(h,g),S=r[y];r[y]=r[h],r[h]=S}return r.length=s,r}var au=r0(function(r){var s=[];return r.charCodeAt(0)===46&&s.push(""),r.replace(jd,function(h,c,g,y){s.push(g?y.replace(sp,"$1"):c||h)}),s});function Je(r){if(typeof r=="string"||Se(r))return r;var s=r+"";return s=="0"&&1/r==-1/0?"-0":s}function Dn(r){if(r!=null){try{return di.call(r)}catch{}try{return r+""}catch{}}return""}function h0(r,s){return Ee(it,function(h){var c="_."+h[0];s&h[1]&&!hi(r,c)&&r.push(c)}),r.sort()}function hu(r){if(r instanceof _t)return r.clone();var s=new ke(r.__wrapped__,r.__chain__);return s.__actions__=de(r.__actions__),s.__index__=r.__index__,s.__values__=r.__values__,s}function l0(r,s,h){(h?le(r,s,h):s===e)?s=1:s=Zt(ut(s),0);var c=r==null?0:r.length;if(!c||s<1)return[];for(var g=0,y=0,S=B(vi(c/s));g<c;)S[y++]=Be(r,g,g+=s);return S}function u0(r){for(var s=-1,h=r==null?0:r.length,c=0,g=[];++s<h;){var y=r[s];y&&(g[c++]=y)}return g}function c0(){var r=arguments.length;if(!r)return[];for(var s=B(r-1),h=arguments[0],c=r;c--;)s[c-1]=arguments[c];return bn(lt(h)?de(h):[h],re(s,1))}var f0=dt(function(r,s){return Ht(r)?Ir(r,re(s,1,Ht,!0)):[]}),d0=dt(function(r,s){var h=Le(s);return Ht(h)&&(h=e),Ht(r)?Ir(r,re(s,1,Ht,!0),nt(h,2)):[]}),p0=dt(function(r,s){var h=Le(s);return Ht(h)&&(h=e),Ht(r)?Ir(r,re(s,1,Ht,!0),e,h):[]});function _0(r,s,h){var c=r==null?0:r.length;return c?(s=h||s===e?1:ut(s),Be(r,s<0?0:s,c)):[]}function g0(r,s,h){var c=r==null?0:r.length;return c?(s=h||s===e?1:ut(s),s=c-s,Be(r,0,s<0?0:s)):[]}function m0(r,s){return r&&r.length?Ei(r,nt(s,3),!0,!0):[]}function x0(r,s){return r&&r.length?Ei(r,nt(s,3),!0):[]}function y0(r,s,h,c){var g=r==null?0:r.length;return g?(h&&typeof h!="number"&&le(r,s,h)&&(h=0,c=g),cg(r,s,h,c)):[]}function lu(r,s,h){var c=r==null?0:r.length;if(!c)return-1;var g=h==null?0:ut(h);return g<0&&(g=Zt(c+g,0)),li(r,nt(s,3),g)}function uu(r,s,h){var c=r==null?0:r.length;if(!c)return-1;var g=c-1;return h!==e&&(g=ut(h),g=h<0?Zt(c+g,0):ie(g,c-1)),li(r,nt(s,3),g,!0)}function cu(r){var s=r==null?0:r.length;return s?re(r,1):[]}function v0(r){var s=r==null?0:r.length;return s?re(r,P):[]}function b0(r,s){var h=r==null?0:r.length;return h?(s=s===e?1:ut(s),re(r,s)):[]}function w0(r){for(var s=-1,h=r==null?0:r.length,c={};++s<h;){var g=r[s];c[g[0]]=g[1]}return c}function fu(r){return r&&r.length?r[0]:e}function S0(r,s,h){var c=r==null?0:r.length;if(!c)return-1;var g=h==null?0:ut(h);return g<0&&(g=Zt(c+g,0)),jn(r,s,g)}function C0(r){var s=r==null?0:r.length;return s?Be(r,0,-1):[]}var A0=dt(function(r){var s=Gt(r,yo);return s.length&&s[0]===r[0]?ho(s):[]}),P0=dt(function(r){var s=Le(r),h=Gt(r,yo);return s===Le(h)?s=e:h.pop(),h.length&&h[0]===r[0]?ho(h,nt(s,2)):[]}),T0=dt(function(r){var s=Le(r),h=Gt(r,yo);return s=typeof s=="function"?s:e,s&&h.pop(),h.length&&h[0]===r[0]?ho(h,e,s):[]});function M0(r,s){return r==null?"":C_.call(r,s)}function Le(r){var s=r==null?0:r.length;return s?r[s-1]:e}function I0(r,s,h){var c=r==null?0:r.length;if(!c)return-1;var g=c;return h!==e&&(g=ut(h),g=g<0?Zt(c+g,0):ie(g,c-1)),s===s?h_(r,s,g):li(r,Xh,g,!0)}function E0(r,s){return r&&r.length?Sl(r,ut(s)):e}var R0=dt(du);function du(r,s){return r&&r.length&&s&&s.length?fo(r,s):r}function k0(r,s,h){return r&&r.length&&s&&s.length?fo(r,s,nt(h,2)):r}function F0(r,s,h){return r&&r.length&&s&&s.length?fo(r,s,e,h):r}var B0=un(function(r,s){var h=r==null?0:r.length,c=io(r,s);return Pl(r,Gt(s,function(g){return cn(g,h)?+g:g}).sort(Gl)),c});function L0(r,s){var h=[];if(!(r&&r.length))return h;var c=-1,g=[],y=r.length;for(s=nt(s,3);++c<y;){var S=r[c];s(S,c,r)&&(h.push(S),g.push(c))}return Pl(r,g),h}function Fo(r){return r==null?r:M_.call(r)}function G0(r,s,h){var c=r==null?0:r.length;return c?(h&&typeof h!="number"&&le(r,s,h)?(s=0,h=c):(s=s==null?0:ut(s),h=h===e?c:ut(h)),Be(r,s,h)):[]}function O0(r,s){return Ii(r,s)}function D0(r,s,h){return go(r,s,nt(h,2))}function U0(r,s){var h=r==null?0:r.length;if(h){var c=Ii(r,s);if(c<h&&ze(r[c],s))return c}return-1}function W0(r,s){return Ii(r,s,!0)}function N0(r,s,h){return go(r,s,nt(h,2),!0)}function $0(r,s){var h=r==null?0:r.length;if(h){var c=Ii(r,s,!0)-1;if(ze(r[c],s))return c}return-1}function z0(r){return r&&r.length?Ml(r):[]}function H0(r,s){return r&&r.length?Ml(r,nt(s,2)):[]}function Y0(r){var s=r==null?0:r.length;return s?Be(r,1,s):[]}function X0(r,s,h){return r&&r.length?(s=h||s===e?1:ut(s),Be(r,0,s<0?0:s)):[]}function V0(r,s,h){var c=r==null?0:r.length;return c?(s=h||s===e?1:ut(s),s=c-s,Be(r,s<0?0:s,c)):[]}function q0(r,s){return r&&r.length?Ei(r,nt(s,3),!1,!0):[]}function K0(r,s){return r&&r.length?Ei(r,nt(s,3)):[]}var Z0=dt(function(r){return An(re(r,1,Ht,!0))}),j0=dt(function(r){var s=Le(r);return Ht(s)&&(s=e),An(re(r,1,Ht,!0),nt(s,2))}),Q0=dt(function(r){var s=Le(r);return s=typeof s=="function"?s:e,An(re(r,1,Ht,!0),e,s)});function J0(r){return r&&r.length?An(r):[]}function tm(r,s){return r&&r.length?An(r,nt(s,2)):[]}function em(r,s){return s=typeof s=="function"?s:e,r&&r.length?An(r,e,s):[]}function Bo(r){if(!(r&&r.length))return[];var s=0;return r=vn(r,function(h){if(Ht(h))return s=Zt(h.length,s),!0}),Zs(s,function(h){return Gt(r,Vs(h))})}function pu(r,s){if(!(r&&r.length))return[];var h=Bo(r);return s==null?h:Gt(h,function(c){return ve(s,e,c)})}var nm=dt(function(r,s){return Ht(r)?Ir(r,s):[]}),rm=dt(function(r){return xo(vn(r,Ht))}),im=dt(function(r){var s=Le(r);return Ht(s)&&(s=e),xo(vn(r,Ht),nt(s,2))}),sm=dt(function(r){var s=Le(r);return s=typeof s=="function"?s:e,xo(vn(r,Ht),e,s)}),om=dt(Bo);function am(r,s){return kl(r||[],s||[],Mr)}function hm(r,s){return kl(r||[],s||[],kr)}var lm=dt(function(r){var s=r.length,h=s>1?r[s-1]:e;return h=typeof h=="function"?(r.pop(),h):e,pu(r,h)});function _u(r){var s=x(r);return s.__chain__=!0,s}function um(r,s){return s(r),r}function Ui(r,s){return s(r)}var cm=un(function(r){var s=r.length,h=s?r[0]:0,c=this.__wrapped__,g=function(y){return io(y,r)};return s>1||this.__actions__.length||!(c instanceof _t)||!cn(h)?this.thru(g):(c=c.slice(h,+h+(s?1:0)),c.__actions__.push({func:Ui,args:[g],thisArg:e}),new ke(c,this.__chain__).thru(function(y){return s&&!y.length&&y.push(e),y}))});function fm(){return _u(this)}function dm(){return new ke(this.value(),this.__chain__)}function pm(){this.__values__===e&&(this.__values__=Iu(this.value()));var r=this.__index__>=this.__values__.length,s=r?e:this.__values__[this.__index__++];return{done:r,value:s}}function _m(){return this}function gm(r){for(var s,h=this;h instanceof Ci;){var c=hu(h);c.__index__=0,c.__values__=e,s?g.__wrapped__=c:s=c;var g=c;h=h.__wrapped__}return g.__wrapped__=r,s}function mm(){var r=this.__wrapped__;if(r instanceof _t){var s=r;return this.__actions__.length&&(s=new _t(this)),s=s.reverse(),s.__actions__.push({func:Ui,args:[Fo],thisArg:e}),new ke(s,this.__chain__)}return this.thru(Fo)}function xm(){return Rl(this.__wrapped__,this.__actions__)}var ym=Ri(function(r,s,h){Tt.call(r,h)?++r[h]:hn(r,h,1)});function vm(r,s,h){var c=lt(r)?Hh:ug;return h&&le(r,s,h)&&(s=e),c(r,nt(s,3))}function bm(r,s){var h=lt(r)?vn:pl;return h(r,nt(s,3))}var wm=$l(lu),Sm=$l(uu);function Cm(r,s){return re(Wi(r,s),1)}function Am(r,s){return re(Wi(r,s),P)}function Pm(r,s,h){return h=h===e?1:ut(h),re(Wi(r,s),h)}function gu(r,s){var h=lt(r)?Ee:Cn;return h(r,nt(s,3))}function mu(r,s){var h=lt(r)?Yp:dl;return h(r,nt(s,3))}var Tm=Ri(function(r,s,h){Tt.call(r,h)?r[h].push(s):hn(r,h,[s])});function Mm(r,s,h,c){r=pe(r)?r:lr(r),h=h&&!c?ut(h):0;var g=r.length;return h<0&&(h=Zt(g+h,0)),Yi(r)?h<=g&&r.indexOf(s,h)>-1:!!g&&jn(r,s,h)>-1}var Im=dt(function(r,s,h){var c=-1,g=typeof s=="function",y=pe(r)?B(r.length):[];return Cn(r,function(S){y[++c]=g?ve(s,S,h):Er(S,s,h)}),y}),Em=Ri(function(r,s,h){hn(r,h,s)});function Wi(r,s){var h=lt(r)?Gt:vl;return h(r,nt(s,3))}function Rm(r,s,h,c){return r==null?[]:(lt(s)||(s=s==null?[]:[s]),h=c?e:h,lt(h)||(h=h==null?[]:[h]),Cl(r,s,h))}var km=Ri(function(r,s,h){r[h?0:1].push(s)},function(){return[[],[]]});function Fm(r,s,h){var c=lt(r)?Ys:qh,g=arguments.length<3;return c(r,nt(s,4),h,g,Cn)}function Bm(r,s,h){var c=lt(r)?Xp:qh,g=arguments.length<3;return c(r,nt(s,4),h,g,dl)}function Lm(r,s){var h=lt(r)?vn:pl;return h(r,zi(nt(s,3)))}function Gm(r){var s=lt(r)?ll:Mg;return s(r)}function Om(r,s,h){(h?le(r,s,h):s===e)?s=1:s=ut(s);var c=lt(r)?sg:Ig;return c(r,s)}function Dm(r){var s=lt(r)?og:Rg;return s(r)}function Um(r){if(r==null)return 0;if(pe(r))return Yi(r)?Jn(r):r.length;var s=se(r);return s==Ut||s==We?r.size:uo(r).length}function Wm(r,s,h){var c=lt(r)?Xs:kg;return h&&le(r,s,h)&&(s=e),c(r,nt(s,3))}var Nm=dt(function(r,s){if(r==null)return[];var h=s.length;return h>1&&le(r,s[0],s[1])?s=[]:h>2&&le(s[0],s[1],s[2])&&(s=[s[0]]),Cl(r,re(s,1),[])}),Ni=b_||function(){return ne.Date.now()};function $m(r,s){if(typeof s!="function")throw new Re(l);return r=ut(r),function(){if(--r<1)return s.apply(this,arguments)}}function xu(r,s,h){return s=h?e:s,s=r&&s==null?r.length:s,ln(r,$,e,e,e,e,s)}function yu(r,s){var h;if(typeof s!="function")throw new Re(l);return r=ut(r),function(){return--r>0&&(h=s.apply(this,arguments)),r<=1&&(s=e),h}}var Lo=dt(function(r,s,h){var c=w;if(h.length){var g=wn(h,ar(Lo));c|=X}return ln(r,c,s,h,g)}),vu=dt(function(r,s,h){var c=w|T;if(h.length){var g=wn(h,ar(vu));c|=X}return ln(s,c,r,h,g)});function bu(r,s,h){s=h?e:s;var c=ln(r,F,e,e,e,e,e,s);return c.placeholder=bu.placeholder,c}function wu(r,s,h){s=h?e:s;var c=ln(r,D,e,e,e,e,e,s);return c.placeholder=wu.placeholder,c}function Su(r,s,h){var c,g,y,S,A,k,U=0,N=!1,Y=!1,q=!0;if(typeof r!="function")throw new Re(l);s=Ge(s)||0,Ot(h)&&(N=!!h.leading,Y="maxWait"in h,y=Y?Zt(Ge(h.maxWait)||0,s):y,q="trailing"in h?!!h.trailing:q);function J(Yt){var He=c,pn=g;return c=g=e,U=Yt,S=r.apply(pn,He),S}function st(Yt){return U=Yt,A=Lr(pt,s),N?J(Yt):S}function ct(Yt){var He=Yt-k,pn=Yt-U,$u=s-He;return Y?ie($u,y-pn):$u}function ot(Yt){var He=Yt-k,pn=Yt-U;return k===e||He>=s||He<0||Y&&pn>=y}function pt(){var Yt=Ni();if(ot(Yt))return gt(Yt);A=Lr(pt,ct(Yt))}function gt(Yt){return A=e,q&&c?J(Yt):(c=g=e,S)}function Ce(){A!==e&&Fl(A),U=0,c=k=g=A=e}function ue(){return A===e?S:gt(Ni())}function Ae(){var Yt=Ni(),He=ot(Yt);if(c=arguments,g=this,k=Yt,He){if(A===e)return st(k);if(Y)return Fl(A),A=Lr(pt,s),J(k)}return A===e&&(A=Lr(pt,s)),S}return Ae.cancel=Ce,Ae.flush=ue,Ae}var zm=dt(function(r,s){return fl(r,1,s)}),Hm=dt(function(r,s,h){return fl(r,Ge(s)||0,h)});function Ym(r){return ln(r,et)}function $i(r,s){if(typeof r!="function"||s!=null&&typeof s!="function")throw new Re(l);var h=function(){var c=arguments,g=s?s.apply(this,c):c[0],y=h.cache;if(y.has(g))return y.get(g);var S=r.apply(this,c);return h.cache=y.set(g,S)||y,S};return h.cache=new($i.Cache||an),h}$i.Cache=an;function zi(r){if(typeof r!="function")throw new Re(l);return function(){var s=arguments;switch(s.length){case 0:return!r.call(this);case 1:return!r.call(this,s[0]);case 2:return!r.call(this,s[0],s[1]);case 3:return!r.call(this,s[0],s[1],s[2])}return!r.apply(this,s)}}function Xm(r){return yu(2,r)}var Vm=Fg(function(r,s){s=s.length==1&&lt(s[0])?Gt(s[0],be(nt())):Gt(re(s,1),be(nt()));var h=s.length;return dt(function(c){for(var g=-1,y=ie(c.length,h);++g<y;)c[g]=s[g].call(this,c[g]);return ve(r,this,c)})}),Go=dt(function(r,s){var h=wn(s,ar(Go));return ln(r,X,e,s,h)}),Cu=dt(function(r,s){var h=wn(s,ar(Cu));return ln(r,z,e,s,h)}),qm=un(function(r,s){return ln(r,rt,e,e,e,s)});function Km(r,s){if(typeof r!="function")throw new Re(l);return s=s===e?s:ut(s),dt(r,s)}function Zm(r,s){if(typeof r!="function")throw new Re(l);return s=s==null?0:Zt(ut(s),0),dt(function(h){var c=h[s],g=Tn(h,0,s);return c&&bn(g,c),ve(r,this,g)})}function jm(r,s,h){var c=!0,g=!0;if(typeof r!="function")throw new Re(l);return Ot(h)&&(c="leading"in h?!!h.leading:c,g="trailing"in h?!!h.trailing:g),Su(r,s,{leading:c,maxWait:s,trailing:g})}function Qm(r){return xu(r,1)}function Jm(r,s){return Go(vo(s),r)}function tx(){if(!arguments.length)return[];var r=arguments[0];return lt(r)?r:[r]}function ex(r){return Fe(r,m)}function nx(r,s){return s=typeof s=="function"?s:e,Fe(r,m,s)}function rx(r){return Fe(r,_|m)}function ix(r,s){return s=typeof s=="function"?s:e,Fe(r,_|m,s)}function sx(r,s){return s==null||cl(r,s,Qt(s))}function ze(r,s){return r===s||r!==r&&s!==s}var ox=Li(ao),ax=Li(function(r,s){return r>=s}),Un=ml(function(){return arguments}())?ml:function(r){return Wt(r)&&Tt.call(r,"callee")&&!rl.call(r,"callee")},lt=B.isArray,hx=Dh?be(Dh):gg;function pe(r){return r!=null&&Hi(r.length)&&!fn(r)}function Ht(r){return Wt(r)&&pe(r)}function lx(r){return r===!0||r===!1||Wt(r)&&he(r)==ft}var Mn=S_||Vo,ux=Uh?be(Uh):mg;function cx(r){return Wt(r)&&r.nodeType===1&&!Gr(r)}function fx(r){if(r==null)return!0;if(pe(r)&&(lt(r)||typeof r=="string"||typeof r.splice=="function"||Mn(r)||hr(r)||Un(r)))return!r.length;var s=se(r);if(s==Ut||s==We)return!r.size;if(Br(r))return!uo(r).length;for(var h in r)if(Tt.call(r,h))return!1;return!0}function dx(r,s){return Rr(r,s)}function px(r,s,h){h=typeof h=="function"?h:e;var c=h?h(r,s):e;return c===e?Rr(r,s,e,h):!!c}function Oo(r){if(!Wt(r))return!1;var s=he(r);return s==fe||s==vt||typeof r.message=="string"&&typeof r.name=="string"&&!Gr(r)}function _x(r){return typeof r=="number"&&sl(r)}function fn(r){if(!Ot(r))return!1;var s=he(r);return s==jt||s==ye||s==St||s==dh}function Au(r){return typeof r=="number"&&r==ut(r)}function Hi(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=I}function Ot(r){var s=typeof r;return r!=null&&(s=="object"||s=="function")}function Wt(r){return r!=null&&typeof r=="object"}var Pu=Wh?be(Wh):yg;function gx(r,s){return r===s||lo(r,s,To(s))}function mx(r,s,h){return h=typeof h=="function"?h:e,lo(r,s,To(s),h)}function xx(r){return Tu(r)&&r!=+r}function yx(r){if(n0(r))throw new ht(a);return xl(r)}function vx(r){return r===null}function bx(r){return r==null}function Tu(r){return typeof r=="number"||Wt(r)&&he(r)==at}function Gr(r){if(!Wt(r)||he(r)!=Me)return!1;var s=mi(r);if(s===null)return!0;var h=Tt.call(s,"constructor")&&s.constructor;return typeof h=="function"&&h instanceof h&&di.call(h)==m_}var Do=Nh?be(Nh):vg;function wx(r){return Au(r)&&r>=-9007199254740991&&r<=I}var Mu=$h?be($h):bg;function Yi(r){return typeof r=="string"||!lt(r)&&Wt(r)&&he(r)==yr}function Se(r){return typeof r=="symbol"||Wt(r)&&he(r)==ii}var hr=zh?be(zh):wg;function Sx(r){return r===e}function Cx(r){return Wt(r)&&se(r)==vr}function Ax(r){return Wt(r)&&he(r)==Nd}var Px=Li(co),Tx=Li(function(r,s){return r<=s});function Iu(r){if(!r)return[];if(pe(r))return Yi(r)?Ne(r):de(r);if(Sr&&r[Sr])return s_(r[Sr]());var s=se(r),h=s==Ut?Qs:s==We?ui:lr;return h(r)}function dn(r){if(!r)return r===0?r:0;if(r=Ge(r),r===P||r===-1/0){var s=r<0?-1:1;return s*L}return r===r?r:0}function ut(r){var s=dn(r),h=s%1;return s===s?h?s-h:s:0}function Eu(r){return r?Ln(ut(r),0,W):0}function Ge(r){if(typeof r=="number")return r;if(Se(r))return O;if(Ot(r)){var s=typeof r.valueOf=="function"?r.valueOf():r;r=Ot(s)?s+"":s}if(typeof r!="string")return r===0?r:+r;r=Kh(r);var h=hp.test(r);return h||up.test(r)?$p(r.slice(2),h?2:8):ap.test(r)?O:+r}function Ru(r){return Qe(r,_e(r))}function Mx(r){return r?Ln(ut(r),-9007199254740991,I):r===0?r:0}function Pt(r){return r==null?"":we(r)}var Ix=sr(function(r,s){if(Br(s)||pe(s)){Qe(s,Qt(s),r);return}for(var h in s)Tt.call(s,h)&&Mr(r,h,s[h])}),ku=sr(function(r,s){Qe(s,_e(s),r)}),Xi=sr(function(r,s,h,c){Qe(s,_e(s),r,c)}),Ex=sr(function(r,s,h,c){Qe(s,Qt(s),r,c)}),Rx=un(io);function kx(r,s){var h=ir(r);return s==null?h:ul(h,s)}var Fx=dt(function(r,s){r=Et(r);var h=-1,c=s.length,g=c>2?s[2]:e;for(g&&le(s[0],s[1],g)&&(c=1);++h<c;)for(var y=s[h],S=_e(y),A=-1,k=S.length;++A<k;){var U=S[A],N=r[U];(N===e||ze(N,er[U])&&!Tt.call(r,U))&&(r[U]=y[U])}return r}),Bx=dt(function(r){return r.push(e,Kl),ve(Fu,e,r)});function Lx(r,s){return Yh(r,nt(s,3),je)}function Gx(r,s){return Yh(r,nt(s,3),oo)}function Ox(r,s){return r==null?r:so(r,nt(s,3),_e)}function Dx(r,s){return r==null?r:_l(r,nt(s,3),_e)}function Ux(r,s){return r&&je(r,nt(s,3))}function Wx(r,s){return r&&oo(r,nt(s,3))}function Nx(r){return r==null?[]:Ti(r,Qt(r))}function $x(r){return r==null?[]:Ti(r,_e(r))}function Uo(r,s,h){var c=r==null?e:Gn(r,s);return c===e?h:c}function zx(r,s){return r!=null&&Ql(r,s,fg)}function Wo(r,s){return r!=null&&Ql(r,s,dg)}var Hx=Hl(function(r,s,h){s!=null&&typeof s.toString!="function"&&(s=pi.call(s)),r[s]=h},$o(ge)),Yx=Hl(function(r,s,h){s!=null&&typeof s.toString!="function"&&(s=pi.call(s)),Tt.call(r,s)?r[s].push(h):r[s]=[h]},nt),Xx=dt(Er);function Qt(r){return pe(r)?hl(r):uo(r)}function _e(r){return pe(r)?hl(r,!0):Sg(r)}function Vx(r,s){var h={};return s=nt(s,3),je(r,function(c,g,y){hn(h,s(c,g,y),c)}),h}function qx(r,s){var h={};return s=nt(s,3),je(r,function(c,g,y){hn(h,g,s(c,g,y))}),h}var Kx=sr(function(r,s,h){Mi(r,s,h)}),Fu=sr(function(r,s,h,c){Mi(r,s,h,c)}),Zx=un(function(r,s){var h={};if(r==null)return h;var c=!1;s=Gt(s,function(y){return y=Pn(y,r),c||(c=y.length>1),y}),Qe(r,Ao(r),h),c&&(h=Fe(h,_|v|m,Hg));for(var g=s.length;g--;)mo(h,s[g]);return h});function jx(r,s){return Bu(r,zi(nt(s)))}var Qx=un(function(r,s){return r==null?{}:Ag(r,s)});function Bu(r,s){if(r==null)return{};var h=Gt(Ao(r),function(c){return[c]});return s=nt(s),Al(r,h,function(c,g){return s(c,g[0])})}function Jx(r,s,h){s=Pn(s,r);var c=-1,g=s.length;for(g||(g=1,r=e);++c<g;){var y=r==null?e:r[Je(s[c])];y===e&&(c=g,y=h),r=fn(y)?y.call(r):y}return r}function ty(r,s,h){return r==null?r:kr(r,s,h)}function ey(r,s,h,c){return c=typeof c=="function"?c:e,r==null?r:kr(r,s,h,c)}var Lu=Vl(Qt),Gu=Vl(_e);function ny(r,s,h){var c=lt(r),g=c||Mn(r)||hr(r);if(s=nt(s,4),h==null){var y=r&&r.constructor;g?h=c?new y:[]:Ot(r)?h=fn(y)?ir(mi(r)):{}:h={}}return(g?Ee:je)(r,function(S,A,k){return s(h,S,A,k)}),h}function ry(r,s){return r==null?!0:mo(r,s)}function iy(r,s,h){return r==null?r:El(r,s,vo(h))}function sy(r,s,h,c){return c=typeof c=="function"?c:e,r==null?r:El(r,s,vo(h),c)}function lr(r){return r==null?[]:js(r,Qt(r))}function oy(r){return r==null?[]:js(r,_e(r))}function ay(r,s,h){return h===e&&(h=s,s=e),h!==e&&(h=Ge(h),h=h===h?h:0),s!==e&&(s=Ge(s),s=s===s?s:0),Ln(Ge(r),s,h)}function hy(r,s,h){return s=dn(s),h===e?(h=s,s=0):h=dn(h),r=Ge(r),pg(r,s,h)}function ly(r,s,h){if(h&&typeof h!="boolean"&&le(r,s,h)&&(s=h=e),h===e&&(typeof s=="boolean"?(h=s,s=e):typeof r=="boolean"&&(h=r,r=e)),r===e&&s===e?(r=0,s=1):(r=dn(r),s===e?(s=r,r=0):s=dn(s)),r>s){var c=r;r=s,s=c}if(h||r%1||s%1){var g=ol();return ie(r+g*(s-r+Np("1e-"+((g+"").length-1))),s)}return po(r,s)}var uy=or(function(r,s,h){return s=s.toLowerCase(),r+(h?Ou(s):s)});function Ou(r){return No(Pt(r).toLowerCase())}function Du(r){return r=Pt(r),r&&r.replace(fp,t_).replace(Rp,"")}function cy(r,s,h){r=Pt(r),s=we(s);var c=r.length;h=h===e?c:Ln(ut(h),0,c);var g=h;return h-=s.length,h>=0&&r.slice(h,g)==s}function fy(r){return r=Pt(r),r&&Xd.test(r)?r.replace(_h,e_):r}function dy(r){return r=Pt(r),r&&Qd.test(r)?r.replace(Ls,"\\$&"):r}var py=or(function(r,s,h){return r+(h?"-":"")+s.toLowerCase()}),_y=or(function(r,s,h){return r+(h?" ":"")+s.toLowerCase()}),gy=Nl("toLowerCase");function my(r,s,h){r=Pt(r),s=ut(s);var c=s?Jn(r):0;if(!s||c>=s)return r;var g=(s-c)/2;return Bi(bi(g),h)+r+Bi(vi(g),h)}function xy(r,s,h){r=Pt(r),s=ut(s);var c=s?Jn(r):0;return s&&c<s?r+Bi(s-c,h):r}function yy(r,s,h){r=Pt(r),s=ut(s);var c=s?Jn(r):0;return s&&c<s?Bi(s-c,h)+r:r}function vy(r,s,h){return h||s==null?s=0:s&&(s=+s),T_(Pt(r).replace(Gs,""),s||0)}function by(r,s,h){return(h?le(r,s,h):s===e)?s=1:s=ut(s),_o(Pt(r),s)}function wy(){var r=arguments,s=Pt(r[0]);return r.length<3?s:s.replace(r[1],r[2])}var Sy=or(function(r,s,h){return r+(h?"_":"")+s.toLowerCase()});function Cy(r,s,h){return h&&typeof h!="number"&&le(r,s,h)&&(s=h=e),h=h===e?W:h>>>0,h?(r=Pt(r),r&&(typeof s=="string"||s!=null&&!Do(s))&&(s=we(s),!s&&Qn(r))?Tn(Ne(r),0,h):r.split(s,h)):[]}var Ay=or(function(r,s,h){return r+(h?" ":"")+No(s)});function Py(r,s,h){return r=Pt(r),h=h==null?0:Ln(ut(h),0,r.length),s=we(s),r.slice(h,h+s.length)==s}function Ty(r,s,h){var c=x.templateSettings;h&&le(r,s,h)&&(s=e),r=Pt(r),s=Xi({},s,c,ql);var g=Xi({},s.imports,c.imports,ql),y=Qt(g),S=js(g,y),A,k,U=0,N=s.interpolate||si,Y="__p += '",q=Js((s.escape||si).source+"|"+N.source+"|"+(N===gh?op:si).source+"|"+(s.evaluate||si).source+"|$","g"),J="//# sourceURL="+(Tt.call(s,"sourceURL")?(s.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Gp+"]")+`
`;r.replace(q,function(ot,pt,gt,Ce,ue,Ae){return gt||(gt=Ce),Y+=r.slice(U,Ae).replace(dp,n_),pt&&(A=!0,Y+=`' +
__e(`+pt+`) +
'`),ue&&(k=!0,Y+=`';
`+ue+`;
__p += '`),gt&&(Y+=`' +
((__t = (`+gt+`)) == null ? '' : __t) +
'`),U=Ae+ot.length,ot}),Y+=`';
`;var st=Tt.call(s,"variable")&&s.variable;if(!st)Y=`with (obj) {
`+Y+`
}
`;else if(ip.test(st))throw new ht(u);Y=(k?Y.replace($d,""):Y).replace(zd,"$1").replace(Hd,"$1;"),Y="function("+(st||"obj")+`) {
`+(st?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(A?", __e = _.escape":"")+(k?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Y+`return __p
}`;var ct=Wu(function(){return Ct(y,J+"return "+Y).apply(e,S)});if(ct.source=Y,Oo(ct))throw ct;return ct}function My(r){return Pt(r).toLowerCase()}function Iy(r){return Pt(r).toUpperCase()}function Ey(r,s,h){if(r=Pt(r),r&&(h||s===e))return Kh(r);if(!r||!(s=we(s)))return r;var c=Ne(r),g=Ne(s),y=Zh(c,g),S=jh(c,g)+1;return Tn(c,y,S).join("")}function Ry(r,s,h){if(r=Pt(r),r&&(h||s===e))return r.slice(0,Jh(r)+1);if(!r||!(s=we(s)))return r;var c=Ne(r),g=jh(c,Ne(s))+1;return Tn(c,0,g).join("")}function ky(r,s,h){if(r=Pt(r),r&&(h||s===e))return r.replace(Gs,"");if(!r||!(s=we(s)))return r;var c=Ne(r),g=Zh(c,Ne(s));return Tn(c,g).join("")}function Fy(r,s){var h=Z,c=K;if(Ot(s)){var g="separator"in s?s.separator:g;h="length"in s?ut(s.length):h,c="omission"in s?we(s.omission):c}r=Pt(r);var y=r.length;if(Qn(r)){var S=Ne(r);y=S.length}if(h>=y)return r;var A=h-Jn(c);if(A<1)return c;var k=S?Tn(S,0,A).join(""):r.slice(0,A);if(g===e)return k+c;if(S&&(A+=k.length-A),Do(g)){if(r.slice(A).search(g)){var U,N=k;for(g.global||(g=Js(g.source,Pt(mh.exec(g))+"g")),g.lastIndex=0;U=g.exec(N);)var Y=U.index;k=k.slice(0,Y===e?A:Y)}}else if(r.indexOf(we(g),A)!=A){var q=k.lastIndexOf(g);q>-1&&(k=k.slice(0,q))}return k+c}function By(r){return r=Pt(r),r&&Yd.test(r)?r.replace(ph,l_):r}var Ly=or(function(r,s,h){return r+(h?" ":"")+s.toUpperCase()}),No=Nl("toUpperCase");function Uu(r,s,h){return r=Pt(r),s=h?e:s,s===e?i_(r)?f_(r):Kp(r):r.match(s)||[]}var Wu=dt(function(r,s){try{return ve(r,e,s)}catch(h){return Oo(h)?h:new ht(h)}}),Gy=un(function(r,s){return Ee(s,function(h){h=Je(h),hn(r,h,Lo(r[h],r))}),r});function Oy(r){var s=r==null?0:r.length,h=nt();return r=s?Gt(r,function(c){if(typeof c[1]!="function")throw new Re(l);return[h(c[0]),c[1]]}):[],dt(function(c){for(var g=-1;++g<s;){var y=r[g];if(ve(y[0],this,c))return ve(y[1],this,c)}})}function Dy(r){return lg(Fe(r,_))}function $o(r){return function(){return r}}function Uy(r,s){return r==null||r!==r?s:r}var Wy=zl(),Ny=zl(!0);function ge(r){return r}function zo(r){return yl(typeof r=="function"?r:Fe(r,_))}function $y(r){return bl(Fe(r,_))}function zy(r,s){return wl(r,Fe(s,_))}var Hy=dt(function(r,s){return function(h){return Er(h,r,s)}}),Yy=dt(function(r,s){return function(h){return Er(r,h,s)}});function Ho(r,s,h){var c=Qt(s),g=Ti(s,c);h==null&&!(Ot(s)&&(g.length||!c.length))&&(h=s,s=r,r=this,g=Ti(s,Qt(s)));var y=!(Ot(h)&&"chain"in h)||!!h.chain,S=fn(r);return Ee(g,function(A){var k=s[A];r[A]=k,S&&(r.prototype[A]=function(){var U=this.__chain__;if(y||U){var N=r(this.__wrapped__),Y=N.__actions__=de(this.__actions__);return Y.push({func:k,args:arguments,thisArg:r}),N.__chain__=U,N}return k.apply(r,bn([this.value()],arguments))})}),r}function Xy(){return ne._===this&&(ne._=x_),this}function Yo(){}function Vy(r){return r=ut(r),dt(function(s){return Sl(s,r)})}var qy=wo(Gt),Ky=wo(Hh),Zy=wo(Xs);function Nu(r){return Io(r)?Vs(Je(r)):Pg(r)}function jy(r){return function(s){return r==null?e:Gn(r,s)}}var Qy=Yl(),Jy=Yl(!0);function Xo(){return[]}function Vo(){return!1}function t1(){return{}}function e1(){return""}function n1(){return!0}function r1(r,s){if(r=ut(r),r<1||r>I)return[];var h=W,c=ie(r,W);s=nt(s),r-=W;for(var g=Zs(c,s);++h<r;)s(h);return g}function i1(r){return lt(r)?Gt(r,Je):Se(r)?[r]:de(au(Pt(r)))}function s1(r){var s=++g_;return Pt(r)+s}var o1=Fi(function(r,s){return r+s},0),a1=So("ceil"),h1=Fi(function(r,s){return r/s},1),l1=So("floor");function u1(r){return r&&r.length?Pi(r,ge,ao):e}function c1(r,s){return r&&r.length?Pi(r,nt(s,2),ao):e}function f1(r){return Vh(r,ge)}function d1(r,s){return Vh(r,nt(s,2))}function p1(r){return r&&r.length?Pi(r,ge,co):e}function _1(r,s){return r&&r.length?Pi(r,nt(s,2),co):e}var g1=Fi(function(r,s){return r*s},1),m1=So("round"),x1=Fi(function(r,s){return r-s},0);function y1(r){return r&&r.length?Ks(r,ge):0}function v1(r,s){return r&&r.length?Ks(r,nt(s,2)):0}return x.after=$m,x.ary=xu,x.assign=Ix,x.assignIn=ku,x.assignInWith=Xi,x.assignWith=Ex,x.at=Rx,x.before=yu,x.bind=Lo,x.bindAll=Gy,x.bindKey=vu,x.castArray=tx,x.chain=_u,x.chunk=l0,x.compact=u0,x.concat=c0,x.cond=Oy,x.conforms=Dy,x.constant=$o,x.countBy=ym,x.create=kx,x.curry=bu,x.curryRight=wu,x.debounce=Su,x.defaults=Fx,x.defaultsDeep=Bx,x.defer=zm,x.delay=Hm,x.difference=f0,x.differenceBy=d0,x.differenceWith=p0,x.drop=_0,x.dropRight=g0,x.dropRightWhile=m0,x.dropWhile=x0,x.fill=y0,x.filter=bm,x.flatMap=Cm,x.flatMapDeep=Am,x.flatMapDepth=Pm,x.flatten=cu,x.flattenDeep=v0,x.flattenDepth=b0,x.flip=Ym,x.flow=Wy,x.flowRight=Ny,x.fromPairs=w0,x.functions=Nx,x.functionsIn=$x,x.groupBy=Tm,x.initial=C0,x.intersection=A0,x.intersectionBy=P0,x.intersectionWith=T0,x.invert=Hx,x.invertBy=Yx,x.invokeMap=Im,x.iteratee=zo,x.keyBy=Em,x.keys=Qt,x.keysIn=_e,x.map=Wi,x.mapKeys=Vx,x.mapValues=qx,x.matches=$y,x.matchesProperty=zy,x.memoize=$i,x.merge=Kx,x.mergeWith=Fu,x.method=Hy,x.methodOf=Yy,x.mixin=Ho,x.negate=zi,x.nthArg=Vy,x.omit=Zx,x.omitBy=jx,x.once=Xm,x.orderBy=Rm,x.over=qy,x.overArgs=Vm,x.overEvery=Ky,x.overSome=Zy,x.partial=Go,x.partialRight=Cu,x.partition=km,x.pick=Qx,x.pickBy=Bu,x.property=Nu,x.propertyOf=jy,x.pull=R0,x.pullAll=du,x.pullAllBy=k0,x.pullAllWith=F0,x.pullAt=B0,x.range=Qy,x.rangeRight=Jy,x.rearg=qm,x.reject=Lm,x.remove=L0,x.rest=Km,x.reverse=Fo,x.sampleSize=Om,x.set=ty,x.setWith=ey,x.shuffle=Dm,x.slice=G0,x.sortBy=Nm,x.sortedUniq=z0,x.sortedUniqBy=H0,x.split=Cy,x.spread=Zm,x.tail=Y0,x.take=X0,x.takeRight=V0,x.takeRightWhile=q0,x.takeWhile=K0,x.tap=um,x.throttle=jm,x.thru=Ui,x.toArray=Iu,x.toPairs=Lu,x.toPairsIn=Gu,x.toPath=i1,x.toPlainObject=Ru,x.transform=ny,x.unary=Qm,x.union=Z0,x.unionBy=j0,x.unionWith=Q0,x.uniq=J0,x.uniqBy=tm,x.uniqWith=em,x.unset=ry,x.unzip=Bo,x.unzipWith=pu,x.update=iy,x.updateWith=sy,x.values=lr,x.valuesIn=oy,x.without=nm,x.words=Uu,x.wrap=Jm,x.xor=rm,x.xorBy=im,x.xorWith=sm,x.zip=om,x.zipObject=am,x.zipObjectDeep=hm,x.zipWith=lm,x.entries=Lu,x.entriesIn=Gu,x.extend=ku,x.extendWith=Xi,Ho(x,x),x.add=o1,x.attempt=Wu,x.camelCase=uy,x.capitalize=Ou,x.ceil=a1,x.clamp=ay,x.clone=ex,x.cloneDeep=rx,x.cloneDeepWith=ix,x.cloneWith=nx,x.conformsTo=sx,x.deburr=Du,x.defaultTo=Uy,x.divide=h1,x.endsWith=cy,x.eq=ze,x.escape=fy,x.escapeRegExp=dy,x.every=vm,x.find=wm,x.findIndex=lu,x.findKey=Lx,x.findLast=Sm,x.findLastIndex=uu,x.findLastKey=Gx,x.floor=l1,x.forEach=gu,x.forEachRight=mu,x.forIn=Ox,x.forInRight=Dx,x.forOwn=Ux,x.forOwnRight=Wx,x.get=Uo,x.gt=ox,x.gte=ax,x.has=zx,x.hasIn=Wo,x.head=fu,x.identity=ge,x.includes=Mm,x.indexOf=S0,x.inRange=hy,x.invoke=Xx,x.isArguments=Un,x.isArray=lt,x.isArrayBuffer=hx,x.isArrayLike=pe,x.isArrayLikeObject=Ht,x.isBoolean=lx,x.isBuffer=Mn,x.isDate=ux,x.isElement=cx,x.isEmpty=fx,x.isEqual=dx,x.isEqualWith=px,x.isError=Oo,x.isFinite=_x,x.isFunction=fn,x.isInteger=Au,x.isLength=Hi,x.isMap=Pu,x.isMatch=gx,x.isMatchWith=mx,x.isNaN=xx,x.isNative=yx,x.isNil=bx,x.isNull=vx,x.isNumber=Tu,x.isObject=Ot,x.isObjectLike=Wt,x.isPlainObject=Gr,x.isRegExp=Do,x.isSafeInteger=wx,x.isSet=Mu,x.isString=Yi,x.isSymbol=Se,x.isTypedArray=hr,x.isUndefined=Sx,x.isWeakMap=Cx,x.isWeakSet=Ax,x.join=M0,x.kebabCase=py,x.last=Le,x.lastIndexOf=I0,x.lowerCase=_y,x.lowerFirst=gy,x.lt=Px,x.lte=Tx,x.max=u1,x.maxBy=c1,x.mean=f1,x.meanBy=d1,x.min=p1,x.minBy=_1,x.stubArray=Xo,x.stubFalse=Vo,x.stubObject=t1,x.stubString=e1,x.stubTrue=n1,x.multiply=g1,x.nth=E0,x.noConflict=Xy,x.noop=Yo,x.now=Ni,x.pad=my,x.padEnd=xy,x.padStart=yy,x.parseInt=vy,x.random=ly,x.reduce=Fm,x.reduceRight=Bm,x.repeat=by,x.replace=wy,x.result=Jx,x.round=m1,x.runInContext=E,x.sample=Gm,x.size=Um,x.snakeCase=Sy,x.some=Wm,x.sortedIndex=O0,x.sortedIndexBy=D0,x.sortedIndexOf=U0,x.sortedLastIndex=W0,x.sortedLastIndexBy=N0,x.sortedLastIndexOf=$0,x.startCase=Ay,x.startsWith=Py,x.subtract=x1,x.sum=y1,x.sumBy=v1,x.template=Ty,x.times=r1,x.toFinite=dn,x.toInteger=ut,x.toLength=Eu,x.toLower=My,x.toNumber=Ge,x.toSafeInteger=Mx,x.toString=Pt,x.toUpper=Iy,x.trim=Ey,x.trimEnd=Ry,x.trimStart=ky,x.truncate=Fy,x.unescape=By,x.uniqueId=s1,x.upperCase=Ly,x.upperFirst=No,x.each=gu,x.eachRight=mu,x.first=fu,Ho(x,function(){var r={};return je(x,function(s,h){Tt.call(x.prototype,h)||(r[h]=s)}),r}(),{chain:!1}),x.VERSION=i,Ee(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){x[r].placeholder=x}),Ee(["drop","take"],function(r,s){_t.prototype[r]=function(h){h=h===e?1:Zt(ut(h),0);var c=this.__filtered__&&!s?new _t(this):this.clone();return c.__filtered__?c.__takeCount__=ie(h,c.__takeCount__):c.__views__.push({size:ie(h,W),type:r+(c.__dir__<0?"Right":"")}),c},_t.prototype[r+"Right"]=function(h){return this.reverse()[r](h).reverse()}}),Ee(["filter","map","takeWhile"],function(r,s){var h=s+1,c=h==zt||h==b;_t.prototype[r]=function(g){var y=this.clone();return y.__iteratees__.push({iteratee:nt(g,3),type:h}),y.__filtered__=y.__filtered__||c,y}}),Ee(["head","last"],function(r,s){var h="take"+(s?"Right":"");_t.prototype[r]=function(){return this[h](1).value()[0]}}),Ee(["initial","tail"],function(r,s){var h="drop"+(s?"":"Right");_t.prototype[r]=function(){return this.__filtered__?new _t(this):this[h](1)}}),_t.prototype.compact=function(){return this.filter(ge)},_t.prototype.find=function(r){return this.filter(r).head()},_t.prototype.findLast=function(r){return this.reverse().find(r)},_t.prototype.invokeMap=dt(function(r,s){return typeof r=="function"?new _t(this):this.map(function(h){return Er(h,r,s)})}),_t.prototype.reject=function(r){return this.filter(zi(nt(r)))},_t.prototype.slice=function(r,s){r=ut(r);var h=this;return h.__filtered__&&(r>0||s<0)?new _t(h):(r<0?h=h.takeRight(-r):r&&(h=h.drop(r)),s!==e&&(s=ut(s),h=s<0?h.dropRight(-s):h.take(s-r)),h)},_t.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},_t.prototype.toArray=function(){return this.take(W)},je(_t.prototype,function(r,s){var h=/^(?:filter|find|map|reject)|While$/.test(s),c=/^(?:head|last)$/.test(s),g=x[c?"take"+(s=="last"?"Right":""):s],y=c||/^find/.test(s);g&&(x.prototype[s]=function(){var S=this.__wrapped__,A=c?[1]:arguments,k=S instanceof _t,U=A[0],N=k||lt(S),Y=function(pt){var gt=g.apply(x,bn([pt],A));return c&&q?gt[0]:gt};N&&h&&typeof U=="function"&&U.length!=1&&(k=N=!1);var q=this.__chain__,J=!!this.__actions__.length,st=y&&!q,ct=k&&!J;if(!y&&N){S=ct?S:new _t(this);var ot=r.apply(S,A);return ot.__actions__.push({func:Ui,args:[Y],thisArg:e}),new ke(ot,q)}return st&&ct?r.apply(this,A):(ot=this.thru(Y),st?c?ot.value()[0]:ot.value():ot)})}),Ee(["pop","push","shift","sort","splice","unshift"],function(r){var s=ci[r],h=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",c=/^(?:pop|shift)$/.test(r);x.prototype[r]=function(){var g=arguments;if(c&&!this.__chain__){var y=this.value();return s.apply(lt(y)?y:[],g)}return this[h](function(S){return s.apply(lt(S)?S:[],g)})}}),je(_t.prototype,function(r,s){var h=x[s];if(h){var c=h.name+"";Tt.call(rr,c)||(rr[c]=[]),rr[c].push({name:s,func:h})}}),rr[ki(e,T).name]=[{name:"wrapper",func:e}],_t.prototype.clone=B_,_t.prototype.reverse=L_,_t.prototype.value=G_,x.prototype.at=cm,x.prototype.chain=fm,x.prototype.commit=dm,x.prototype.next=pm,x.prototype.plant=gm,x.prototype.reverse=mm,x.prototype.toJSON=x.prototype.valueOf=x.prototype.value=xm,x.prototype.first=x.prototype.head,Sr&&(x.prototype[Sr]=_m),x},tr=d_();Rn?((Rn.exports=tr)._=tr,$s._=tr):ne._=tr}).call(wS)}(Hr,Hr.exports)),Hr.exports}var Ke=SS();class ch{constructor(){wt(this,"id","single");wt(this,"minPointers",1);wt(this,"name","Einzelauswahl")}handleSelection(t,e){const i=Ke.sample(t);i!=null&&(i.props={innerColor:e.colorSelectedPointerA},i.bringToFront())}}class fh{constructor(){wt(this,"id","sequence");wt(this,"name","Reihenfolge");wt(this,"minPointers",2)}handleSelection(t,e){const i=Ke.shuffle(t);for(let o=i.length-1;o>=0;o--){const a=i[o];a.props={text:(o+1).toString(),innerColor:e.colorSelectedPointerA},a.bringToFront()}}}class yn{constructor(t){wt(this,"teamCount");wt(this,"id");wt(this,"name");wt(this,"minPointers",2);this.id=`teams_${t}`,this.name=`${t} Teams`,this.teamCount=t}handleSelection(t,e){const i=[e.colorSelectedPointerA,e.colorSelectedPointerB,e.colorSelectedPointerC,e.colorSelectedPointerD];let o=[];for(const a of Ke.shuffle(t))o.length==0&&(o=Ke.shuffle(Array(this.teamCount).fill(null).map((l,u)=>u))),a.props={innerColor:i[o.shift()]}}}const Od="last_mode",CS=()=>{const[n,t]=ds(AS()),e=yS(i=>{t(i),PS(i)},[t]);return[n,e]};function AS(){const n=[new ch,new fh,new yn(2),new yn(3),new yn(4)],t=localStorage.getItem(Od);return n.find(e=>e.id==t)??n[0]}function PS(n){localStorage.setItem(Od,n.id)}function TS(n,t){let e=[];const i=o=>{const a=[];let l=0;for(let u of o.touches)a.push({id:u.identifier,x:u.clientX,y:u.clientY}),l=Math.max(l,u.radiusY,u.radiusX);Ke.isEqual(e,a)||(e=a,t(e,l))};return n.addEventListener("touchstart",i,{passive:!0}),n.addEventListener("touchend",i,{passive:!0}),n.addEventListener("touchcancel",i,{passive:!0}),n.addEventListener("touchmove",i,{passive:!0}),()=>{n.removeEventListener("touchstart",i),n.removeEventListener("touchend",i),n.removeEventListener("touchcancel",i),n.removeEventListener("touchmove",i)}}const MS=new Map([["pointerCollection",["pointerSelection","error"]],["pointerSelection",["resultPresentation","error"]],["resultPresentation",["pointerCollection","error"]],["error",["pointerCollection"]]]);class IS{constructor(t){wt(this,"currentState");this.currentState=t}get state(){return this.currentState}transition(t){if(!(MS.get(this.currentState.type)??[]).includes(t.type)){this.currentState={type:"error",error:`Invalid state transition from ${this.currentState.type} to ${t.type}.`};return}this.currentState=t}}const ES=5;function hf(n,t){const e=new Map;let i=-1;return(o,a)=>{i==-1&&(i=o);let l=!1;const u=new Set(e.keys()),f=a.reduce((p,_)=>{const v=e.get(_.id)??(()=>{const m=[];return e.set(_.id,m),l=!0,m})();return e.set(_.id,RS(o,ES,_,v)),u.delete(_.id),Math.max(p,kS(v))},0);u.forEach(p=>e.delete(p));const d=!l&&u.size==0&&f<n.selectionResetMovementThreshold&&a.length>=t;return d||(i=o),[Math.min(1,(o-i)/n.selectionDuration),d]}}function RS(n,t,e,i){return i.push([n,e]),i.length>t&&i.splice(0,1),i}function kS(n){if(n.length<2)return 0;const[t,e]=Ke.first(n),[i,o]=Ke.last(n);return i<=t?0:Math.sqrt(Math.pow(e.x-o.x,2)+Math.pow(e.y-o.y,2))/(i-t)*1e3}var Vn=Object.freeze({Linear:Object.freeze({None:function(n){return n},In:function(n){return n},Out:function(n){return n},InOut:function(n){return n}}),Quadratic:Object.freeze({In:function(n){return n*n},Out:function(n){return n*(2-n)},InOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)}}),Cubic:Object.freeze({In:function(n){return n*n*n},Out:function(n){return--n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)}}),Quartic:Object.freeze({In:function(n){return n*n*n*n},Out:function(n){return 1- --n*n*n*n},InOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)}}),Quintic:Object.freeze({In:function(n){return n*n*n*n*n},Out:function(n){return--n*n*n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)}}),Sinusoidal:Object.freeze({In:function(n){return 1-Math.sin((1-n)*Math.PI/2)},Out:function(n){return Math.sin(n*Math.PI/2)},InOut:function(n){return .5*(1-Math.sin(Math.PI*(.5-n)))}}),Exponential:Object.freeze({In:function(n){return n===0?0:Math.pow(1024,n-1)},Out:function(n){return n===1?1:1-Math.pow(2,-10*n)},InOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)}}),Circular:Object.freeze({In:function(n){return 1-Math.sqrt(1-n*n)},Out:function(n){return Math.sqrt(1- --n*n)},InOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)}}),Elastic:Object.freeze({In:function(n){return n===0?0:n===1?1:-Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI)},Out:function(n){return n===0?0:n===1?1:Math.pow(2,-10*n)*Math.sin((n-.1)*5*Math.PI)+1},InOut:function(n){return n===0?0:n===1?1:(n*=2,n<1?-.5*Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI):.5*Math.pow(2,-10*(n-1))*Math.sin((n-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(n){var t=1.70158;return n===1?1:n*n*((t+1)*n-t)},Out:function(n){var t=1.70158;return n===0?0:--n*n*((t+1)*n+t)+1},InOut:function(n){var t=2.5949095;return(n*=2)<1?.5*(n*n*((t+1)*n-t)):.5*((n-=2)*n*((t+1)*n+t)+2)}}),Bounce:Object.freeze({In:function(n){return 1-Vn.Bounce.Out(1-n)},Out:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},InOut:function(n){return n<.5?Vn.Bounce.In(n*2)*.5:Vn.Bounce.Out(n*2-1)*.5+.5}}),generatePow:function(n){return n===void 0&&(n=4),n=n<Number.EPSILON?Number.EPSILON:n,n=n>1e4?1e4:n,{In:function(t){return Math.pow(t,n)},Out:function(t){return 1-Math.pow(1-t,n)},InOut:function(t){return t<.5?Math.pow(t*2,n)/2:(1-Math.pow(2-t*2,n))/2+.5}}}}),Yr=function(){return performance.now()},FS=function(){function n(){this._tweens={},this._tweensAddedDuringUpdate={}}return n.prototype.getAll=function(){var t=this;return Object.keys(this._tweens).map(function(e){return t._tweens[e]})},n.prototype.removeAll=function(){this._tweens={}},n.prototype.add=function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},n.prototype.remove=function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},n.prototype.update=function(t,e){t===void 0&&(t=Yr()),e===void 0&&(e=!1);var i=Object.keys(this._tweens);if(i.length===0)return!1;for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var o=0;o<i.length;o++){var a=this._tweens[i[o]],l=!e;a&&a.update(t,l)===!1&&!e&&delete this._tweens[i[o]]}i=Object.keys(this._tweensAddedDuringUpdate)}return!0},n}(),za={Linear:function(n,t){var e=n.length-1,i=e*t,o=Math.floor(i),a=za.Utils.Linear;return t<0?a(n[0],n[1],i):t>1?a(n[e],n[e-1],e-i):a(n[o],n[o+1>e?e:o+1],i-o)},Utils:{Linear:function(n,t,e){return(t-n)*e+n}}},Dd=function(){function n(){}return n.nextId=function(){return n._nextId++},n._nextId=0,n}(),Ha=new FS,lf=function(){function n(t,e){e===void 0&&(e=Ha),this._object=t,this._group=e,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Vn.Linear.None,this._interpolationFunction=za.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=Dd.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return n.prototype.getId=function(){return this._id},n.prototype.isPlaying=function(){return this._isPlaying},n.prototype.isPaused=function(){return this._isPaused},n.prototype.getDuration=function(){return this._duration},n.prototype.to=function(t,e){if(e===void 0&&(e=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=t,this._propertiesAreSetUp=!1,this._duration=e<0?0:e,this},n.prototype.duration=function(t){return t===void 0&&(t=1e3),this._duration=t<0?0:t,this},n.prototype.dynamic=function(t){return t===void 0&&(t=!1),this._isDynamic=t,this},n.prototype.start=function(t,e){if(t===void 0&&(t=Yr()),e===void 0&&(e=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var i in this._valuesStartRepeat)this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=t,this._startTime+=this._delayTime,!this._propertiesAreSetUp||e){if(this._propertiesAreSetUp=!0,!this._isDynamic){var o={};for(var a in this._valuesEnd)o[a]=this._valuesEnd[a];this._valuesEnd=o}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,e)}return this},n.prototype.startFromCurrentValues=function(t){return this.start(t,!0)},n.prototype._setupProperties=function(t,e,i,o,a){for(var l in i){var u=t[l],f=Array.isArray(u),d=f?"array":typeof u,p=!f&&Array.isArray(i[l]);if(!(d==="undefined"||d==="function")){if(p){var _=i[l];if(_.length===0)continue;for(var v=[u],m=0,C=_.length;m<C;m+=1){var M=this._handleRelativeValue(u,_[m]);if(isNaN(M)){p=!1,console.warn("Found invalid interpolation list. Skipping.");break}v.push(M)}p&&(i[l]=v)}if((d==="object"||f)&&u&&!p){e[l]=f?[]:{};var w=u;for(var T in w)e[l][T]=w[T];o[l]=f?[]:{};var _=i[l];if(!this._isDynamic){var R={};for(var T in _)R[T]=_[T];i[l]=_=R}this._setupProperties(w,e[l],_,o[l],a)}else(typeof e[l]>"u"||a)&&(e[l]=u),f||(e[l]*=1),p?o[l]=i[l].slice().reverse():o[l]=e[l]||0}}},n.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},n.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},n.prototype.pause=function(t){return t===void 0&&(t=Yr()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=t,this._group&&this._group.remove(this),this)},n.prototype.resume=function(t){return t===void 0&&(t=Yr()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=t-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},n.prototype.stopChainedTweens=function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop();return this},n.prototype.group=function(t){return t===void 0&&(t=Ha),this._group=t,this},n.prototype.delay=function(t){return t===void 0&&(t=0),this._delayTime=t,this},n.prototype.repeat=function(t){return t===void 0&&(t=0),this._initialRepeat=t,this._repeat=t,this},n.prototype.repeatDelay=function(t){return this._repeatDelayTime=t,this},n.prototype.yoyo=function(t){return t===void 0&&(t=!1),this._yoyo=t,this},n.prototype.easing=function(t){return t===void 0&&(t=Vn.Linear.None),this._easingFunction=t,this},n.prototype.interpolation=function(t){return t===void 0&&(t=za.Linear),this._interpolationFunction=t,this},n.prototype.chain=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._chainedTweens=t,this},n.prototype.onStart=function(t){return this._onStartCallback=t,this},n.prototype.onEveryStart=function(t){return this._onEveryStartCallback=t,this},n.prototype.onUpdate=function(t){return this._onUpdateCallback=t,this},n.prototype.onRepeat=function(t){return this._onRepeatCallback=t,this},n.prototype.onComplete=function(t){return this._onCompleteCallback=t,this},n.prototype.onStop=function(t){return this._onStopCallback=t,this},n.prototype.update=function(t,e){var i;if(t===void 0&&(t=Yr()),e===void 0&&(e=!0),this._isPaused)return!0;var o=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(t>o)return!1;e&&this.start(t,!0)}if(this._goToEnd=!1,t<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var a=t-this._startTime,l=this._duration+((i=this._repeatDelayTime)!==null&&i!==void 0?i:this._delayTime),u=this._duration+this._repeat*l,f=this._calculateElapsedPortion(a,l,u),d=this._easingFunction(f),p=this._calculateCompletionStatus(a,l);if(p==="repeat"&&this._processRepetition(a,l),this._updateProperties(this._object,this._valuesStart,this._valuesEnd,d),p==="about-to-repeat"&&this._processRepetition(a,l),this._onUpdateCallback&&this._onUpdateCallback(this._object,f),p==="repeat"||p==="about-to-repeat")this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1;else if(p==="completed"){this._isPlaying=!1,this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var _=0,v=this._chainedTweens.length;_<v;_++)this._chainedTweens[_].start(this._startTime+this._duration,!1)}return p!=="completed"},n.prototype._calculateElapsedPortion=function(t,e,i){if(this._duration===0||t>i)return 1;var o=t%e,a=Math.min(o/this._duration,1);return a===0&&t!==0&&t%this._duration===0?1:a},n.prototype._calculateCompletionStatus=function(t,e){return this._duration!==0&&t<this._duration?"playing":this._repeat<=0?"completed":t===this._duration?"about-to-repeat":"repeat"},n.prototype._processRepetition=function(t,e){var i=Math.min(Math.trunc((t-this._duration)/e)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=i);for(var o in this._valuesStartRepeat){var a=this._valuesEnd[o];!this._yoyo&&typeof a=="string"&&(this._valuesStartRepeat[o]=this._valuesStartRepeat[o]+parseFloat(a)),this._yoyo&&this._swapEndStartRepeatValues(o),this._valuesStart[o]=this._valuesStartRepeat[o]}this._yoyo&&(this._reversed=!this._reversed),this._startTime+=e*i},n.prototype._updateProperties=function(t,e,i,o){for(var a in i)if(e[a]!==void 0){var l=e[a]||0,u=i[a],f=Array.isArray(t[a]),d=Array.isArray(u),p=!f&&d;p?t[a]=this._interpolationFunction(u,o):typeof u=="object"&&u?this._updateProperties(t[a],l,u,o):(u=this._handleRelativeValue(l,u),typeof u=="number"&&(t[a]=l+(u-l)*o))}},n.prototype._handleRelativeValue=function(t,e){return typeof e!="string"?e:e.charAt(0)==="+"||e.charAt(0)==="-"?t+parseFloat(e):parseFloat(e)},n.prototype._swapEndStartRepeatValues=function(t){var e=this._valuesStartRepeat[t],i=this._valuesEnd[t];typeof i=="string"?this._valuesStartRepeat[t]=this._valuesStartRepeat[t]+parseFloat(i):this._valuesStartRepeat[t]=this._valuesEnd[t],this._valuesEnd[t]=e},n}();Dd.nextId;var nn=Ha;nn.getAll.bind(nn);nn.removeAll.bind(nn);nn.add.bind(nn);nn.remove.bind(nn);var BS=nn.update.bind(nn);class LS extends ys{constructor(e,i){super();wt(this,"_props");wt(this,"config");this.config=e,this._props=i}set props(e){const i={...this._props,...Ke.pick(e,"innerColor","ringColor","ringProgress","innerRadius")};Ke.isEqual(this._props,i)||(this._props=i)}draw(){const e=(this._props.innerRadius>1?this._props.innerRadius:this.config.pointerSize)/2,i=e/10,o=e+i*2;this.clear(),this.circle(0,0,e),this.fill(this._props.innerColor),this.moveTo(0,-o),this._props.ringProgress>0&&this.arc(0,0,o,-Math.PI/2,this._props.ringProgress*Math.PI*2-Math.PI/2),this.stroke({width:i,color:this._props.ringColor})}}class GS extends _S{constructor(e){super({text:"",style:{fontFamily:e.fontPointerText,fontSize:e.pointerSize,fill:e.colorPointerText}});wt(this,"_props");this._props={text:"",textColor:e.colorPointerText}}set props(e){const i={...this._props,...Ke.pick(e,"text","textColor")};Ke.isEqual(this._props,i)||(this._props=i)}draw(){this.style.fill=this._props.textColor,this.text=this._props.text}}class OS extends En{constructor(e){super({scale:0});wt(this,"birthAnimation");wt(this,"deathAnimation");wt(this,"pointerFx");wt(this,"textFx");wt(this,"config");this.config=e,this.pointerFx=new LS(e,{innerColor:e.colorNeutralPointer,ringColor:e.colorSelectionProgress,ringProgress:0,innerRadius:e.pointerSize}),this.textFx=new GS(e),this.textFx.scale=.8,this.addChild(this.pointerFx,this.textFx),this.birthAnimation=new lf(this.scale).to({x:1,y:1},e.animationDurationPointerAppears).easing(Vn.Elastic.Out),this.deathAnimation=new lf(this.scale).to({x:0,y:0},e.animationDurationPointerLeaves).easing(Vn.Quadratic.Out)}live(e){this.birthAnimation.start(e),this.draw()}die(e,i){this.birthAnimation.stop(),this.deathAnimation.onComplete(i).start(e)}draw(){this.pointerFx.draw(),this.textFx.draw(),this.textFx.x=this.textFx.width/-2,this.textFx.y=this.textFx.height/-2}set props(e){this.pointerFx.props=e,this.textFx.props=e}update(e,i){this.x=e.x,this.y=e.y,this.props={innerRadius:Math.max(i,this.config.pointerSize)}}bringToFront(){var e;(e=this.parent)==null||e.addChild(this)}}class DS{constructor(t,e,i,o){wt(this,"selectionMode");wt(this,"config");wt(this,"pixi");wt(this,"destroyTouchInteractionDetection");wt(this,"pointers");wt(this,"stateMachine");wt(this,"updateAtRestDetection");wt(this,"lockUIListener");wt(this,"currentTouches");wt(this,"currentMinPointerSize");wt(this,"currentRuntime");wt(this,"presentationTimer");this.selectionMode=i,this.config=e,this.pixi=t,this.lockUIListener=o,this.currentTouches=[],this.currentMinPointerSize=0,this.pointers=new Map,this.stateMachine=new IS({type:"pointerCollection"}),this.destroyTouchInteractionDetection=TS(t.canvas,(a,l)=>{this.currentTouches=a,this.currentMinPointerSize=l*2}),this.updateAtRestDetection=hf(e,i.minPointers),this.currentRuntime=0,this.presentationTimer=0}set lockUI(t){var e;(e=this.lockUIListener)==null||e.call(this,t)}onTick(t){switch(this.currentRuntime=t,this.stateMachine.state.type){case"pointerCollection":{const e=new Set(this.pointers.keys());for(let a of this.currentTouches)(this.pointers.get(a.id)??(()=>{const u=new OS(this.config);return this.pointers.set(a.id,u),this.pixi.stage.addChild(u),this.pixi.ticker.addOnce(()=>u.live(t)),console.log("creating pointer",a.id),u})()).update({...a},this.currentMinPointerSize),e.delete(a.id);e.forEach(a=>{const l=this.pointers.get(a);l&&(l.die(t,()=>this.pixi.stage.removeChild(l)),this.pointers.delete(a))});const[i,o]=this.updateAtRestDetection(t,this.currentTouches);for(let a of this.pointers.values())a.props={ringProgress:i,innerColor:this.config.colorNeutralPointer},a.draw();i==1&&o&&this.stateMachine.transition({type:"pointerSelection"}),this.lockUI=this.pointers.size>0;break}case"pointerSelection":{this.lockUI=!0,this.pointers.forEach(e=>{e.props={ringProgress:0},e.draw()}),this.selectionMode.handleSelection(Array.from(this.pointers.values()),this.config),this.pointers.forEach(e=>e.draw()),this.presentationTimer=t,this.stateMachine.transition({type:"resultPresentation"});break}case"resultPresentation":{this.lockUI=!0,t-this.presentationTimer>this.config.selectionDisplayDuration&&(this.clearPointers(),this.updateAtRestDetection=hf(this.config,this.selectionMode.minPointers),this.stateMachine.transition({type:"pointerCollection"}));break}}}clearPointers(){this.pointers.forEach(t=>t.die(this.currentRuntime,()=>this.pixi.stage.removeChild(t))),this.pointers.clear()}destroy(){this.destroyTouchInteractionDetection(),this.clearPointers(),this.lockUIListener=null}}const US="_container_nq332_1",WS="_item_nq332_35",NS="_hidden_nq332_145",ba={container:US,item:WS,hidden:NS},$S="_animated_1d7o0_1",zS={animated:$S},HS=n=>({[new ch().id]:{circles:[{cx:32,cy:32,r:24.1667,fill:n.colorSelectedPointerA,opacity:1}],texts:[]},[new fh().id]:{circles:[{cx:23,cy:23,r:15,fill:n.colorSelectedPointerA,opacity:1},{cx:41,cy:28,r:15,fill:n.colorSelectedPointerA,opacity:.8},{cx:28,cy:41,r:15,fill:n.colorSelectedPointerA,opacity:.6}],texts:[{opacity:1,fill:n.colorPointerText},{opacity:.8,fill:n.colorPointerText},{opacity:.6,fill:n.colorPointerText}]},[new yn(2).id]:{circles:[{cx:24,cy:24,r:15.8333,fill:n.colorSelectedPointerA,opacity:1},{cx:40,cy:40,r:15.8333,fill:n.colorSelectedPointerB,opacity:1}],texts:[]},[new yn(3).id]:{circles:[{cx:21,cy:21,r:13.3333,fill:n.colorSelectedPointerA,opacity:1},{cx:43,cy:25,r:13.3333,fill:n.colorSelectedPointerB,opacity:1},{cx:30,cy:43,r:13.3333,fill:n.colorSelectedPointerC,opacity:1}],texts:[]},[new yn(4).id]:{circles:[{cx:21,cy:21,r:13.3333,fill:n.colorSelectedPointerA,opacity:1},{cx:43,cy:21,r:13.3333,fill:n.colorSelectedPointerB,opacity:1},{cx:21,cy:43,r:13.3333,fill:n.colorSelectedPointerC,opacity:1},{cx:43,cy:43,r:13.3333,fill:n.colorSelectedPointerD,opacity:1}],texts:[]}}),as={cx:32,cy:32,r:0,fill:"transparent",opacity:0},wa={opacity:0,fill:"transparent"},Ud=({config:n,mode:t})=>{const e=ni(()=>HS(n),[n]),i=ni(()=>e[t.id]??{circles:[],texts:[]},[t.id,e]);return Jt("svg",{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:zS.animated,children:[Jt("circle",{style:{...i.circles[3]??as}}),Jt("circle",{style:{...i.circles[2]??as}}),Jt("path",{style:{...i.texts[2]??wa},d:"M21.7281 44.6649L23.8375 44.3836C24.0797 45.5789 24.4899 46.4422 25.068 46.9734C25.6539 47.4969 26.3649 47.7586 27.2008 47.7586C28.193 47.7586 29.0289 47.4149 29.7086 46.7274C30.3961 46.0399 30.7399 45.1883 30.7399 44.1727C30.7399 43.2039 30.4235 42.407 29.7906 41.782C29.1578 41.1492 28.3531 40.8328 27.3766 40.8328C26.9781 40.8328 26.4821 40.9109 25.8883 41.0672L26.1227 39.2156C26.2633 39.2313 26.3766 39.2391 26.4625 39.2391C27.361 39.2391 28.1696 39.0047 28.8883 38.5359C29.6071 38.0672 29.9664 37.3445 29.9664 36.368C29.9664 35.5945 29.7047 34.9539 29.1813 34.4461C28.6578 33.9383 27.9821 33.6844 27.1539 33.6844C26.3336 33.6844 25.65 33.9422 25.1031 34.4578C24.5563 34.9734 24.2047 35.7469 24.0485 36.7781L21.9391 36.4031C22.1969 34.9891 22.7828 33.8953 23.6969 33.1219C24.611 32.3406 25.7477 31.95 27.1071 31.95C28.0446 31.95 28.9078 32.1531 29.6969 32.5594C30.486 32.9578 31.0875 33.5047 31.5016 34.2C31.9235 34.8953 32.1344 35.6336 32.1344 36.4149C32.1344 37.157 31.9352 37.8328 31.5367 38.4422C31.1383 39.0516 30.5485 39.5359 29.7672 39.8953C30.7828 40.1297 31.5719 40.618 32.1344 41.3602C32.6969 42.0945 32.9781 43.0164 32.9781 44.1258C32.9781 45.6258 32.4313 46.8992 31.3375 47.9461C30.2438 48.9852 28.861 49.5047 27.1891 49.5047C25.6813 49.5047 24.4274 49.0555 23.4274 48.157C22.4352 47.2586 21.8688 46.0945 21.7281 44.6649Z"}),Jt("circle",{style:{...i.circles[1]??as}}),Jt("path",{style:{...i.texts[1]??wa},d:"M45.8024 34.1727V36.2H34.4469C34.4313 35.6922 34.5133 35.2039 34.693 34.7352C34.9821 33.9617 35.443 33.2 36.0758 32.45C36.7164 31.7 37.6383 30.8328 38.8414 29.8484C40.7086 28.3172 41.9703 27.1063 42.6266 26.2156C43.2828 25.3172 43.611 24.4695 43.611 23.6727C43.611 22.8367 43.3102 22.1336 42.7086 21.5633C42.1149 20.9852 41.3375 20.6961 40.3766 20.6961C39.361 20.6961 38.5485 21.0008 37.9391 21.6102C37.3297 22.2195 37.0211 23.0633 37.0133 24.1414L34.8453 23.9188C34.9938 22.3016 35.5524 21.0711 36.5211 20.2274C37.4899 19.3758 38.7906 18.95 40.4235 18.95C42.0719 18.95 43.3766 19.407 44.3375 20.3211C45.2985 21.2352 45.7789 22.368 45.7789 23.7195C45.7789 24.407 45.6383 25.0828 45.3571 25.7469C45.0758 26.4109 44.6071 27.1102 43.9508 27.8445C43.3024 28.5789 42.2203 29.5867 40.7047 30.868C39.4391 31.9305 38.6266 32.6531 38.2672 33.0359C37.9078 33.4109 37.611 33.7899 37.3766 34.1727H45.8024Z"}),Jt("circle",{style:{...i.circles[0]??as}}),Jt("path",{style:{...i.texts[0]??wa},d:"M24.6617 31.2H22.5524V17.7586C22.0446 18.243 21.3766 18.7274 20.5485 19.2117C19.7281 19.6961 18.9899 20.0594 18.3336 20.3016V18.2625C19.5133 17.7078 20.5446 17.0359 21.4274 16.2469C22.3102 15.4578 22.9352 14.6922 23.3024 13.95H24.6617V31.2Z"})]})},YS=({onSelect:n,config:t,open:e})=>{const i=ni(()=>[new ch,new fh,new yn(2),new yn(3),new yn(4)],[t]);return Jt("div",{className:`${ba.container} ${e?"":ba.hidden}`,children:i.map(o=>Jt("div",{className:ba.item,onClick:()=>n(o),children:[Jt(Ud,{config:t,mode:o}),Jt("span",{children:o.name})]},o.id))})},XS="_button_11n0t_1",VS="_hidden_11n0t_77",uf={button:XS,hidden:VS},qS=n=>Jt("button",{className:`${uf.button} ${n.hidden?uf.hidden:""}`,onClick:n.onClick,children:Jt(Ud,{config:n.config,mode:n.mode})}),KS=({pixi:n})=>{const[t]=ds(gS),[e,i]=CS(),o=xS(null),[a,l]=ds(!1),[u,f]=ds(!1);return os(()=>{n.ticker.maxFPS=t.maxFPS},[t.maxFPS,n]),os(()=>{const d=new DS(n,t,e,l);return o.current=d,()=>{o.current=null,d.destroy()}},[n,t,e]),os(()=>{let d=0;const p=_=>{var v;d+=_.deltaMS,BS(d),(v=o.current)==null||v.onTick(d)};return n.ticker.add(p),()=>n.ticker.remove(p)},[n]),os(()=>{a&&f(!1)},[a]),Jt("div",{style:{"--color-neutral-pointer":t.colorNeutralPointer,"--color-selection-progress":t.colorSelectionProgress,"--color-selected-pointer-a":t.colorSelectedPointerA,"--color-selected-pointer-b":t.colorSelectedPointerB,"--color-selected-pointer-c":t.colorSelectedPointerC,"--color-selected-pointer-d":t.colorSelectedPointerD,"--color-pointer-text":t.colorPointerText},children:[Jt(YS,{config:t,open:u&&!a,onSelect:d=>{i(d),f(!1)}}),Jt(qS,{config:t,mode:e,hidden:a,onClick:()=>f(!u)})]})};(async()=>{const n=new pd;await n.init({antialias:!0,resizeTo:document.body,resolution:window.devicePixelRatio||1,autoDensity:!0,clearBeforeRender:!1,backgroundAlpha:0}),document.body.appendChild(n.canvas),n.canvas.oncontextmenu=t=>t.preventDefault(),I1(Jt(KS,{pixi:n}),document.getElementById("ui"))})();export{cd as $,ud as A,xe as B,En as C,Ve as D,Mt as E,qe as F,Cs as G,Sv as H,hc as I,Zr as J,Kv as K,ib as L,bt as M,qt as N,ee as O,oe as P,hb as Q,Fa as R,Mb as S,Ji as T,Ea as U,uc as V,ia as W,fc as X,Pv as Y,ae as Z,Lf as _,rn as a,Rt as a0,$t as a1,db as a2,Bb as a3,Jb as a4,ew as a5,ow as a6,hw as a7,lw as a8,rh as a9,qn as aa,cS as ab,fS as ac,ms as ad,Na as ae,dr as af,oS as ag,Ad as ah,Mc as ai,Pc as aj,Y1 as ak,ys as al,V1 as am,Md as an,Qr as b,cs as c,th as d,De as e,Tc as f,Ab as g,ad as h,Yf as i,sn as j,od as k,Qb as l,tw as m,Zu as n,iw as o,aw as p,_d as q,ov as r,eh as s,kt as t,nd as u,X1 as v,Te as w,cw as x,mn as y,kf as z};
